import{s as We,x as we,N as Wt,H as Nt,O as Zt,h as $,E as $t,d as v,P as et,i as K,r as he,Q as Ge,I as Oh,f as O,a as U,l as Le,g as S,c as G,m as De,j as p,R as kr,z as y,n as mt,J as Sh,K as Ph,L as xh,V as Ch,e as ks,C as er,W as Rh,A as Ue,X as Ih,w as jh,B as Xr,M as de,S as fo,o as Ir,T as vr,Y as Nh,D as $h,p as Lh,Z as Dh}from"../chunks/scheduler.2JpnNXgI.js";import{S as Ze,i as Ke,a as ee,t as ae,g as Pt,c as xt,b as Ee,d as Te,m as ke,e as Ae,o as Mh}from"../chunks/index.miTbgV9r.js";import{g as Ks}from"../chunks/navigation.vbpIfeK9.js";import{p as mo}from"../chunks/stores.VD4PnWUq.js";import{F as Ar,c as zn,D as Or,g as Hn,o as Fh,b as Uh,M as Pa,d as Gh,a as Bh,e as zh}from"../chunks/constants.Wy146ReZ.js";import{g as Kt,c as Js,p as Hr,t as fl,u as Hh}from"../chunks/store.mJr8Z0GB.js";import{e as As}from"../chunks/each.GUQlVZEO.js";import{t as ml,b as Qr,c as ea,a as Cs,n as qh}from"../chunks/_commonjsHelpers.Earkat_o.js";import{w as ru,r as Vh}from"../chunks/index.CClw3PgW.js";import{F as Sr}from"../chunks/index.YXUxRMt-.js";import{t as xa}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.grTCAUOJ.js";import{_ as ta}from"../chunks/preload-helper.0HuHagjb.js";function Wh(r){return r?r.replace(/([A-Z])/g,"-$1").toLowerCase():""}function gl(r,e){return r.length<=e?r:r.slice(0,e)+"..."}function Zh(r){let e,t,s='<path fill="currentColor" d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/>',n=[{"data-onlook-id":"~icons/mdi/github.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/mdi/github.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Kh(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class yn extends Ze{constructor(e){super(),Ke(this,e,Kh,Zh,We,{})}}function Jh(r){let e,t,s,n,i,a,o,l,c,u,d,h=ml(new Date(r[2]))+"",f,m,b,_;const A=r[4].default,w=Oh(A,r,r[3],null);return{c(){e=O("div"),t=O("div"),s=O("div"),n=O("img"),o=U(),l=O("div"),c=Le(r[1]),u=U(),d=O("div"),f=Le(h),m=U(),b=O("div"),w&&w.c(),this.h()},l(T){e=S(T,"DIV",{"data-onlook-id":!0,class:!0});var E=$(e);t=S(E,"DIV",{"data-onlook-id":!0,class:!0});var k=$(t);s=S(k,"DIV",{"data-onlook-id":!0,class:!0});var x=$(s);n=S(x,"IMG",{"data-onlook-id":!0,src:!0,alt:!0}),x.forEach(v),k.forEach(v),o=G(E),l=S(E,"DIV",{"data-onlook-id":!0,class:!0});var C=$(l);c=De(C,r[1]),C.forEach(v),u=G(E),d=S(E,"DIV",{"data-onlook-id":!0,class:!0});var H=$(d);f=De(H,h),H.forEach(v),m=G(E),b=S(E,"DIV",{"data-onlook-id":!0,class:!0});var R=$(b);w&&w.l(R),R.forEach(v),E.forEach(v),this.h()},h(){p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:13:13:13"),kr(n.src,i=r[0])||p(n,"src",i),p(n,"alt",a="Avatar of "+r[1]),p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:12:12:14"),p(s,"class","w-6 mask mask-circle"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:11:11:15"),p(t,"class","avatar"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:16:16:16"),p(l,"class","px-2"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:17:17:19"),p(d,"class","text-xs text-gray-500"),p(b,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:20:20:22"),p(b,"class","ml-auto"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/ItemHeader.svelte:10:10:23"),p(e,"class","flex flex-row items-center pb-4 w-full")},m(T,E){K(T,e,E),y(e,t),y(t,s),y(s,n),y(e,o),y(e,l),y(l,c),y(e,u),y(e,d),y(d,f),y(e,m),y(e,b),w&&w.m(b,null),_=!0},p(T,[E]){(!_||E&1&&!kr(n.src,i=T[0]))&&p(n,"src",i),(!_||E&2&&a!==(a="Avatar of "+T[1]))&&p(n,"alt",a),(!_||E&2)&&mt(c,T[1]),(!_||E&4)&&h!==(h=ml(new Date(T[2]))+"")&&mt(f,h),w&&w.p&&(!_||E&8)&&Sh(w,A,T,T[3],_?xh(A,T[3],E,null):Ph(T[3]),null)},i(T){_||(ee(w,T),_=!0)},o(T){ae(w,T),_=!1},d(T){T&&v(e),w&&w.d(T)}}}function Xh(r,e,t){let{$$slots:s={},$$scope:n}=e,{profileImageUrl:i=""}=e,{userName:a=""}=e,{createdAt:o}=e;return r.$$set=l=>{"profileImageUrl"in l&&t(0,i=l.profileImageUrl),"userName"in l&&t(1,a=l.userName),"createdAt"in l&&t(2,o=l.createdAt),"$$scope"in l&&t(3,n=l.$$scope)},[i,a,o,n,s]}class Qh extends Ze{constructor(e){super(),Ke(this,e,Xh,Jh,We,{profileImageUrl:0,userName:1,createdAt:2})}}function Yh(r){let e,t,s='<path fill="currentColor" d="M7 21q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zm2-4h2V8H9zm4 0h2V8h-2z"/>',n=[{"data-onlook-id":"~icons/material-symbols/delete.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/material-symbols/delete.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function ep(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class tp extends Ze{constructor(e){super(),Ke(this,e,ep,Yh,We,{})}}const $i=ru(void 0),ra={};function bl(r){return r==="local"?localStorage:sessionStorage}function go(r,e,t){const s=t?.serializer??JSON,n=t?.storage??"local";function i(a,o){bl(n).setItem(a,s.stringify(o))}if(!ra[r]){const a=ru(e,c=>{const u=bl(n).getItem(r);u&&c(s.parse(u));{const d=h=>{h.key===r&&c(h.newValue?s.parse(h.newValue):null)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)}}),{subscribe:o,set:l}=a;ra[r]={set(c){i(r,c),l(c)},update(c){const u=c(Ch(a));i(r,u),l(u)},subscribe:o}}return ra[r]}go("modeOsPrefers",!1);go("modeUserPrefers",void 0);go("modeCurrent",!1);const su="(prefers-reduced-motion: reduce)";function rp(){return window.matchMedia(su).matches}Vh(rp(),r=>{{const e=s=>{r(s.matches)},t=window.matchMedia(su);return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)}}});function sp(r,e){if(!window.isSecureContext)return console.error("Clipboard action failed: app not running in secure context, see: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard"),{};const t=()=>{r.dispatchEvent(new CustomEvent("copyComplete"))},s=()=>{if(typeof e=="object"){if("element"in e){const n=document.querySelector(`[data-clipboard="${e.element}"]`);if(!n)throw new Error(`Missing HTMLElement with an attribute of [data-clipboard="${e.element}"]`);sa(n.innerHTML,"text/html").then(t);return}if("input"in e){const n=document.querySelector(`[data-clipboard="${e.input}"]`);if(!n)throw new Error(`Missing HTMLInputElement with an attribute of [data-clipboard="${e.input}"]`);sa(n.value).then(t);return}}sa(e).then(t)};return r.addEventListener("click",s),{update(n){e=n},destroy(){r.removeEventListener("click",s)}}}async function sa(r,e="text/plain"){navigator.clipboard.write?await navigator.clipboard.write([new ClipboardItem({[e]:new Blob([r],{type:e}),"text/plain":new Blob([r],{type:"text/plain"})})]):await new Promise(t=>{t(navigator.clipboard.writeText(String(r)))})}function _l(r){let e,t,s,n=yl(r[0])+"",i,a,o,l=(r[7]?r[4]:r[3])+"",c,u,d,h,f,m,b,_,A,w;function T(x,C){return x[6]?ip:np}let E=T(r),k=E(r);return{c(){e=O("div"),t=O("header"),s=O("span"),i=Le(n),a=U(),o=O("button"),c=Le(l),h=U(),f=O("pre"),m=O("code"),k.c(),this.h()},l(x){e=S(x,"DIV",{class:!0,"data-testid":!0});var C=$(e);t=S(C,"HEADER",{class:!0});var H=$(t);s=S(H,"SPAN",{class:!0});var R=$(s);i=De(R,n),R.forEach(v),a=G(H),o=S(H,"BUTTON",{class:!0});var F=$(o);c=De(F,l),F.forEach(v),H.forEach(v),h=G(C),f=S(C,"PRE",{class:!0});var z=$(f);m=S(z,"CODE",{class:!0});var X=$(m);k.l(X),X.forEach(v),z.forEach(v),C.forEach(v),this.h()},h(){p(s,"class","codeblock-language"),p(o,"class",u="codeblock-btn "+r[2]),p(t,"class","codeblock-header "+lp),p(m,"class",b="codeblock-code language-"+r[0]+" lineNumbers"),p(f,"class","codeblock-pre "+cp),p(e,"class",_="codeblock "+r[8]),p(e,"data-testid","codeblock")},m(x,C){K(x,e,C),y(e,t),y(t,s),y(s,i),y(t,a),y(t,o),y(o,c),y(e,h),y(e,f),y(f,m),k.m(m,null),A||(w=[Ue(o,"click",r[9]),Ih(d=sp.call(null,o,r[1]))],A=!0)},p(x,C){C&1&&n!==(n=yl(x[0])+"")&&mt(i,n),C&152&&l!==(l=(x[7]?x[4]:x[3])+"")&&mt(c,l),C&4&&u!==(u="codeblock-btn "+x[2])&&p(o,"class",u),d&&jh(d.update)&&C&2&&d.update.call(null,x[1]),E===(E=T(x))&&k?k.p(x,C):(k.d(1),k=E(x),k&&(k.c(),k.m(m,null))),C&1&&b!==(b="codeblock-code language-"+x[0]+" lineNumbers")&&p(m,"class",b),C&256&&_!==(_="codeblock "+x[8])&&p(e,"class",_)},d(x){x&&v(e),k.d(),A=!1,Xr(w)}}}function np(r){let e=r[1].trim()+"",t;return{c(){t=Le(e)},l(s){t=De(s,e)},m(s,n){K(s,t,n)},p(s,n){n&2&&e!==(e=s[1].trim()+"")&&mt(t,e)},d(s){s&&v(t)}}}function ip(r){let e,t;return{c(){e=new Nt(!1),t=ks(),this.h()},l(s){e=$t(s,!1),t=ks(),this.h()},h(){e.a=t},m(s,n){e.m(r[5],s,n),K(s,t,n)},p(s,n){n&32&&e.p(s[5])},d(s){s&&(v(t),e.d())}}}function ap(r){let e,t=r[0]&&r[1]&&_l(r);return{c(){t&&t.c(),e=ks()},l(s){t&&t.l(s),e=ks()},m(s,n){t&&t.m(s,n),K(s,e,n)},p(s,[n]){s[0]&&s[1]?t?t.p(s,n):(t=_l(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:he,o:he,d(s){s&&v(e),t&&t.d(s)}}}const op="overflow-hidden shadow",lp="text-xs text-white/50 uppercase flex justify-between items-center p-2 pl-4",cp="whitespace-pre-wrap break-all p-4 pt-1";function yl(r){return r==="js"?"javascript":r==="ts"?"typescript":r==="shell"?"terminal":r}function up(r,e,t){let s,n;er(r,$i,x=>t(17,n=x));const i=Rh();let{language:a="plaintext"}=e,{code:o=""}=e,{lineNumbers:l=!1}=e,{background:c="bg-neutral-900/90"}=e,{blur:u=""}=e,{text:d="text-sm"}=e,{color:h="text-white"}=e,{rounded:f="rounded-container-token"}=e,{shadow:m="shadow"}=e,{button:b="btn btn-sm variant-soft !text-white"}=e,{buttonLabel:_="Copy"}=e,{buttonCopied:A="👍"}=e,w=!1,T=o,E=!1;function k(){t(7,E=!0),setTimeout(()=>{t(7,E=!1)},2e3),i("copy")}return r.$$set=x=>{t(19,e=we(we({},e),Ge(x))),"language"in x&&t(0,a=x.language),"code"in x&&t(1,o=x.code),"lineNumbers"in x&&t(10,l=x.lineNumbers),"background"in x&&t(11,c=x.background),"blur"in x&&t(12,u=x.blur),"text"in x&&t(13,d=x.text),"color"in x&&t(14,h=x.color),"rounded"in x&&t(15,f=x.rounded),"shadow"in x&&t(16,m=x.shadow),"button"in x&&t(2,b=x.button),"buttonLabel"in x&&t(3,_=x.buttonLabel),"buttonCopied"in x&&t(4,A=x.buttonCopied)},r.$$.update=()=>{r.$$.dirty&131075&&n!==void 0&&(t(5,T=n.highlight(o,{language:a}).value.trim()),t(6,w=!0)),r.$$.dirty&1056&&l&&(t(5,T=T.replace(/^/gm,()=>'<span class="line"></span>	')),t(6,w=!0)),t(8,s=`${op} ${c} ${u} ${d} ${h} ${f} ${m} ${e.class??""}`)},e=Ge(e),[a,o,b,_,A,T,w,E,s,k,l,c,u,d,h,f,m,n]}class qr extends Ze{constructor(e){super(),Ke(this,e,up,ap,We,{language:0,code:1,lineNumbers:10,background:11,blur:12,text:13,color:14,rounded:15,shadow:16,button:2,buttonLabel:3,buttonCopied:4})}}function nu(r){return r instanceof Map?r.clear=r.delete=r.set=function(){throw new Error("map is read-only")}:r instanceof Set&&(r.add=r.clear=r.delete=function(){throw new Error("set is read-only")}),Object.freeze(r),Object.getOwnPropertyNames(r).forEach(e=>{const t=r[e],s=typeof t;(s==="object"||s==="function")&&!Object.isFrozen(t)&&nu(t)}),r}let wl=class{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function iu(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Er(r,...e){const t=Object.create(null);for(const s in r)t[s]=r[s];return e.forEach(function(s){for(const n in s)t[n]=s[n]}),t}const dp="</span>",vl=r=>!!r.scope,hp=(r,{prefix:e})=>{if(r.startsWith("language:"))return r.replace("language:","language-");if(r.includes(".")){const t=r.split(".");return[`${e}${t.shift()}`,...t.map((s,n)=>`${s}${"_".repeat(n+1)}`)].join(" ")}return`${e}${r}`};class pp{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=iu(e)}openNode(e){if(!vl(e))return;const t=hp(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){vl(e)&&(this.buffer+=dp)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const El=(r={})=>{const e={children:[]};return Object.assign(e,r),e};class bo{constructor(){this.rootNode=El(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=El({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return typeof t=="string"?e.addText(t):t.children&&(e.openNode(t),t.children.forEach(s=>this._walk(e,s)),e.closeNode(t)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(t=>typeof t=="string")?e.children=[e.children.join("")]:e.children.forEach(t=>{bo._collapse(t)}))}}class fp extends bo{constructor(e){super(),this.options=e}addText(e){e!==""&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const s=e.root;t&&(s.scope=`language:${t}`),this.add(s)}toHTML(){return new pp(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function Xs(r){return r?typeof r=="string"?r:r.source:null}function au(r){return Yr("(?=",r,")")}function mp(r){return Yr("(?:",r,")*")}function gp(r){return Yr("(?:",r,")?")}function Yr(...r){return r.map(t=>Xs(t)).join("")}function bp(r){const e=r[r.length-1];return typeof e=="object"&&e.constructor===Object?(r.splice(r.length-1,1),e):{}}function _o(...r){return"("+(bp(r).capture?"":"?:")+r.map(s=>Xs(s)).join("|")+")"}function ou(r){return new RegExp(r.toString()+"|").exec("").length-1}function _p(r,e){const t=r&&r.exec(e);return t&&t.index===0}const yp=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function yo(r,{joinWith:e}){let t=0;return r.map(s=>{t+=1;const n=t;let i=Xs(s),a="";for(;i.length>0;){const o=yp.exec(i);if(!o){a+=i;break}a+=i.substring(0,o.index),i=i.substring(o.index+o[0].length),o[0][0]==="\\"&&o[1]?a+="\\"+String(Number(o[1])+n):(a+=o[0],o[0]==="("&&t++)}return a}).map(s=>`(${s})`).join(e)}const wp=/\b\B/,lu="[a-zA-Z]\\w*",wo="[a-zA-Z_]\\w*",cu="\\b\\d+(\\.\\d+)?",uu="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",du="\\b(0b[01]+)",vp="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Ep=(r={})=>{const e=/^#![ ]*\//;return r.binary&&(r.begin=Yr(e,/.*\b/,r.binary,/\b.*/)),Er({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,s)=>{t.index!==0&&s.ignoreMatch()}},r)},Qs={begin:"\\\\[\\s\\S]",relevance:0},Tp={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Qs]},kp={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Qs]},Ap={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Li=function(r,e,t={}){const s=Er({scope:"comment",begin:r,end:e,contains:[]},t);s.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const n=_o("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return s.contains.push({begin:Yr(/[ ]+/,"(",n,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),s},Op=Li("//","$"),Sp=Li("/\\*","\\*/"),Pp=Li("#","$"),xp={scope:"number",begin:cu,relevance:0},Cp={scope:"number",begin:uu,relevance:0},Rp={scope:"number",begin:du,relevance:0},Ip={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[Qs,{begin:/\[/,end:/\]/,relevance:0,contains:[Qs]}]},jp={scope:"title",begin:lu,relevance:0},Np={scope:"title",begin:wo,relevance:0},$p={begin:"\\.\\s*"+wo,relevance:0},Lp=function(r){return Object.assign(r,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var Pn=Object.freeze({__proto__:null,APOS_STRING_MODE:Tp,BACKSLASH_ESCAPE:Qs,BINARY_NUMBER_MODE:Rp,BINARY_NUMBER_RE:du,COMMENT:Li,C_BLOCK_COMMENT_MODE:Sp,C_LINE_COMMENT_MODE:Op,C_NUMBER_MODE:Cp,C_NUMBER_RE:uu,END_SAME_AS_BEGIN:Lp,HASH_COMMENT_MODE:Pp,IDENT_RE:lu,MATCH_NOTHING_RE:wp,METHOD_GUARD:$p,NUMBER_MODE:xp,NUMBER_RE:cu,PHRASAL_WORDS_MODE:Ap,QUOTE_STRING_MODE:kp,REGEXP_MODE:Ip,RE_STARTERS_RE:vp,SHEBANG:Ep,TITLE_MODE:jp,UNDERSCORE_IDENT_RE:wo,UNDERSCORE_TITLE_MODE:Np});function Dp(r,e){r.input[r.index-1]==="."&&e.ignoreMatch()}function Mp(r,e){r.className!==void 0&&(r.scope=r.className,delete r.className)}function Fp(r,e){e&&r.beginKeywords&&(r.begin="\\b("+r.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",r.__beforeBegin=Dp,r.keywords=r.keywords||r.beginKeywords,delete r.beginKeywords,r.relevance===void 0&&(r.relevance=0))}function Up(r,e){Array.isArray(r.illegal)&&(r.illegal=_o(...r.illegal))}function Gp(r,e){if(r.match){if(r.begin||r.end)throw new Error("begin & end are not supported with match");r.begin=r.match,delete r.match}}function Bp(r,e){r.relevance===void 0&&(r.relevance=1)}const zp=(r,e)=>{if(!r.beforeMatch)return;if(r.starts)throw new Error("beforeMatch cannot be used with starts");const t=Object.assign({},r);Object.keys(r).forEach(s=>{delete r[s]}),r.keywords=t.keywords,r.begin=Yr(t.beforeMatch,au(t.begin)),r.starts={relevance:0,contains:[Object.assign(t,{endsParent:!0})]},r.relevance=0,delete t.beforeMatch},Hp=["of","and","for","in","not","or","if","then","parent","list","value"],qp="keyword";function hu(r,e,t=qp){const s=Object.create(null);return typeof r=="string"?n(t,r.split(" ")):Array.isArray(r)?n(t,r):Object.keys(r).forEach(function(i){Object.assign(s,hu(r[i],e,i))}),s;function n(i,a){e&&(a=a.map(o=>o.toLowerCase())),a.forEach(function(o){const l=o.split("|");s[l[0]]=[i,Vp(l[0],l[1])]})}}function Vp(r,e){return e?Number(e):Wp(r)?0:1}function Wp(r){return Hp.includes(r.toLowerCase())}const Tl={},Fr=r=>{console.error(r)},kl=(r,...e)=>{console.log(`WARN: ${r}`,...e)},rs=(r,e)=>{Tl[`${r}/${e}`]||(console.log(`Deprecated as of ${r}. ${e}`),Tl[`${r}/${e}`]=!0)},qn=new Error;function pu(r,e,{key:t}){let s=0;const n=r[t],i={},a={};for(let o=1;o<=e.length;o++)a[o+s]=n[o],i[o+s]=!0,s+=ou(e[o-1]);r[t]=a,r[t]._emit=i,r[t]._multi=!0}function Zp(r){if(Array.isArray(r.begin)){if(r.skip||r.excludeBegin||r.returnBegin)throw Fr("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),qn;if(typeof r.beginScope!="object"||r.beginScope===null)throw Fr("beginScope must be object"),qn;pu(r,r.begin,{key:"beginScope"}),r.begin=yo(r.begin,{joinWith:""})}}function Kp(r){if(Array.isArray(r.end)){if(r.skip||r.excludeEnd||r.returnEnd)throw Fr("skip, excludeEnd, returnEnd not compatible with endScope: {}"),qn;if(typeof r.endScope!="object"||r.endScope===null)throw Fr("endScope must be object"),qn;pu(r,r.end,{key:"endScope"}),r.end=yo(r.end,{joinWith:""})}}function Jp(r){r.scope&&typeof r.scope=="object"&&r.scope!==null&&(r.beginScope=r.scope,delete r.scope)}function Xp(r){Jp(r),typeof r.beginScope=="string"&&(r.beginScope={_wrap:r.beginScope}),typeof r.endScope=="string"&&(r.endScope={_wrap:r.endScope}),Zp(r),Kp(r)}function Qp(r){function e(a,o){return new RegExp(Xs(a),"m"+(r.case_insensitive?"i":"")+(r.unicodeRegex?"u":"")+(o?"g":""))}class t{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(o,l){l.position=this.position++,this.matchIndexes[this.matchAt]=l,this.regexes.push([l,o]),this.matchAt+=ou(o)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const o=this.regexes.map(l=>l[1]);this.matcherRe=e(yo(o,{joinWith:"|"}),!0),this.lastIndex=0}exec(o){this.matcherRe.lastIndex=this.lastIndex;const l=this.matcherRe.exec(o);if(!l)return null;const c=l.findIndex((d,h)=>h>0&&d!==void 0),u=this.matchIndexes[c];return l.splice(0,c),Object.assign(l,u)}}class s{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(o){if(this.multiRegexes[o])return this.multiRegexes[o];const l=new t;return this.rules.slice(o).forEach(([c,u])=>l.addRule(c,u)),l.compile(),this.multiRegexes[o]=l,l}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(o,l){this.rules.push([o,l]),l.type==="begin"&&this.count++}exec(o){const l=this.getMatcher(this.regexIndex);l.lastIndex=this.lastIndex;let c=l.exec(o);if(this.resumingScanAtSamePosition()&&!(c&&c.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,c=u.exec(o)}return c&&(this.regexIndex+=c.position+1,this.regexIndex===this.count&&this.considerAll()),c}}function n(a){const o=new s;return a.contains.forEach(l=>o.addRule(l.begin,{rule:l,type:"begin"})),a.terminatorEnd&&o.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&o.addRule(a.illegal,{type:"illegal"}),o}function i(a,o){const l=a;if(a.isCompiled)return l;[Mp,Gp,Xp,zp].forEach(u=>u(a,o)),r.compilerExtensions.forEach(u=>u(a,o)),a.__beforeBegin=null,[Fp,Up,Bp].forEach(u=>u(a,o)),a.isCompiled=!0;let c=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),c=a.keywords.$pattern,delete a.keywords.$pattern),c=c||/\w+/,a.keywords&&(a.keywords=hu(a.keywords,r.case_insensitive)),l.keywordPatternRe=e(c,!0),o&&(a.begin||(a.begin=/\B|\b/),l.beginRe=e(l.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(l.endRe=e(l.end)),l.terminatorEnd=Xs(l.end)||"",a.endsWithParent&&o.terminatorEnd&&(l.terminatorEnd+=(a.end?"|":"")+o.terminatorEnd)),a.illegal&&(l.illegalRe=e(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(u){return Yp(u==="self"?a:u)})),a.contains.forEach(function(u){i(u,l)}),a.starts&&i(a.starts,o),l.matcher=n(l),l}if(r.compilerExtensions||(r.compilerExtensions=[]),r.contains&&r.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return r.classNameAliases=Er(r.classNameAliases||{}),i(r)}function fu(r){return r?r.endsWithParent||fu(r.starts):!1}function Yp(r){return r.variants&&!r.cachedVariants&&(r.cachedVariants=r.variants.map(function(e){return Er(r,{variants:null},e)})),r.cachedVariants?r.cachedVariants:fu(r)?Er(r,{starts:r.starts?Er(r.starts):null}):Object.isFrozen(r)?Er(r):r}var ef="11.9.0";class tf extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const na=iu,Al=Er,Ol=Symbol("nomatch"),rf=7,mu=function(r){const e=Object.create(null),t=Object.create(null),s=[];let n=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let o={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:fp};function l(j){return o.noHighlightRe.test(j)}function c(j){let M=j.className+" ";M+=j.parentNode?j.parentNode.className:"";const V=o.languageDetectRe.exec(M);if(V){const Q=R(V[1]);return Q||(kl(i.replace("{}",V[1])),kl("Falling back to no-highlight mode for this block.",j)),Q?V[1]:"no-highlight"}return M.split(/\s+/).find(Q=>l(Q)||R(Q))}function u(j,M,V){let Q="",ce="";typeof M=="object"?(Q=j,V=M.ignoreIllegals,ce=M.language):(rs("10.7.0","highlight(lang, code, ...args) has been deprecated."),rs("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ce=j,Q=M),V===void 0&&(V=!0);const ve={code:Q,language:ce};re("before:highlight",ve);const ye=ve.result?ve.result:d(ve.language,ve.code,V);return ye.code=ve.code,re("after:highlight",ye),ye}function d(j,M,V,Q){const ce=Object.create(null);function ve(L,J){return L.keywords[J]}function ye(){if(!ie.keywords){Fe.addText(_e);return}let L=0;ie.keywordPatternRe.lastIndex=0;let J=ie.keywordPatternRe.exec(_e),ue="";for(;J;){ue+=_e.substring(L,J.index);const B=Ne.case_insensitive?J[0].toLowerCase():J[0],P=ve(ie,B);if(P){const[g,I]=P;if(Fe.addText(ue),ue="",ce[B]=(ce[B]||0)+1,ce[B]<=rf&&(_t+=I),g.startsWith("_"))ue+=J[0];else{const N=Ne.classNameAliases[g]||g;ze(J[0],N)}}else ue+=J[0];L=ie.keywordPatternRe.lastIndex,J=ie.keywordPatternRe.exec(_e)}ue+=_e.substring(L),Fe.addText(ue)}function Je(){if(_e==="")return;let L=null;if(typeof ie.subLanguage=="string"){if(!e[ie.subLanguage]){Fe.addText(_e);return}L=d(ie.subLanguage,_e,!0,Rt[ie.subLanguage]),Rt[ie.subLanguage]=L._top}else L=f(_e,ie.subLanguage.length?ie.subLanguage:null);ie.relevance>0&&(_t+=L.relevance),Fe.__addSublanguage(L._emitter,L.language)}function Se(){ie.subLanguage!=null?Je():ye(),_e=""}function ze(L,J){L!==""&&(Fe.startScope(J),Fe.addText(L),Fe.endScope())}function Me(L,J){let ue=1;const B=J.length-1;for(;ue<=B;){if(!L._emit[ue]){ue++;continue}const P=Ne.classNameAliases[L[ue]]||L[ue],g=J[ue];P?ze(g,P):(_e=g,ye(),_e=""),ue++}}function He(L,J){return L.scope&&typeof L.scope=="string"&&Fe.openNode(Ne.classNameAliases[L.scope]||L.scope),L.beginScope&&(L.beginScope._wrap?(ze(_e,Ne.classNameAliases[L.beginScope._wrap]||L.beginScope._wrap),_e=""):L.beginScope._multi&&(Me(L.beginScope,J),_e="")),ie=Object.create(L,{parent:{value:ie}}),ie}function Xe(L,J,ue){let B=_p(L.endRe,ue);if(B){if(L["on:end"]){const P=new wl(L);L["on:end"](J,P),P.isMatchIgnored&&(B=!1)}if(B){for(;L.endsParent&&L.parent;)L=L.parent;return L}}if(L.endsWithParent)return Xe(L.parent,J,ue)}function Pe(L){return ie.matcher.regexIndex===0?(_e+=L[0],1):(ct=!0,0)}function xe(L){const J=L[0],ue=L.rule,B=new wl(ue),P=[ue.__beforeBegin,ue["on:begin"]];for(const g of P)if(g&&(g(L,B),B.isMatchIgnored))return Pe(J);return ue.skip?_e+=J:(ue.excludeBegin&&(_e+=J),Se(),!ue.returnBegin&&!ue.excludeBegin&&(_e=J)),He(ue,L),ue.returnBegin?0:J.length}function rt(L){const J=L[0],ue=M.substring(L.index),B=Xe(ie,L,ue);if(!B)return Ol;const P=ie;ie.endScope&&ie.endScope._wrap?(Se(),ze(J,ie.endScope._wrap)):ie.endScope&&ie.endScope._multi?(Se(),Me(ie.endScope,L)):P.skip?_e+=J:(P.returnEnd||P.excludeEnd||(_e+=J),Se(),P.excludeEnd&&(_e=J));do ie.scope&&Fe.closeNode(),!ie.skip&&!ie.subLanguage&&(_t+=ie.relevance),ie=ie.parent;while(ie!==B.parent);return B.starts&&He(B.starts,L),P.returnEnd?0:J.length}function ot(){const L=[];for(let J=ie;J!==Ne;J=J.parent)J.scope&&L.unshift(J.scope);L.forEach(J=>Fe.openNode(J))}let Ot={};function bt(L,J){const ue=J&&J[0];if(_e+=L,ue==null)return Se(),0;if(Ot.type==="begin"&&J.type==="end"&&Ot.index===J.index&&ue===""){if(_e+=M.slice(J.index,J.index+1),!n){const B=new Error(`0 width match regex (${j})`);throw B.languageName=j,B.badRule=Ot.rule,B}return 1}if(Ot=J,J.type==="begin")return xe(J);if(J.type==="illegal"&&!V){const B=new Error('Illegal lexeme "'+ue+'" for mode "'+(ie.scope||"<unnamed>")+'"');throw B.mode=ie,B}else if(J.type==="end"){const B=rt(J);if(B!==Ol)return B}if(J.type==="illegal"&&ue==="")return 1;if(nr>1e5&&nr>J.index*3)throw new Error("potential infinite loop, way more iterations than matches");return _e+=ue,ue.length}const Ne=R(j);if(!Ne)throw Fr(i.replace("{}",j)),new Error('Unknown language: "'+j+'"');const lt=Qp(Ne);let Et="",ie=Q||lt;const Rt={},Fe=new o.__emitter(o);ot();let _e="",_t=0,Qe=0,nr=0,ct=!1;try{if(Ne.__emitTokens)Ne.__emitTokens(M,Fe);else{for(ie.matcher.considerAll();;){nr++,ct?ct=!1:ie.matcher.considerAll(),ie.matcher.lastIndex=Qe;const L=ie.matcher.exec(M);if(!L)break;const J=M.substring(Qe,L.index),ue=bt(J,L);Qe=L.index+ue}bt(M.substring(Qe))}return Fe.finalize(),Et=Fe.toHTML(),{language:j,value:Et,relevance:_t,illegal:!1,_emitter:Fe,_top:ie}}catch(L){if(L.message&&L.message.includes("Illegal"))return{language:j,value:na(M),illegal:!0,relevance:0,_illegalBy:{message:L.message,index:Qe,context:M.slice(Qe-100,Qe+100),mode:L.mode,resultSoFar:Et},_emitter:Fe};if(n)return{language:j,value:na(M),illegal:!1,relevance:0,errorRaised:L,_emitter:Fe,_top:ie};throw L}}function h(j){const M={value:na(j),illegal:!1,relevance:0,_top:a,_emitter:new o.__emitter(o)};return M._emitter.addText(j),M}function f(j,M){M=M||o.languages||Object.keys(e);const V=h(j),Q=M.filter(R).filter(z).map(Se=>d(Se,j,!1));Q.unshift(V);const ce=Q.sort((Se,ze)=>{if(Se.relevance!==ze.relevance)return ze.relevance-Se.relevance;if(Se.language&&ze.language){if(R(Se.language).supersetOf===ze.language)return 1;if(R(ze.language).supersetOf===Se.language)return-1}return 0}),[ve,ye]=ce,Je=ve;return Je.secondBest=ye,Je}function m(j,M,V){const Q=M&&t[M]||V;j.classList.add("hljs"),j.classList.add(`language-${Q}`)}function b(j){let M=null;const V=c(j);if(l(V))return;if(re("before:highlightElement",{el:j,language:V}),j.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",j);return}if(j.children.length>0&&(o.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(j)),o.throwUnescapedHTML))throw new tf("One of your code blocks includes unescaped HTML.",j.innerHTML);M=j;const Q=M.textContent,ce=V?u(Q,{language:V,ignoreIllegals:!0}):f(Q);j.innerHTML=ce.value,j.dataset.highlighted="yes",m(j,V,ce.language),j.result={language:ce.language,re:ce.relevance,relevance:ce.relevance},ce.secondBest&&(j.secondBest={language:ce.secondBest.language,relevance:ce.secondBest.relevance}),re("after:highlightElement",{el:j,result:ce,text:Q})}function _(j){o=Al(o,j)}const A=()=>{E(),rs("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function w(){E(),rs("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let T=!1;function E(){if(document.readyState==="loading"){T=!0;return}document.querySelectorAll(o.cssSelector).forEach(b)}function k(){T&&E()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",k,!1);function x(j,M){let V=null;try{V=M(r)}catch(Q){if(Fr("Language definition for '{}' could not be registered.".replace("{}",j)),n)Fr(Q);else throw Q;V=a}V.name||(V.name=j),e[j]=V,V.rawDefinition=M.bind(null,r),V.aliases&&F(V.aliases,{languageName:j})}function C(j){delete e[j];for(const M of Object.keys(t))t[M]===j&&delete t[M]}function H(){return Object.keys(e)}function R(j){return j=(j||"").toLowerCase(),e[j]||e[t[j]]}function F(j,{languageName:M}){typeof j=="string"&&(j=[j]),j.forEach(V=>{t[V.toLowerCase()]=M})}function z(j){const M=R(j);return M&&!M.disableAutodetect}function X(j){j["before:highlightBlock"]&&!j["before:highlightElement"]&&(j["before:highlightElement"]=M=>{j["before:highlightBlock"](Object.assign({block:M.el},M))}),j["after:highlightBlock"]&&!j["after:highlightElement"]&&(j["after:highlightElement"]=M=>{j["after:highlightBlock"](Object.assign({block:M.el},M))})}function te(j){X(j),s.push(j)}function oe(j){const M=s.indexOf(j);M!==-1&&s.splice(M,1)}function re(j,M){const V=j;s.forEach(function(Q){Q[V]&&Q[V](M)})}function Oe(j){return rs("10.7.0","highlightBlock will be removed entirely in v12.0"),rs("10.7.0","Please use highlightElement now."),b(j)}Object.assign(r,{highlight:u,highlightAuto:f,highlightAll:E,highlightElement:b,highlightBlock:Oe,configure:_,initHighlighting:A,initHighlightingOnLoad:w,registerLanguage:x,unregisterLanguage:C,listLanguages:H,getLanguage:R,registerAliases:F,autoDetection:z,inherit:Al,addPlugin:te,removePlugin:oe}),r.debugMode=function(){n=!1},r.safeMode=function(){n=!0},r.versionString=ef,r.regex={concat:Yr,lookahead:au,either:_o,optional:gp,anyNumberOfTimes:mp};for(const j in Pn)typeof Pn[j]=="object"&&nu(Pn[j]);return Object.assign(r,Pn),r},Os=mu({});Os.newInstance=()=>mu({});var sf=Os;Os.HighlightJS=Os;Os.default=Os;const Gt=Qr(sf),nf=r=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:r.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:r.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),af=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],of=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],lf=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],cf=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],uf=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function df(r){const e=r.regex,t=nf(r),s={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n="and or not only",i=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",o=[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[t.BLOCK_COMMENT,s,t.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+lf.join("|")+")"},{begin:":(:)?("+cf.join("|")+")"}]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+uf.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[t.BLOCK_COMMENT,t.HEXCOLOR,t.IMPORTANT,t.CSS_NUMBER_MODE,...o,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...o,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},t.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:n,attribute:of.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...o,t.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+af.join("|")+")\\b"}]}}function hf(r){const e=r.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),s=/[\p{L}0-9._:-]+/u,n={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=r.inherit(i,{begin:/\(/,end:/\)/}),o=r.inherit(r.APOS_STRING_MODE,{className:"string"}),l=r.inherit(r.QUOTE_STRING_MODE,{className:"string"}),c={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:s,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[n]},{begin:/'/,end:/'/,contains:[n]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,l,o,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,a,l,o]}]}]},r.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},n,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[l]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[c],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[c],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:c}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const Sl="[A-Za-z$_][0-9A-Za-z$_]*",pf=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],ff=["true","false","null","undefined","NaN","Infinity"],gu=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bu=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],_u=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],mf=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],gf=[].concat(_u,gu,bu);function vo(r){const e=r.regex,t=(M,{after:V})=>{const Q="</"+M[0].slice(1);return M.input.indexOf(Q,V)!==-1},s=Sl,n={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(M,V)=>{const Q=M[0].length+M.index,ce=M.input[Q];if(ce==="<"||ce===","){V.ignoreMatch();return}ce===">"&&(t(M,{after:Q})||V.ignoreMatch());let ve;const ye=M.input.substring(Q);if(ve=ye.match(/^\s*=/)){V.ignoreMatch();return}if((ve=ye.match(/^\s+extends\s+/))&&ve.index===0){V.ignoreMatch();return}}},o={$pattern:Sl,keyword:pf,literal:ff,built_in:gf,"variable.language":mf},l="[0-9](_?[0-9])*",c=`\\.(${l})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${c})|\\.)?|(${c}))[eE][+-]?(${l})\\b`},{begin:`\\b(${u})\\b((${c})\\b|\\.)?|(${c})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},h={className:"subst",begin:"\\$\\{",end:"\\}",keywords:o,contains:[]},f={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,h],subLanguage:"xml"}},m={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,h],subLanguage:"css"}},b={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[r.BACKSLASH_ESCAPE,h],subLanguage:"graphql"}},_={className:"string",begin:"`",end:"`",contains:[r.BACKSLASH_ESCAPE,h]},w={className:"comment",variants:[r.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:s+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),r.C_BLOCK_COMMENT_MODE,r.C_LINE_COMMENT_MODE]},T=[r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,m,b,_,{match:/\$\d+/},d];h.contains=T.concat({begin:/\{/,end:/\}/,keywords:o,contains:["self"].concat(T)});const E=[].concat(w,h.contains),k=E.concat([{begin:/\(/,end:/\)/,keywords:o,contains:["self"].concat(E)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:k},C={variants:[{match:[/class/,/\s+/,s,/\s+/,/extends/,/\s+/,e.concat(s,"(",e.concat(/\./,s),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,s],scope:{1:"keyword",3:"title.class"}}]},H={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...gu,...bu]}},R={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},F={variants:[{match:[/function/,/\s+/,s,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},z={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function X(M){return e.concat("(?!",M.join("|"),")")}const te={match:e.concat(/\b/,X([..._u,"super","import"]),s,e.lookahead(/\(/)),className:"title.function",relevance:0},oe={begin:e.concat(/\./,e.lookahead(e.concat(s,/(?![0-9A-Za-z$_(])/))),end:s,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},re={match:[/get|set/,/\s+/,s,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},Oe="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+r.UNDERSCORE_IDENT_RE+")\\s*=>",j={match:[/const|var|let/,/\s+/,s,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(Oe)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:o,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:H},illegal:/#(?![$_A-z])/,contains:[r.SHEBANG({label:"shebang",binary:"node",relevance:5}),R,r.APOS_STRING_MODE,r.QUOTE_STRING_MODE,f,m,b,_,w,{match:/\$\d+/},d,H,{className:"attr",begin:s+e.lookahead(":"),relevance:0},j,{begin:"("+r.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[w,r.REGEXP_MODE,{className:"function",begin:Oe,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:r.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:o,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:n.begin,end:n.end},{match:i},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},F,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+r.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,r.inherit(r.TITLE_MODE,{begin:s,className:"title.function"})]},{match:/\.\.\./,relevance:0},oe,{match:"\\$"+s,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},te,z,C,re,{match:/\$[(.]/}]}}function Eo(r){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}function Pl(r,e,t){const s=r.slice();return s[13]=e[t],s}function xl(r){let e,t='<p data-onlook-id="src/routes/dashboard/projects/[id]/Activities.svelte:93:93:93" class="text-gray-500">No activities yet</p>';return{c(){e=O("div"),e.innerHTML=t,this.h()},l(s){e=S(s,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1cdh26d"&&(e.innerHTML=t),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:92:92:94"),p(e,"class","flex flex-col items-center justify-center h-full")},m(s,n){K(s,e,n)},d(s){s&&v(e)}}}function Cl(r){let e,t,s,n,i,a;s=new yn({props:{class:"w-4 h-4"}});function o(){return r[6](r[13])}return{c(){e=O("div"),t=O("button"),Ee(s.$$.fragment),this.h()},l(l){e=S(l,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var c=$(e);t=S(c,"BUTTON",{"data-onlook-id":!0,class:!0});var u=$(t);Te(s.$$.fragment,u),u.forEach(v),c.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:133:145:147"),p(t,"class","btn btn-xs btn-square btn-ghost ml-auto"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:132:132:148"),p(e,"class","tooltip tooltip-left"),p(e,"data-tip","View in GitHub")},m(l,c){K(l,e,c),y(e,t),ke(s,t,null),n=!0,i||(a=Ue(t,"click",o),i=!0)},p(l,c){r=l},i(l){n||(ee(s.$$.fragment,l),n=!0)},o(l){ae(s.$$.fragment,l),n=!1},d(l){l&&v(e),Ae(s),i=!1,a()}}}function bf(r){let e,t,s,n,i,a,o,l,c="Delete activity?",u,d,h="Deleted activities can NOT be restored. Continue?",f,m,b,_="Cancel",A,w,T="Delete",E,k,x='<button data-onlook-id="src/routes/dashboard/projects/[id]/Activities.svelte:176:176:176">close</button>',C,H,R,F,z=r[0]?.githubSettings&&r[13]?.path&&Cl(r);n=new tp({});function X(){return r[7](r[13])}function te(){return r[8](r[13])}function oe(){return r[9](r[13])}return{c(){z&&z.c(),e=U(),t=O("div"),s=O("button"),Ee(n.$$.fragment),i=U(),a=O("dialog"),o=O("div"),l=O("h3"),l.textContent=c,u=U(),d=O("p"),d.textContent=h,f=U(),m=O("div"),b=O("button"),b.textContent=_,A=U(),w=O("button"),w.textContent=T,E=U(),k=O("form"),k.innerHTML=x,this.h()},l(re){z&&z.l(re),e=G(re),t=S(re,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var Oe=$(t);s=S(Oe,"BUTTON",{"data-onlook-id":!0,class:!0});var j=$(s);Te(n.$$.fragment,j),j.forEach(v),i=G(Oe),a=S(Oe,"DIALOG",{"data-onlook-id":!0,id:!0,class:!0});var M=$(a);o=S(M,"DIV",{"data-onlook-id":!0,class:!0});var V=$(o);l=S(V,"H3",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(l)!=="svelte-jksx9s"&&(l.textContent=c),u=G(V),d=S(V,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(d)!=="svelte-1q13u8q"&&(d.textContent=h),f=G(V),m=S(V,"DIV",{"data-onlook-id":!0,class:!0});var Q=$(m);b=S(Q,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(b)!=="svelte-pp27l5"&&(b.textContent=_),A=G(Q),w=S(Q,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(w)!=="svelte-ux4gip"&&(w.textContent=T),Q.forEach(v),V.forEach(v),E=G(M),k=S(M,"FORM",{"data-onlook-id":!0,method:!0,class:!0,"data-svelte-h":!0}),de(k)!=="svelte-1de14uc"&&(k.innerHTML=x),M.forEach(v),Oe.forEach(v),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:151:156:158"),p(s,"class","btn btn-sm btn-square btn-ghost"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:161:161:161"),p(l,"class","font-bold text-lg"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:162:162:162"),p(d,"class","py-4"),p(b,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:164:168:169"),p(b,"class","btn"),p(w,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:170:171:172"),p(w,"class","btn btn-error"),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:163:163:173"),p(m,"class","modal-action space-x-2"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:160:160:174"),p(o,"class","modal-box"),p(k,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:175:175:177"),p(k,"method","dialog"),p(k,"class","modal-backdrop"),p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:159:159:178"),p(a,"id",C=r[13].id),p(a,"class","modal"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:150:150:179"),p(t,"class","tooltip tooltip-left"),p(t,"data-tip","Delete activity")},m(re,Oe){z&&z.m(re,Oe),K(re,e,Oe),K(re,t,Oe),y(t,s),ke(n,s,null),y(t,i),y(t,a),y(a,o),y(o,l),y(o,u),y(o,d),y(o,f),y(o,m),y(m,b),y(m,A),y(m,w),y(a,E),y(a,k),H=!0,R||(F=[Ue(s,"click",X),Ue(b,"click",te),Ue(w,"click",oe)],R=!0)},p(re,Oe){r=re,r[0]?.githubSettings&&r[13]?.path?z?(z.p(r,Oe),Oe&5&&ee(z,1)):(z=Cl(r),z.c(),ee(z,1),z.m(e.parentNode,e)):z&&(Pt(),ae(z,1,1,()=>{z=null}),xt()),(!H||Oe&4&&C!==(C=r[13].id))&&p(a,"id",C)},i(re){H||(ee(z),ee(n.$$.fragment,re),H=!0)},o(re){ae(z),ae(n.$$.fragment,re),H=!1},d(re){re&&(v(e),v(t)),z&&z.d(re),Ae(n),R=!1,Xr(F)}}}function Rl(r){let e,t="Path:",s,n,i=r[13].path+"",a;return{c(){e=O("p"),e.textContent=t,s=U(),n=O("span"),a=Le(i),this.h()},l(o){e=S(o,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-1au4a4u"&&(e.textContent=t),s=G(o),n=S(o,"SPAN",{"data-onlook-id":!0,class:!0});var l=$(n);a=De(l,i),l.forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:188:188:188"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:189:189:189"),p(n,"class","text-orange-600 bg-gray-50 p-2 rounded border")},m(o,l){K(o,e,l),K(o,s,l),K(o,n,l),y(n,a)},p(o,l){l&4&&i!==(i=o[13].path+"")&&mt(a,i)},d(o){o&&(v(e),v(s),v(n))}}}function Il(r){let e,t="Code Change:",s,n,i;return n=new qr({props:{class:"bg-gray-50 rounded p-1 border w-full text-start flex flex-col overflow-auto ",language:"css",code:r[5](r[13].styleChanges),color:"text-gray-800",text:"text-sm"}}),{c(){e=O("p"),e.textContent=t,s=U(),Ee(n.$$.fragment),this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-q16a0g"&&(e.textContent=t),s=G(a),Te(n.$$.fragment,a),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:193:193:193")},m(a,o){K(a,e,o),K(a,s,o),ke(n,a,o),i=!0},p(a,o){const l={};o&4&&(l.code=a[5](a[13].styleChanges)),n.$set(l)},i(a){i||(ee(n.$$.fragment,a),i=!0)},o(a){ae(n.$$.fragment,a),i=!1},d(a){a&&(v(e),v(s)),Ae(n,a)}}}function jl(r){let e,t="Text Change:",s,n,i;return{c(){e=O("p"),e.textContent=t,s=U(),n=O("textarea"),this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-1e8qynl"&&(e.textContent=t),s=G(a),n=S(a,"TEXTAREA",{"data-onlook-id":!0,class:!0}),$(n).forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:204:204:204"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:205:209:209"),n.disabled=!0,p(n,"class","bg-gray-50 rounded p-4 border w-full text-start flex flex-col overflow-auto text-gray-800 text-sm"),n.value=i=r[13].textChanges.text?.newVal??""},m(a,o){K(a,e,o),K(a,s,o),K(a,n,o)},p(a,o){o&4&&i!==(i=a[13].textChanges.text?.newVal??"")&&(n.value=i)},d(a){a&&(v(e),v(s),v(n))}}}function Nl(r){let e,t="Inserted component:",s,n,i;return n=new qr({props:{class:"text-sm bg-gray-50 rounded p-1 border w-[23rem] text-start overflow-scroll",language:"html",code:r[13].insertChanges.childContent.newVal??"",color:"text-gray-800",text:"text-sm",button:"btn btn-xs ml-auto rounded-sm"}}),{c(){e=O("p"),e.textContent=t,s=U(),Ee(n.$$.fragment),this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-y3pz5d"&&(e.textContent=t),s=G(a),Te(n.$$.fragment,a),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:213:213:213")},m(a,o){K(a,e,o),K(a,s,o),ke(n,a,o),i=!0},p(a,o){const l={};o&4&&(l.code=a[13].insertChanges.childContent.newVal??""),n.$set(l)},i(a){i||(ee(n.$$.fragment,a),i=!0)},o(a){ae(n.$$.fragment,a),i=!1},d(a){a&&(v(e),v(s)),Ae(n,a)}}}function $l(r){let e,t="Removed component:",s,n,i;return n=new qr({props:{class:"bg-gray-50 rounded p-1 border w-full text-start flex flex-col overflow-auto",language:"css",code:r[5](r[13].removeChanges),color:"text-gray-800",text:"text-sm"}}),{c(){e=O("p"),e.textContent=t,s=U(),Ee(n.$$.fragment),this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-1d5vf6w"&&(e.textContent=t),s=G(a),Te(n.$$.fragment,a),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:225:225:225")},m(a,o){K(a,e,o),K(a,s,o),ke(n,a,o),i=!0},p(a,o){const l={};o&4&&(l.code=a[5](a[13].removeChanges)),n.$set(l)},i(a){i||(ee(n.$$.fragment,a),i=!0)},o(a){ae(n.$$.fragment,a),i=!1},d(a){a&&(v(e),v(s)),Ae(n,a)}}}function Ll(r){let e,t="Preview image:",s,n,i;return{c(){e=O("p"),e.textContent=t,s=U(),n=O("img"),this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(e)!=="svelte-16j9m9m"&&(e.textContent=t),s=G(a),n=S(a,"IMG",{"data-onlook-id":!0,src:!0,alt:!0,class:!0}),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:236:236:236"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:237:237:237"),kr(n.src,i=r[13].previewImage)||p(n,"src",i),p(n,"alt","Preview"),p(n,"class","w-full rounded border")},m(a,o){K(a,e,o),K(a,s,o),K(a,n,o)},p(a,o){o&4&&!kr(n.src,i=a[13].previewImage)&&p(n,"src",i)},d(a){a&&(v(e),v(s),v(n))}}}function Dl(r){let e,t,s,n,i,a="Selector:",o,l,c=r[13].selector+"",u,d,h,f=r[13].styleChanges&&Object.keys(r[13].styleChanges).length>0,m,b=r[13].textChanges&&Object.keys(r[13].textChanges).length>0,_,A=r[13].insertChanges&&Object.keys(r[13].insertChanges).length>0,w,T=r[13].removeChanges&&Object.keys(r[13].removeChanges).length>0,E,k,x,C,H,R;t=new Qh({props:{profileImageUrl:r[3].get(r[13].userId)?.profileImage,userName:r[3].get(r[13].userId)?.name,createdAt:r[13].updatedAt??r[13].createdAt,$$slots:{default:[bf]},$$scope:{ctx:r}}});let F=r[13].path&&Rl(r),z=f&&Il(r),X=b&&jl(r),te=A&&Nl(r),oe=T&&$l(r),re=r[13].previewImage&&Ll(r);function Oe(){return r[10](r[13])}return{c(){e=O("div"),Ee(t.$$.fragment),s=U(),n=O("div"),i=O("p"),i.textContent=a,o=U(),l=O("span"),u=Le(c),d=U(),F&&F.c(),h=U(),z&&z.c(),m=U(),X&&X.c(),_=U(),te&&te.c(),w=U(),oe&&oe.c(),E=U(),re&&re.c(),k=U(),this.h()},l(j){e=S(j,"DIV",{"data-onlook-id":!0,class:!0});var M=$(e);Te(t.$$.fragment,M),s=G(M),n=S(M,"DIV",{"data-onlook-id":!0,class:!0});var V=$(n);i=S(V,"P",{"data-onlook-id":!0,"data-svelte-h":!0}),de(i)!=="svelte-1cfn538"&&(i.textContent=a),o=G(V),l=S(V,"SPAN",{"data-onlook-id":!0,class:!0});var Q=$(l);u=De(Q,c),Q.forEach(v),d=G(V),F&&F.l(V),h=G(V),z&&z.l(V),m=G(V),X&&X.l(V),_=G(V),te&&te.l(V),w=G(V),oe&&oe.l(V),E=G(V),re&&re.l(V),V.forEach(v),k=G(M),M.forEach(v),this.h()},h(){p(i,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:184:184:184"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:185:185:185"),p(l,"class","text-orange-600 bg-gray-50 p-2 rounded border"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:183:183:239"),p(n,"class","flex flex-col space-y-3 w-full"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:101:124:240"),p(e,"class",x="w-full p-4 flex flex-col pb-6 transition duration-200 ease-in-out "+(r[1]==r[13].id?"bg-sky-100 shadow-lg":""))},m(j,M){K(j,e,M),ke(t,e,null),y(e,s),y(e,n),y(n,i),y(n,o),y(n,l),y(l,u),y(n,d),F&&F.m(n,null),y(n,h),z&&z.m(n,null),y(n,m),X&&X.m(n,null),y(n,_),te&&te.m(n,null),y(n,w),oe&&oe.m(n,null),y(n,E),re&&re.m(n,null),y(e,k),C=!0,H||(R=Ue(e,"click",Oe),H=!0)},p(j,M){r=j;const V={};M&12&&(V.profileImageUrl=r[3].get(r[13].userId)?.profileImage),M&12&&(V.userName=r[3].get(r[13].userId)?.name),M&4&&(V.createdAt=r[13].updatedAt??r[13].createdAt),M&65541&&(V.$$scope={dirty:M,ctx:r}),t.$set(V),(!C||M&4)&&c!==(c=r[13].selector+"")&&mt(u,c),r[13].path?F?F.p(r,M):(F=Rl(r),F.c(),F.m(n,h)):F&&(F.d(1),F=null),M&4&&(f=r[13].styleChanges&&Object.keys(r[13].styleChanges).length>0),f?z?(z.p(r,M),M&4&&ee(z,1)):(z=Il(r),z.c(),ee(z,1),z.m(n,m)):z&&(Pt(),ae(z,1,1,()=>{z=null}),xt()),M&4&&(b=r[13].textChanges&&Object.keys(r[13].textChanges).length>0),b?X?X.p(r,M):(X=jl(r),X.c(),X.m(n,_)):X&&(X.d(1),X=null),M&4&&(A=r[13].insertChanges&&Object.keys(r[13].insertChanges).length>0),A?te?(te.p(r,M),M&4&&ee(te,1)):(te=Nl(r),te.c(),ee(te,1),te.m(n,w)):te&&(Pt(),ae(te,1,1,()=>{te=null}),xt()),M&4&&(T=r[13].removeChanges&&Object.keys(r[13].removeChanges).length>0),T?oe?(oe.p(r,M),M&4&&ee(oe,1)):(oe=$l(r),oe.c(),ee(oe,1),oe.m(n,E)):oe&&(Pt(),ae(oe,1,1,()=>{oe=null}),xt()),r[13].previewImage?re?re.p(r,M):(re=Ll(r),re.c(),re.m(n,null)):re&&(re.d(1),re=null),(!C||M&6&&x!==(x="w-full p-4 flex flex-col pb-6 transition duration-200 ease-in-out "+(r[1]==r[13].id?"bg-sky-100 shadow-lg":"")))&&p(e,"class",x)},i(j){C||(ee(t.$$.fragment,j),ee(z),ee(te),ee(oe),C=!0)},o(j){ae(t.$$.fragment,j),ae(z),ae(te),ae(oe),C=!1},d(j){j&&v(e),Ae(t),F&&F.d(),z&&z.d(),X&&X.d(),te&&te.d(),oe&&oe.d(),re&&re.d(),H=!1,R()}}}function _f(r){let e,t,s,n="Activities",i,a,o=r[2].length===0&&xl(),l=As(r[2]),c=[];for(let d=0;d<l.length;d+=1)c[d]=Dl(Pl(r,l,d));const u=d=>ae(c[d],1,1,()=>{c[d]=null});return{c(){o&&o.c(),e=U(),t=O("div"),s=O("h1"),s.textContent=n,i=U();for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){o&&o.l(d),e=G(d),t=S(d,"DIV",{"data-onlook-id":!0,class:!0});var h=$(t);s=S(h,"H1",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(s)!=="svelte-173axxx"&&(s.textContent=n),i=G(h);for(let f=0;f<c.length;f+=1)c[f].l(h);h.forEach(v),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:97:97:97"),p(s,"class","m-2 font-semibold"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/Activities.svelte:96:96:242"),p(t,"class","divide-y flex flex-col w-full")},m(d,h){o&&o.m(d,h),K(d,e,h),K(d,t,h),y(t,s),y(t,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(t,null);a=!0},p(d,[h]){if(d[2].length===0?o||(o=xl(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),h&63){l=As(d[2]);let f;for(f=0;f<l.length;f+=1){const m=Pl(d,l,f);c[f]?(c[f].p(m,h),ee(c[f],1)):(c[f]=Dl(m),c[f].c(),ee(c[f],1),c[f].m(t,null))}for(Pt(),f=l.length;f<c.length;f+=1)u(f);xt()}},i(d){if(!a){for(let h=0;h<l.length;h+=1)ee(c[h]);a=!0}},o(d){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)ae(c[h]);a=!1},d(d){d&&(v(e),v(t)),o&&o.d(d),fo(c,d)}}}function yf(r){const e=document.getElementById(r);e&&(e.showModal(),e.addEventListener("click",t=>{t.target===e&&Ca(r)},{once:!0}))}function Ca(r){const e=document.getElementById(r);e&&e.close()}function wf(r,e,t){let s,n;er(r,mo,_=>t(11,s=_)),er(r,Js,_=>t(3,n=_));let{project:i}=e,{activeActivityId:a}=e,o;const l=new Sr(Ar.PROJECTS);Ir(()=>{t(1,a=s.url.searchParams.get(zn.ACTIVITY)??""),$i.set(Gt),Gt.registerLanguage("css",df),Gt.registerLanguage("javascript",vo),Gt.registerLanguage("shell",Eo),Gt.registerLanguage("html",hf)});function c(_,A){t(0,i.activities=Object.fromEntries(Object.entries(i.activities).filter(([w,T])=>T.id!==_.id)),i),l.post(i),Hr.update(w=>(w.set(i.id,i),w)),t(0,i={...i}),Ca(A)}function u(_){return Object.values(_).map(({key:A,newVal:w})=>`${Wh(A)}: ${w};`).join(`
`)}const d=_=>window.open(`https://github.com/${i?.githubSettings?.owner}/${i?.githubSettings?.repositoryName}/blob/${i?.githubSettings?.baseBranch}/${i?.githubSettings?.rootPath?`${i?.githubSettings?.rootPath}/`:""}${_?.path?.split(":")[0]}#L${_?.path?.split(":")[1]}`,"_blank"),h=_=>{yf(_.id)},f=_=>{Ca(_.id)},m=_=>c(_,_.id),b=_=>{a===_.id?(t(1,a=""),Ks(`${Or.PROJECTS}/${i.id}`,{replaceState:!0})):(t(1,a=_.id),Ks(`${Or.PROJECTS}/${i.id}?${zn.ACTIVITY}=`+_.id,{replaceState:!0}))};return r.$$set=_=>{"project"in _&&t(0,i=_.project),"activeActivityId"in _&&t(1,a=_.activeActivityId)},r.$$.update=()=>{r.$$.dirty&1&&t(2,o=Object.values(i.activities).sort((_,A)=>new Date(A.updatedAt??A.createdAt).getTime()-new Date(_.updatedAt??_.createdAt).getTime()))},[i,a,o,n,c,u,d,h,f,m,b]}class vf extends Ze{constructor(e){super(),Ke(this,e,wf,_f,We,{project:0,activeActivityId:1})}}function Ef(r){let e,t,s='<path fill="currentColor" d="M19 21H8V7h11m0-2H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2m-3-4H4a2 2 0 0 0-2 2v14h2V3h12z"/>',n=[{"data-onlook-id":"~icons/mdi/content-copy.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/mdi/content-copy.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Tf(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class kf extends Ze{constructor(e){super(),Ke(this,e,Tf,Ef,We,{})}}function Af(r){let e,t,s='<path fill="currentColor" fill-rule="evenodd" d="M16.5 2.25a3.25 3.25 0 0 0-3.2 3.824L8.57 9.386a.757.757 0 0 0-.068.053a3.25 3.25 0 1 0 0 5.121a.755.755 0 0 0 .068.054l4.73 3.312a3.25 3.25 0 1 0 .617-1.4l-4.479-3.135c.2-.422.312-.893.312-1.391s-.112-.97-.312-1.391l4.48-3.136A3.25 3.25 0 1 0 16.5 2.25M14.75 5.5a1.75 1.75 0 1 1 3.5 0a1.75 1.75 0 0 1-3.5 0M6.5 10.25a1.75 1.75 0 1 0 0 3.5a1.75 1.75 0 0 0 0-3.5m10 6.5a1.75 1.75 0 1 0 0 3.5a1.75 1.75 0 0 0 0-3.5" clip-rule="evenodd"/>',n=[{"data-onlook-id":"~icons/solar/share-outline.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/solar/share-outline.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Of(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class Sf extends Ze{constructor(e){super(),Ke(this,e,Of,Af,We,{})}}function Pf(r){let e,t,s,n,i,a,o,l,c="Share project",u,d,h,f,m="Copy link to share project",b,_,A,w='<span data-onlook-id="src/routes/dashboard/projects/[id]/ShareModal.svelte:115:115:115" class="label-text">Anyone with the link can access this project</span>',T,E,k='<button data-onlook-id="src/routes/dashboard/projects/[id]/ShareModal.svelte:119:119:119">close</button>',x,C,H;return s=new Sf({props:{class:"h-4 w-4 mr-2"}}),b=new kf({props:{class:"w-5 h-5"}}),{c(){e=O("div"),t=O("button"),Ee(s.$$.fragment),n=Le(" Share project"),i=U(),a=O("dialog"),o=O("div"),l=O("h2"),l.textContent=c,u=U(),d=O("div"),h=O("button"),f=O("span"),f.textContent=m,Ee(b.$$.fragment),_=U(),A=O("label"),A.innerHTML=w,T=U(),E=O("form"),E.innerHTML=k,this.h()},l(R){e=S(R,"DIV",{"data-onlook-id":!0});var F=$(e);t=S(F,"BUTTON",{"data-onlook-id":!0,class:!0});var z=$(t);Te(s.$$.fragment,z),n=De(z," Share project"),z.forEach(v),i=G(F),a=S(F,"DIALOG",{"data-onlook-id":!0,id:!0,class:!0});var X=$(a);o=S(X,"DIV",{"data-onlook-id":!0,class:!0});var te=$(o);l=S(te,"H2",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(l)!=="svelte-1ov0xe6"&&(l.textContent=c),u=G(te),d=S(te,"DIV",{"data-onlook-id":!0,class:!0});var oe=$(d);h=S(oe,"BUTTON",{"data-onlook-id":!0,class:!0});var re=$(h);f=S(re,"SPAN",{"data-onlook-id":!0,"data-svelte-h":!0}),de(f)!=="svelte-1094cz5"&&(f.textContent=m),Te(b.$$.fragment,re),re.forEach(v),oe.forEach(v),_=G(te),A=S(te,"LABEL",{"data-onlook-id":!0,for:!0,class:!0,"data-svelte-h":!0}),de(A)!=="svelte-10kmr4w"&&(A.innerHTML=w),te.forEach(v),T=G(X),E=S(X,"FORM",{"data-onlook-id":!0,method:!0,class:!0,"data-svelte-h":!0}),de(E)!=="svelte-1d1aejf"&&(E.innerHTML=k),X.forEach(v),F.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:89:89:91"),p(t,"class","flex flex-row justify-center"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:95:95:95"),p(l,"class","font-bold text-lg"),p(f,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:110:110:110"),p(h,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:98:109:111"),p(h,"class","modal-action btn btn-outline mb-2"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:97:97:112"),p(d,"class","flex flex-row space-x-2"),p(A,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:114:114:116"),p(A,"for","access-input"),p(A,"class","label cursor-pointer"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:94:94:117"),p(o,"class","modal-box w-2/3 min-w-96"),p(E,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:118:118:120"),p(E,"method","dialog"),p(E,"class","modal-backdrop"),p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:93:93:121"),p(a,"id",To),p(a,"class","modal svelte-zbk6y"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/ShareModal.svelte:88:88:122")},m(R,F){K(R,e,F),y(e,t),ke(s,t,null),y(t,n),y(e,i),y(e,a),y(a,o),y(o,l),y(o,u),y(o,d),y(d,h),y(h,f),ke(b,h,null),y(o,_),y(o,A),y(a,T),y(a,E),x=!0,C||(H=[Ue(t,"click",xf),Ue(h,"click",r[1])],C=!0)},p:he,i(R){x||(ee(s.$$.fragment,R),ee(b.$$.fragment,R),x=!0)},o(R){ae(s.$$.fragment,R),ae(b.$$.fragment,R),x=!1},d(R){R&&v(e),Ae(s),Ae(b),C=!1,Xr(H)}}}const To="share-modal";function xf(){const r=document.getElementById(To);r&&(r.showModal(),r.addEventListener("click",e=>{e.target===r&&yu()},{once:!0}))}function yu(){const r=document.getElementById(To);r&&r.close()}function Cf(r,e,t){let s,n;er(r,Js,h=>t(4,s=h)),er(r,fl,h=>t(5,n=h));let{teamId:i}=e;const a=new Sr(Ar.USERS),o=new Sr(Ar.TEAMS);let l,c=[];Ir(async()=>{if(l=n.get(i),!l){const h=await o.get(i);h&&(l=h,fl.update(f=>f.set(i,h)))}Object.entries(l?.users??{}).forEach(async([h,f])=>{const m=await u(h);m&&(c=[...c,{userId:h,role:f,userName:m.name,profileImageUrl:m.profileImage}])})});async function u(h){let f=s.get(h);if(!f){const m=await a.get(h);m&&(f=m,Js.update(b=>b.set(h,m)))}return f}const d=async()=>{try{await navigator.clipboard.writeText(window.location.href),yu(),xa.push("Link copied to clipboard")}catch(h){xa.push("Failed to copy text: "+h)}};return r.$$set=h=>{"teamId"in h&&t(0,i=h.teamId)},[i,d]}class Rf extends Ze{constructor(e){super(),Ke(this,e,Cf,Pf,We,{teamId:0})}}function If(r){let e,t,s='<path fill="#de1c59" d="M27.255 80.719c0 7.33-5.978 13.317-13.309 13.317C6.616 94.036.63 88.049.63 80.719s5.987-13.317 13.317-13.317h13.309zm6.709 0c0-7.33 5.987-13.317 13.317-13.317s13.317 5.986 13.317 13.317v33.335c0 7.33-5.986 13.317-13.317 13.317c-7.33 0-13.317-5.987-13.317-13.317zm0 0"/><path fill="#35c5f0" d="M47.281 27.255c-7.33 0-13.317-5.978-13.317-13.309C33.964 6.616 39.951.63 47.281.63s13.317 5.987 13.317 13.317v13.309zm0 6.709c7.33 0 13.317 5.987 13.317 13.317s-5.986 13.317-13.317 13.317H13.946C6.616 60.598.63 54.612.63 47.281c0-7.33 5.987-13.317 13.317-13.317zm0 0"/><path fill="#2eb57d" d="M100.745 47.281c0-7.33 5.978-13.317 13.309-13.317c7.33 0 13.317 5.987 13.317 13.317s-5.987 13.317-13.317 13.317h-13.309zm-6.709 0c0 7.33-5.987 13.317-13.317 13.317s-13.317-5.986-13.317-13.317V13.946C67.402 6.616 73.388.63 80.719.63c7.33 0 13.317 5.987 13.317 13.317zm0 0"/><path fill="#ebb02e" d="M80.719 100.745c7.33 0 13.317 5.978 13.317 13.309c0 7.33-5.987 13.317-13.317 13.317s-13.317-5.987-13.317-13.317v-13.309zm0-6.709c-7.33 0-13.317-5.987-13.317-13.317s5.986-13.317 13.317-13.317h33.335c7.33 0 13.317 5.986 13.317 13.317c0 7.33-5.987 13.317-13.317 13.317zm0 0"/>',n=[{"data-onlook-id":"~icons/devicon/slack.svelte:1:1:1"},{viewBox:"0 0 128 128"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/devicon/slack.svelte:1:1:1"},{viewBox:"0 0 128 128"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function jf(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class Nf extends Ze{constructor(e){super(),Ke(this,e,jf,If,We,{})}}function $f(r){let e,t,s='<defs><linearGradient id="logosJira0" x1="98.031%" x2="58.888%" y1=".161%" y2="40.766%"><stop offset="18%" stop-color="#0052CC"/><stop offset="100%" stop-color="#2684FF"/></linearGradient><linearGradient id="logosJira1" x1="100.665%" x2="55.402%" y1=".455%" y2="44.727%"><stop offset="18%" stop-color="#0052CC"/><stop offset="100%" stop-color="#2684FF"/></linearGradient></defs><path fill="#2684FF" d="M244.658 0H121.707a55.502 55.502 0 0 0 55.502 55.502h22.649V77.37c.02 30.625 24.841 55.447 55.466 55.467V10.666C255.324 4.777 250.55 0 244.658 0"/><path fill="url(#logosJira0)" d="M183.822 61.262H60.872c.019 30.625 24.84 55.447 55.466 55.467h22.649v21.938c.039 30.625 24.877 55.43 55.502 55.43V71.93c0-5.891-4.776-10.667-10.667-10.667"/><path fill="url(#logosJira1)" d="M122.951 122.489H0c0 30.653 24.85 55.502 55.502 55.502h22.72v21.867c.02 30.597 24.798 55.408 55.396 55.466V133.156c0-5.891-4.776-10.667-10.667-10.667"/>',n=[{"data-onlook-id":"~icons/logos/jira.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/logos/jira.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Lf(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class Df extends Ze{constructor(e){super(),Ke(this,e,Lf,$f,We,{})}}function Mf(r){let e,t,s='<path fill="currentColor" d="m18.988 2.012l3 3L19.701 7.3l-3-3zM8 16h3l7.287-7.287l-3-3L8 13z"/><path fill="currentColor" d="M19 19H8.158c-.026 0-.053.01-.079.01c-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .896-2 2v14c0 1.104.897 2 2 2h14a2 2 0 0 0 2-2v-8.668l-2 2z"/>',n=[{"data-onlook-id":"~icons/bxs/edit.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/bxs/edit.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Ff(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class Uf extends Ze{constructor(e){super(),Ke(this,e,Ff,Mf,We,{})}}function Gf(r){let e,t,s='<path fill="#222326" d="m8.174 102.613l145.213 145.213c2.12 2.12 1.097 5.72-1.85 6.27a128.23 128.23 0 0 1-15.02 1.896a3.78 3.78 0 0 1-2.92-1.109L1.117 122.403a3.78 3.78 0 0 1-1.109-2.92c.34-5.095.978-10.107 1.896-15.02c.55-2.947 4.15-3.97 6.27-1.85m-4.092 58.796c-.97-3.614 3.3-5.894 5.946-3.248l87.81 87.811c2.647 2.646.367 6.915-3.247 5.946c-44.03-11.805-78.704-46.478-90.51-90.509m12.727-97.245c1.233-2.135 4.147-2.463 5.89-.719L192.556 233.3c1.744 1.744 1.417 4.658-.72 5.891a127.748 127.748 0 0 1-11.1 5.705c-1.43.65-3.11.322-4.22-.79L11.893 79.487c-1.111-1.112-1.439-2.79-.79-4.221a127.698 127.698 0 0 1 5.706-11.1M127.86 0C198.63 0 256 57.37 256 128.14c0 37.57-16.168 71.362-41.926 94.8c-1.487 1.354-3.768 1.264-5.19-.157L33.217 47.116c-1.421-1.422-1.51-3.703-.158-5.19C56.498 16.168 90.291 0 127.86 0"/>',n=[{"data-onlook-id":"~icons/logos/linear-icon.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/logos/linear-icon.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Bf(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class zf extends Ze{constructor(e){super(),Ke(this,e,Bf,Gf,We,{})}}function ko(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Ao(r,e,t,s){if(typeof t!="function")throw new Error("method for before hook must be a function");return s||(s={}),Array.isArray(e)?e.reverse().reduce((n,i)=>Ao.bind(null,r,i,n,s),t)():Promise.resolve().then(()=>r.registry[e]?r.registry[e].reduce((n,i)=>i.hook.bind(null,n,s),t)():t(s))}function Hf(r,e,t,s){const n=s;r.registry[t]||(r.registry[t]=[]),e==="before"&&(s=(i,a)=>Promise.resolve().then(n.bind(null,a)).then(i.bind(null,a))),e==="after"&&(s=(i,a)=>{let o;return Promise.resolve().then(i.bind(null,a)).then(l=>(o=l,n(o,a))).then(()=>o)}),e==="error"&&(s=(i,a)=>Promise.resolve().then(i.bind(null,a)).catch(o=>n(o,a))),r.registry[t].push({hook:s,orig:n})}function qf(r,e,t){if(!r.registry[e])return;const s=r.registry[e].map(n=>n.orig).indexOf(t);s!==-1&&r.registry[e].splice(s,1)}const Ml=Function.bind,Fl=Ml.bind(Ml);function wu(r,e,t){const s=Fl(qf,null).apply(null,t?[e,t]:[e]);r.api={remove:s},r.remove=s,["before","error","after","wrap"].forEach(n=>{const i=t?[e,n,t]:[e,n];r[n]=r.api[n]=Fl(Hf,null).apply(null,i)})}function Vf(){const r=Symbol("Singular"),e={registry:{}},t=Ao.bind(null,e,r);return wu(t,e,r),t}function Wf(){const r={registry:{}},e=Ao.bind(null,r);return wu(e,r),e}const Zf={Singular:Vf,Collection:Wf};var Kf="0.0.0-development",Jf=`octokit-endpoint.js/${Kf} ${ko()}`,Xf={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Jf},mediaType:{format:""}};function Qf(r){return r?Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=r[t],e),{}):{}}function Yf(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function vu(r,e){const t=Object.assign({},r);return Object.keys(e).forEach(s=>{Yf(e[s])?s in r?t[s]=vu(r[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}function Ul(r){for(const e in r)r[e]===void 0&&delete r[e];return r}function Ra(r,e,t){if(typeof e=="string"){let[n,i]=e.split(" ");t=Object.assign(i?{method:n,url:i}:{url:n},t)}else t=Object.assign({},e);t.headers=Qf(t.headers),Ul(t),Ul(t.headers);const s=vu(r||{},t);return t.url==="/graphql"&&(r&&r.mediaType.previews?.length&&(s.mediaType.previews=r.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function em(r,e){const t=/\?/.test(r)?"&":"?",s=Object.keys(e);return s.length===0?r:r+t+s.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}var tm=/\{[^}]+\}/g;function rm(r){return r.replace(/^\W+|\W+$/g,"").split(/,/)}function sm(r){const e=r.match(tm);return e?e.map(rm).reduce((t,s)=>t.concat(s),[]):[]}function Gl(r,e){const t={__proto__:null};for(const s of Object.keys(r))e.indexOf(s)===-1&&(t[s]=r[s]);return t}function Eu(r){return r.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function ps(r){return encodeURIComponent(r).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ls(r,e,t){return e=r==="+"||r==="#"?Eu(e):ps(e),t?ps(t)+"="+e:e}function ss(r){return r!=null}function ia(r){return r===";"||r==="&"||r==="?"}function nm(r,e,t,s){var n=r[t],i=[];if(ss(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),i.push(Ls(e,n,ia(e)?t:""));else if(s==="*")Array.isArray(n)?n.filter(ss).forEach(function(a){i.push(Ls(e,a,ia(e)?t:""))}):Object.keys(n).forEach(function(a){ss(n[a])&&i.push(Ls(e,n[a],a))});else{const a=[];Array.isArray(n)?n.filter(ss).forEach(function(o){a.push(Ls(e,o))}):Object.keys(n).forEach(function(o){ss(n[o])&&(a.push(ps(o)),a.push(Ls(e,n[o].toString())))}),ia(e)?i.push(ps(t)+"="+a.join(",")):a.length!==0&&i.push(a.join(","))}else e===";"?ss(n)&&i.push(ps(t)):n===""&&(e==="&"||e==="?")?i.push(ps(t)+"="):n===""&&i.push("");return i}function im(r){return{expand:am.bind(null,r)}}function am(r,e){var t=["+","#",".","/",";","?","&"];return r=r.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,i){if(n){let o="";const l=[];if(t.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(nm(e,o,u[1],u[2]||u[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(l.length!==0?o:"")+l.join(a)}else return l.join(",")}else return Eu(i)}),r==="/"?r:r.replace(/\/$/,"")}function Tu(r){let e=r.method.toUpperCase(),t=(r.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},r.headers),n,i=Gl(r,["method","baseUrl","url","headers","request","mediaType"]);const a=sm(t);t=im(t).expand(i),/^http/.test(t)||(t=r.baseUrl+t);const o=Object.keys(r).filter(u=>a.includes(u)).concat("baseUrl"),l=Gl(i,o);if(!/application\/octet-stream/i.test(s.accept)&&(r.mediaType.format&&(s.accept=s.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${r.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&r.mediaType.previews?.length)){const u=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=u.concat(r.mediaType.previews).map(d=>{const h=r.mediaType.format?`.${r.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?t=em(t,l):"data"in l?n=l.data:Object.keys(l).length&&(n=l),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n>"u"&&(n=""),Object.assign({method:e,url:t,headers:s},typeof n<"u"?{body:n}:null,r.request?{request:r.request}:null)}function om(r,e,t){return Tu(Ra(r,e,t))}function ku(r,e){const t=Ra(r,e),s=om.bind(null,t);return Object.assign(s,{DEFAULTS:t,defaults:ku.bind(null,t),merge:Ra.bind(null,t),parse:Tu})}var lm=ku(null,Xf);let Ds=class extends Error{name;status;request;response;constructor(e,t,s){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"response"in s&&(this.response=s.response);const n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};var cm="0.0.0-development";function um(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function dm(r){return r.arrayBuffer()}function Bl(r){const e=r.request&&r.request.log?r.request.log:console,t=r.request?.parseSuccessResponseBody!==!1;(um(r.body)||Array.isArray(r.body))&&(r.body=JSON.stringify(r.body));let s={},n,i,{fetch:a}=globalThis;if(r.request?.fetch&&(a=r.request.fetch),!a)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return a(r.url,{method:r.method,body:r.body,headers:Object.fromEntries(Object.entries(r.headers).map(([o,l])=>[o,String(l)])),signal:r.request?.signal,...r.body&&{duplex:"half"}}).then(async o=>{i=o.url,n=o.status;for(const l of o.headers)s[l[0]]=l[1];if("deprecation"in s){const l=s.link&&s.link.match(/<([^>]+)>; rel="deprecation"/),c=l&&l.pop();e.warn(`[@octokit/request] "${r.method} ${r.url}" is deprecated. It is scheduled to be removed on ${s.sunset}${c?`. See ${c}`:""}`)}if(!(n===204||n===205)){if(r.method==="HEAD"){if(n<400)return;throw new Ds(o.statusText,n,{response:{url:i,status:n,headers:s,data:void 0},request:r})}if(n===304)throw new Ds("Not modified",n,{response:{url:i,status:n,headers:s,data:await aa(o)},request:r});if(n>=400){const l=await aa(o);throw new Ds(hm(l),n,{response:{url:i,status:n,headers:s,data:l},request:r})}return t?await aa(o):o.body}}).then(o=>({status:n,url:i,headers:s,data:o})).catch(o=>{if(o instanceof Ds)throw o;if(o.name==="AbortError")throw o;let l=o.message;throw o.name==="TypeError"&&"cause"in o&&(o.cause instanceof Error?l=o.cause.message:typeof o.cause=="string"&&(l=o.cause)),new Ds(l,500,{request:r})})}async function aa(r){const e=r.headers.get("content-type");return/application\/json/.test(e)?r.json().catch(()=>r.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?r.text():dm(r)}function hm(r){if(typeof r=="string")return r;let e;return"documentation_url"in r?e=` - ${r.documentation_url}`:e="","message"in r?Array.isArray(r.errors)?`${r.message}: ${r.errors.map(JSON.stringify).join(", ")}${e}`:`${r.message}${e}`:`Unknown error: ${JSON.stringify(r)}`}function Ia(r,e){const t=r.defaults(e);return Object.assign(function(n,i){const a=t.merge(n,i);if(!a.request||!a.request.hook)return Bl(t.parse(a));const o=(l,c)=>Bl(t.parse(t.merge(l,c)));return Object.assign(o,{endpoint:t,defaults:Ia.bind(null,t)}),a.request.hook(o,a)},{endpoint:t,defaults:Ia.bind(null,t)})}var zl=Ia(lm,{headers:{"user-agent":`octokit-request.js/${cm} ${ko()}`}});function Oo(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var pm="0.0.0-development",fm=`octokit-endpoint.js/${pm} ${Oo()}`,mm={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":fm},mediaType:{format:""}};function gm(r){return r?Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=r[t],e),{}):{}}function bm(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function Au(r,e){const t=Object.assign({},r);return Object.keys(e).forEach(s=>{bm(e[s])?s in r?t[s]=Au(r[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}function Hl(r){for(const e in r)r[e]===void 0&&delete r[e];return r}function ja(r,e,t){if(typeof e=="string"){let[n,i]=e.split(" ");t=Object.assign(i?{method:n,url:i}:{url:n},t)}else t=Object.assign({},e);t.headers=gm(t.headers),Hl(t),Hl(t.headers);const s=Au(r||{},t);return t.url==="/graphql"&&(r&&r.mediaType.previews?.length&&(s.mediaType.previews=r.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function _m(r,e){const t=/\?/.test(r)?"&":"?",s=Object.keys(e);return s.length===0?r:r+t+s.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}var ym=/\{[^}]+\}/g;function wm(r){return r.replace(/^\W+|\W+$/g,"").split(/,/)}function vm(r){const e=r.match(ym);return e?e.map(wm).reduce((t,s)=>t.concat(s),[]):[]}function ql(r,e){const t={__proto__:null};for(const s of Object.keys(r))e.indexOf(s)===-1&&(t[s]=r[s]);return t}function Ou(r){return r.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function fs(r){return encodeURIComponent(r).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ms(r,e,t){return e=r==="+"||r==="#"?Ou(e):fs(e),t?fs(t)+"="+e:e}function ns(r){return r!=null}function oa(r){return r===";"||r==="&"||r==="?"}function Em(r,e,t,s){var n=r[t],i=[];if(ns(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),i.push(Ms(e,n,oa(e)?t:""));else if(s==="*")Array.isArray(n)?n.filter(ns).forEach(function(a){i.push(Ms(e,a,oa(e)?t:""))}):Object.keys(n).forEach(function(a){ns(n[a])&&i.push(Ms(e,n[a],a))});else{const a=[];Array.isArray(n)?n.filter(ns).forEach(function(o){a.push(Ms(e,o))}):Object.keys(n).forEach(function(o){ns(n[o])&&(a.push(fs(o)),a.push(Ms(e,n[o].toString())))}),oa(e)?i.push(fs(t)+"="+a.join(",")):a.length!==0&&i.push(a.join(","))}else e===";"?ns(n)&&i.push(fs(t)):n===""&&(e==="&"||e==="?")?i.push(fs(t)+"="):n===""&&i.push("");return i}function Tm(r){return{expand:km.bind(null,r)}}function km(r,e){var t=["+","#",".","/",";","?","&"];return r=r.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,i){if(n){let o="";const l=[];if(t.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(Em(e,o,u[1],u[2]||u[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(l.length!==0?o:"")+l.join(a)}else return l.join(",")}else return Ou(i)}),r==="/"?r:r.replace(/\/$/,"")}function Su(r){let e=r.method.toUpperCase(),t=(r.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},r.headers),n,i=ql(r,["method","baseUrl","url","headers","request","mediaType"]);const a=vm(t);t=Tm(t).expand(i),/^http/.test(t)||(t=r.baseUrl+t);const o=Object.keys(r).filter(u=>a.includes(u)).concat("baseUrl"),l=ql(i,o);if(!/application\/octet-stream/i.test(s.accept)&&(r.mediaType.format&&(s.accept=s.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${r.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&r.mediaType.previews?.length)){const u=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=u.concat(r.mediaType.previews).map(d=>{const h=r.mediaType.format?`.${r.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?t=_m(t,l):"data"in l?n=l.data:Object.keys(l).length&&(n=l),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n>"u"&&(n=""),Object.assign({method:e,url:t,headers:s},typeof n<"u"?{body:n}:null,r.request?{request:r.request}:null)}function Am(r,e,t){return Su(ja(r,e,t))}function Pu(r,e){const t=ja(r,e),s=Am.bind(null,t);return Object.assign(s,{DEFAULTS:t,defaults:Pu.bind(null,t),merge:ja.bind(null,t),parse:Su})}var Om=Pu(null,mm);let Fs=class extends Error{name;status;request;response;constructor(e,t,s){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"response"in s&&(this.response=s.response);const n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};var Sm="0.0.0-development";function Pm(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function xm(r){return r.arrayBuffer()}function Vl(r){const e=r.request&&r.request.log?r.request.log:console,t=r.request?.parseSuccessResponseBody!==!1;(Pm(r.body)||Array.isArray(r.body))&&(r.body=JSON.stringify(r.body));let s={},n,i,{fetch:a}=globalThis;if(r.request?.fetch&&(a=r.request.fetch),!a)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return a(r.url,{method:r.method,body:r.body,headers:Object.fromEntries(Object.entries(r.headers).map(([o,l])=>[o,String(l)])),signal:r.request?.signal,...r.body&&{duplex:"half"}}).then(async o=>{i=o.url,n=o.status;for(const l of o.headers)s[l[0]]=l[1];if("deprecation"in s){const l=s.link&&s.link.match(/<([^>]+)>; rel="deprecation"/),c=l&&l.pop();e.warn(`[@octokit/request] "${r.method} ${r.url}" is deprecated. It is scheduled to be removed on ${s.sunset}${c?`. See ${c}`:""}`)}if(!(n===204||n===205)){if(r.method==="HEAD"){if(n<400)return;throw new Fs(o.statusText,n,{response:{url:i,status:n,headers:s,data:void 0},request:r})}if(n===304)throw new Fs("Not modified",n,{response:{url:i,status:n,headers:s,data:await la(o)},request:r});if(n>=400){const l=await la(o);throw new Fs(Cm(l),n,{response:{url:i,status:n,headers:s,data:l},request:r})}return t?await la(o):o.body}}).then(o=>({status:n,url:i,headers:s,data:o})).catch(o=>{if(o instanceof Fs)throw o;if(o.name==="AbortError")throw o;let l=o.message;throw o.name==="TypeError"&&"cause"in o&&(o.cause instanceof Error?l=o.cause.message:typeof o.cause=="string"&&(l=o.cause)),new Fs(l,500,{request:r})})}async function la(r){const e=r.headers.get("content-type");return/application\/json/.test(e)?r.json().catch(()=>r.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?r.text():xm(r)}function Cm(r){if(typeof r=="string")return r;let e;return"documentation_url"in r?e=` - ${r.documentation_url}`:e="","message"in r?Array.isArray(r.errors)?`${r.message}: ${r.errors.map(JSON.stringify).join(", ")}${e}`:`${r.message}${e}`:`Unknown error: ${JSON.stringify(r)}`}function Na(r,e){const t=r.defaults(e);return Object.assign(function(n,i){const a=t.merge(n,i);if(!a.request||!a.request.hook)return Vl(t.parse(a));const o=(l,c)=>Vl(t.parse(t.merge(l,c)));return Object.assign(o,{endpoint:t,defaults:Na.bind(null,t)}),a.request.hook(o,a)},{endpoint:t,defaults:Na.bind(null,t)})}var Rm=Na(Om,{headers:{"user-agent":`octokit-request.js/${Sm} ${Oo()}`}}),Im="0.0.0-development";function jm(r){return`Request failed due to following response errors:
`+r.errors.map(e=>` - ${e.message}`).join(`
`)}var Nm=class extends Error{constructor(r,e,t){super(jm(t)),this.request=r,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},$m=["method","baseUrl","url","headers","request","query","mediaType"],Lm=["query","method","url"],Wl=/\/api\/v3\/?$/;function Dm(r,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const a in t)if(Lm.includes(a))return Promise.reject(new Error(`[@octokit/graphql] "${a}" cannot be used as variable name`))}const s=typeof e=="string"?Object.assign({query:e},t):e,n=Object.keys(s).reduce((a,o)=>$m.includes(o)?(a[o]=s[o],a):(a.variables||(a.variables={}),a.variables[o]=s[o],a),{}),i=s.baseUrl||r.endpoint.DEFAULTS.baseUrl;return Wl.test(i)&&(n.url=i.replace(Wl,"/api/graphql")),r(n).then(a=>{if(a.data.errors){const o={};for(const l of Object.keys(a.headers))o[l]=a.headers[l];throw new Nm(n,o,a.data)}return a.data.data})}function So(r,e){const t=r.defaults(e);return Object.assign((n,i)=>Dm(t,n,i),{defaults:So.bind(null,t),endpoint:t.endpoint})}So(Rm,{headers:{"user-agent":`octokit-graphql.js/${Im} ${Oo()}`},method:"POST",url:"/graphql"});function Mm(r){return So(r,{method:"POST",url:"/graphql"})}var Fm=/^v1\./,Um=/^ghs_/,Gm=/^ghu_/;async function Bm(r){const e=r.split(/\./).length===3,t=Fm.test(r)||Um.test(r),s=Gm.test(r);return{type:"token",token:r,tokenType:e?"app":t?"installation":s?"user-to-server":"oauth"}}function zm(r){return r.split(/\./).length===3?`bearer ${r}`:`token ${r}`}async function Hm(r,e,t,s){const n=e.endpoint.merge(t,s);return n.headers.authorization=zm(r),e(n)}var qm=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Bm.bind(null,e),{hook:Hm.bind(null,e)})};const xu="6.0.1",Zl=()=>{},Vm=console.warn.bind(console),Wm=console.error.bind(console),Kl=`octokit-core.js/${xu} ${ko()}`;class Zm{static VERSION=xu;static defaults(e){return class extends this{constructor(...s){const n=s[0]||{};if(typeof e=="function"){super(e(n));return}super(Object.assign({},e,n,n.userAgent&&e.userAgent?{userAgent:`${n.userAgent} ${e.userAgent}`}:null))}}}static plugins=[];static plugin(...e){const t=this.plugins;return class extends this{static plugins=t.concat(e.filter(n=>!t.includes(n)))}}constructor(e={}){const t=new Zf.Collection,s={baseUrl:zl.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:t.bind(null,"request")}),mediaType:{previews:[],format:""}};if(s.headers["user-agent"]=e.userAgent?`${e.userAgent} ${Kl}`:Kl,e.baseUrl&&(s.baseUrl=e.baseUrl),e.previews&&(s.mediaType.previews=e.previews),e.timeZone&&(s.headers["time-zone"]=e.timeZone),this.request=zl.defaults(s),this.graphql=Mm(this.request).defaults(s),this.log=Object.assign({debug:Zl,info:Zl,warn:Vm,error:Wm},e.log),this.hook=t,e.authStrategy){const{authStrategy:i,...a}=e,o=i(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:a},e.auth));t.wrap("request",o.hook),this.auth=o}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const i=qm(e.auth);t.wrap("request",i.hook),this.auth=i}const n=this.constructor;for(let i=0;i<n.plugins.length;++i)Object.assign(this,n.plugins[i](this,e))}request;graphql;log;hook;auth}var Cu={exports:{}};(function(r,e){(function(t,s){r.exports=s()})(ea,function(){var t=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof ea<"u"?ea:typeof self<"u"?self:{};function s(B){return B&&B.default||B}var n=function(B,P,g={}){var I,N,D;for(I in P)D=P[I],g[I]=(N=B[I])!=null?N:D;return g},i=function(B,P,g={}){var I,N;for(I in B)N=B[I],P[I]!==void 0&&(g[I]=N);return g},a={load:n,overwrite:i},o;o=class{constructor(P,g){this.incr=P,this.decr=g,this._first=null,this._last=null,this.length=0}push(P){var g;this.length++,typeof this.incr=="function"&&this.incr(),g={value:P,prev:this._last,next:null},this._last!=null?(this._last.next=g,this._last=g):this._first=this._last=g}shift(){var P;if(this._first!=null)return this.length--,typeof this.decr=="function"&&this.decr(),P=this._first.value,(this._first=this._first.next)!=null?this._first.prev=null:this._last=null,P}first(){if(this._first!=null)return this._first.value}getArray(){var P,g,I;for(P=this._first,I=[];P!=null;)I.push((g=P,P=P.next,g.value));return I}forEachShift(P){var g;for(g=this.shift();g!=null;)P(g),g=this.shift()}debug(){var P,g,I,N,D;for(P=this._first,D=[];P!=null;)D.push((g=P,P=P.next,{value:g.value,prev:(I=g.prev)!=null?I.value:void 0,next:(N=g.next)!=null?N.value:void 0}));return D}};var l=o,c;c=class{constructor(P){if(this.instance=P,this._events={},this.instance.on!=null||this.instance.once!=null||this.instance.removeAllListeners!=null)throw new Error("An Emitter already exists for this object");this.instance.on=(g,I)=>this._addListener(g,"many",I),this.instance.once=(g,I)=>this._addListener(g,"once",I),this.instance.removeAllListeners=(g=null)=>g!=null?delete this._events[g]:this._events={}}_addListener(P,g,I){var N;return(N=this._events)[P]==null&&(N[P]=[]),this._events[P].push({cb:I,status:g}),this.instance}listenerCount(P){return this._events[P]!=null?this._events[P].length:0}async trigger(P,...g){var I,N;try{return P!=="debug"&&this.trigger("debug",`Event triggered: ${P}`,g),this._events[P]==null?void 0:(this._events[P]=this._events[P].filter(function(D){return D.status!=="none"}),N=this._events[P].map(async D=>{var W,ne;if(D.status!=="none"){D.status==="once"&&(D.status="none");try{return ne=typeof D.cb=="function"?D.cb(...g):void 0,typeof ne?.then=="function"?await ne:ne}catch(Ce){return W=Ce,this.trigger("error",W),null}}}),(await Promise.all(N)).find(function(D){return D!=null}))}catch(D){return I=D,this.trigger("error",I),null}}};var u=c,d,h,f;d=l,h=u,f=class{constructor(P){this.Events=new h(this),this._length=0,this._lists=function(){var g,I,N;for(N=[],g=1,I=P;1<=I?g<=I:g>=I;1<=I?++g:--g)N.push(new d(()=>this.incr(),()=>this.decr()));return N}.call(this)}incr(){if(this._length++===0)return this.Events.trigger("leftzero")}decr(){if(--this._length===0)return this.Events.trigger("zero")}push(P){return this._lists[P.options.priority].push(P)}queued(P){return P!=null?this._lists[P].length:this._length}shiftAll(P){return this._lists.forEach(function(g){return g.forEachShift(P)})}getFirst(P=this._lists){var g,I,N;for(g=0,I=P.length;g<I;g++)if(N=P[g],N.length>0)return N;return[]}shiftLastFrom(P){return this.getFirst(this._lists.slice(P).reverse()).shift()}};var m=f,b;b=class extends Error{};var _=b,A,w,T,E,k;E=10,w=5,k=a,A=_,T=class{constructor(P,g,I,N,D,W,ne,Ce){this.task=P,this.args=g,this.rejectOnDrop=D,this.Events=W,this._states=ne,this.Promise=Ce,this.options=k.load(I,N),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===N.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((tt,nt)=>{this._resolve=tt,this._reject=nt}),this.retryCount=0}_sanitizePriority(P){var g;return g=~~P!==P?w:P,g<0?0:g>E-1?E-1:g}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:P,message:g="This job has been dropped by Bottleneck"}={}){return this._states.remove(this.options.id)?(this.rejectOnDrop&&this._reject(P??new A(g)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0):!1}_assertStatus(P){var g;if(g=this._states.jobStatus(this.options.id),!(g===P||P==="DONE"&&g===null))throw new A(`Invalid job status ${g}, expected ${P}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(P,g){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:P,blocked:g})}doRun(){return this.retryCount===0?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}async doExecute(P,g,I,N){var D,W,ne;this.retryCount===0?(this._assertStatus("RUNNING"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),W={args:this.args,options:this.options,retryCount:this.retryCount},this.Events.trigger("executing",W);try{if(ne=await(P!=null?P.schedule(this.options,this.task,...this.args):this.task(...this.args)),g())return this.doDone(W),await N(this.options,W),this._assertStatus("DONE"),this._resolve(ne)}catch(Ce){return D=Ce,this._onFailure(D,W,g,I,N)}}doExpire(P,g,I){var N,D;return this._states.jobStatus(this.options.id==="RUNNING")&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),D={args:this.args,options:this.options,retryCount:this.retryCount},N=new A(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(N,D,P,g,I)}async _onFailure(P,g,I,N,D){var W,ne;if(I())return W=await this.Events.trigger("failed",P,g),W!=null?(ne=~~W,this.Events.trigger("retry",`Retrying ${this.options.id} after ${ne} ms`,g),this.retryCount++,N(ne)):(this.doDone(g),await D(this.options,g),this._assertStatus("DONE"),this._reject(P))}doDone(P){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",P)}};var x=T,C,H,R;R=a,C=_,H=class{constructor(P,g,I){this.instance=P,this.storeOptions=g,this.clientId=this.instance._randomIndex(),R.load(I,I,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var P;return this.heartbeat==null&&(this.storeOptions.reservoirRefreshInterval!=null&&this.storeOptions.reservoirRefreshAmount!=null||this.storeOptions.reservoirIncreaseInterval!=null&&this.storeOptions.reservoirIncreaseAmount!=null)?typeof(P=this.heartbeat=setInterval(()=>{var g,I,N,D,W;if(D=Date.now(),this.storeOptions.reservoirRefreshInterval!=null&&D>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=D,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),this.storeOptions.reservoirIncreaseInterval!=null&&D>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval&&({reservoirIncreaseAmount:g,reservoirIncreaseMaximum:N,reservoir:W}=this.storeOptions,this._lastReservoirIncrease=D,I=N!=null?Math.min(g,N-W):g,I>0))return this.storeOptions.reservoir+=I,this.instance._drainAll(this.computeCapacity())},this.heartbeatInterval)).unref=="function"?P.unref():void 0:clearInterval(this.heartbeat)}async __publish__(P){return await this.yieldLoop(),this.instance.Events.trigger("message",P.toString())}async __disconnect__(P){return await this.yieldLoop(),clearInterval(this.heartbeat),this.Promise.resolve()}yieldLoop(P=0){return new this.Promise(function(g,I){return setTimeout(g,P)})}computePenalty(){var P;return(P=this.storeOptions.penalty)!=null?P:15*this.storeOptions.minTime||5e3}async __updateSettings__(P){return await this.yieldLoop(),R.overwrite(P,P,this.storeOptions),this._startHeartbeat(),this.instance._drainAll(this.computeCapacity()),!0}async __running__(){return await this.yieldLoop(),this._running}async __queued__(){return await this.yieldLoop(),this.instance.queued()}async __done__(){return await this.yieldLoop(),this._done}async __groupCheck__(P){return await this.yieldLoop(),this._nextRequest+this.timeout<P}computeCapacity(){var P,g;return{maxConcurrent:P,reservoir:g}=this.storeOptions,P!=null&&g!=null?Math.min(P-this._running,g):P!=null?P-this._running:g??null}conditionsCheck(P){var g;return g=this.computeCapacity(),g==null||P<=g}async __incrementReservoir__(P){var g;return await this.yieldLoop(),g=this.storeOptions.reservoir+=P,this.instance._drainAll(this.computeCapacity()),g}async __currentReservoir__(){return await this.yieldLoop(),this.storeOptions.reservoir}isBlocked(P){return this._unblockTime>=P}check(P,g){return this.conditionsCheck(P)&&this._nextRequest-g<=0}async __check__(P){var g;return await this.yieldLoop(),g=Date.now(),this.check(P,g)}async __register__(P,g,I){var N,D;return await this.yieldLoop(),N=Date.now(),this.conditionsCheck(g)?(this._running+=g,this.storeOptions.reservoir!=null&&(this.storeOptions.reservoir-=g),D=Math.max(this._nextRequest-N,0),this._nextRequest=N+D+this.storeOptions.minTime,{success:!0,wait:D,reservoir:this.storeOptions.reservoir}):{success:!1}}strategyIsBlock(){return this.storeOptions.strategy===3}async __submit__(P,g){var I,N,D;if(await this.yieldLoop(),this.storeOptions.maxConcurrent!=null&&g>this.storeOptions.maxConcurrent)throw new C(`Impossible to add a job having a weight of ${g} to a limiter having a maxConcurrent setting of ${this.storeOptions.maxConcurrent}`);return N=Date.now(),D=this.storeOptions.highWater!=null&&P===this.storeOptions.highWater&&!this.check(g,N),I=this.strategyIsBlock()&&(D||this.isBlocked(N)),I&&(this._unblockTime=N+this.computePenalty(),this._nextRequest=this._unblockTime+this.storeOptions.minTime,this.instance._dropAllQueued()),{reachedHWM:D,blocked:I,strategy:this.storeOptions.strategy}}async __free__(P,g){return await this.yieldLoop(),this._running-=g,this._done+=g,this.instance._drainAll(this.computeCapacity()),{running:this._running}}};var F=H,z,X;z=_,X=class{constructor(P){this.status=P,this._jobs={},this.counts=this.status.map(function(){return 0})}next(P){var g,I;if(g=this._jobs[P],I=g+1,g!=null&&I<this.status.length)return this.counts[g]--,this.counts[I]++,this._jobs[P]++;if(g!=null)return this.counts[g]--,delete this._jobs[P]}start(P){var g;return g=0,this._jobs[P]=g,this.counts[g]++}remove(P){var g;return g=this._jobs[P],g!=null&&(this.counts[g]--,delete this._jobs[P]),g!=null}jobStatus(P){var g;return(g=this.status[this._jobs[P]])!=null?g:null}statusJobs(P){var g,I,N,D,W;if(P!=null){if(I=this.status.indexOf(P),I<0)throw new z(`status must be one of ${this.status.join(", ")}`);N=this._jobs,D=[];for(g in N)W=N[g],W===I&&D.push(g);return D}else return Object.keys(this._jobs)}statusCounts(){return this.counts.reduce((P,g,I)=>(P[this.status[I]]=g,P),{})}};var te=X,oe,re;oe=l,re=class{constructor(P,g){this.schedule=this.schedule.bind(this),this.name=P,this.Promise=g,this._running=0,this._queue=new oe}isEmpty(){return this._queue.length===0}async _tryToRun(){var P,g,I,N,D,W,ne;if(this._running<1&&this._queue.length>0)return this._running++,{task:ne,args:P,resolve:D,reject:N}=this._queue.shift(),g=await async function(){try{return W=await ne(...P),function(){return D(W)}}catch(Ce){return I=Ce,function(){return N(I)}}}(),this._running--,this._tryToRun(),g()}schedule(P,...g){var I,N,D;return D=N=null,I=new this.Promise(function(W,ne){return D=W,N=ne}),this._queue.push({task:P,args:g,resolve:D,reject:N}),this._tryToRun(),I}};var Oe=re,j="2.19.5",M={version:j},V=Object.freeze({version:j,default:M}),Q=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),ce=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),ve=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),ye,Je,Se,ze,Me,He;He=a,ye=u,ze=Q,Se=ce,Me=ve,Je=function(){class B{constructor(g={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=g,He.load(this.limiterOptions,this.defaults,this),this.Events=new ye(this),this.instances={},this.Bottleneck=J,this._startAutoCleanup(),this.sharedConnection=this.connection!=null,this.connection==null&&(this.limiterOptions.datastore==="redis"?this.connection=new ze(Object.assign({},this.limiterOptions,{Events:this.Events})):this.limiterOptions.datastore==="ioredis"&&(this.connection=new Se(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(g=""){var I;return(I=this.instances[g])!=null?I:(()=>{var N;return N=this.instances[g]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${g}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",N,g),N})()}async deleteKey(g=""){var I,N;return N=this.instances[g],this.connection&&(I=await this.connection.__runCommand__(["del",...Me.allKeys(`${this.id}-${g}`)])),N!=null&&(delete this.instances[g],await N.disconnect()),N!=null||I>0}limiters(){var g,I,N,D;I=this.instances,N=[];for(g in I)D=I[g],N.push({key:g,limiter:D});return N}keys(){return Object.keys(this.instances)}async clusterKeys(){var g,I,N,D,W,ne,Ce,tt,nt;if(this.connection==null)return this.Promise.resolve(this.keys());for(ne=[],g=null,nt=`b_${this.id}-`.length,I=9;g!==0;)for([tt,N]=await this.connection.__runCommand__(["scan",g??0,"match",`b_${this.id}-*_settings`,"count",1e4]),g=~~tt,D=0,Ce=N.length;D<Ce;D++)W=N[D],ne.push(W.slice(nt,-I));return ne}_startAutoCleanup(){var g;return clearInterval(this.interval),typeof(g=this.interval=setInterval(async()=>{var I,N,D,W,ne,Ce;ne=Date.now(),D=this.instances,W=[];for(N in D){Ce=D[N];try{await Ce._store.__groupCheck__(ne)?W.push(this.deleteKey(N)):W.push(void 0)}catch(tt){I=tt,W.push(Ce.Events.trigger("error",I))}}return W},this.timeout/2)).unref=="function"?g.unref():void 0}updateSettings(g={}){if(He.overwrite(g,this.defaults,this),He.overwrite(g,g,this.limiterOptions),g.timeout!=null)return this._startAutoCleanup()}disconnect(g=!0){var I;if(!this.sharedConnection)return(I=this.connection)!=null?I.disconnect(g):void 0}}return B.prototype.defaults={timeout:1e3*60*5,connection:null,Promise,id:"group-key"},B}.call(t);var Xe=Je,Pe,xe,rt;rt=a,xe=u,Pe=function(){class B{constructor(g={}){this.options=g,rt.load(this.options,this.defaults,this),this.Events=new xe(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((g,I)=>this._resolve=g)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(g){var I;return this._arr.push(g),I=this._promise,this._arr.length===this.maxSize?this._flush():this.maxTime!=null&&this._arr.length===1&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),I}}return B.prototype.defaults={maxTime:null,maxSize:null,Promise},B}.call(t);var ot=Pe,Ot=()=>console.log("You must import the full version of Bottleneck in order to use this feature."),bt=s(V),Ne,lt,Et,ie,Rt,Fe,_e,_t,Qe,nr,ct,L=[].splice;Fe=10,lt=5,ct=a,_e=m,ie=x,Rt=F,_t=Ot,Et=u,Qe=te,nr=Oe,Ne=function(){class B{constructor(g={},...I){var N,D;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(g,I),ct.load(g,this.instanceDefaults,this),this._queues=new _e(Fe),this._scheduled={},this._states=new Qe(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new Et(this),this._submitLock=new nr("submit",this.Promise),this._registerLock=new nr("register",this.Promise),D=ct.load(g,this.storeDefaults,{}),this._store=function(){if(this.datastore==="redis"||this.datastore==="ioredis"||this.connection!=null)return N=ct.load(g,this.redisStoreDefaults,{}),new _t(this,D,N);if(this.datastore==="local")return N=ct.load(g,this.localStoreDefaults,{}),new Rt(this,D,N);throw new B.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}.call(this),this._queues.on("leftzero",()=>{var W;return(W=this._store.heartbeat)!=null&&typeof W.ref=="function"?W.ref():void 0}),this._queues.on("zero",()=>{var W;return(W=this._store.heartbeat)!=null&&typeof W.unref=="function"?W.unref():void 0})}_validateOptions(g,I){if(!(g!=null&&typeof g=="object"&&I.length===0))throw new B.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(g){return this._store.__publish__(g)}disconnect(g=!0){return this._store.__disconnect__(g)}chain(g){return this._limiter=g,this}queued(g){return this._queues.queued(g)}clusterQueued(){return this._store.__queued__()}empty(){return this.queued()===0&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(g){return this._states.jobStatus(g)}jobs(g){return this._states.statusJobs(g)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(g=1){return this._store.__check__(g)}_clearGlobalState(g){return this._scheduled[g]!=null?(clearTimeout(this._scheduled[g].expiration),delete this._scheduled[g],!0):!1}async _free(g,I,N,D){var W,ne;try{if({running:ne}=await this._store.__free__(g,N.weight),this.Events.trigger("debug",`Freed ${N.id}`,D),ne===0&&this.empty())return this.Events.trigger("idle")}catch(Ce){return W=Ce,this.Events.trigger("error",W)}}_run(g,I,N){var D,W,ne;return I.doRun(),D=this._clearGlobalState.bind(this,g),ne=this._run.bind(this,g,I),W=this._free.bind(this,g,I),this._scheduled[g]={timeout:setTimeout(()=>I.doExecute(this._limiter,D,ne,W),N),expiration:I.options.expiration!=null?setTimeout(function(){return I.doExpire(D,ne,W)},N+I.options.expiration):void 0,job:I}}_drainOne(g){return this._registerLock.schedule(()=>{var I,N,D,W,ne;return this.queued()===0?this.Promise.resolve(null):(ne=this._queues.getFirst(),{options:W,args:I}=D=ne.first(),g!=null&&W.weight>g?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${W.id}`,{args:I,options:W}),N=this._randomIndex(),this._store.__register__(N,W.weight,W.expiration).then(({success:Ce,wait:tt,reservoir:nt})=>{var ir;return this.Events.trigger("debug",`Drained ${W.id}`,{success:Ce,args:I,options:W}),Ce?(ne.shift(),ir=this.empty(),ir&&this.Events.trigger("empty"),nt===0&&this.Events.trigger("depleted",ir),this._run(N,D,tt),this.Promise.resolve(W.weight)):this.Promise.resolve(null)})))})}_drainAll(g,I=0){return this._drainOne(g).then(N=>{var D;return N!=null?(D=g!=null?g-N:g,this._drainAll(D,I+N)):this.Promise.resolve(I)}).catch(N=>this.Events.trigger("error",N))}_dropAllQueued(g){return this._queues.shiftAll(function(I){return I.doDrop({message:g})})}stop(g={}){var I,N;return g=ct.load(g,this.stopDefaults),N=D=>{var W;return W=()=>{var ne;return ne=this._states.counts,ne[0]+ne[1]+ne[2]+ne[3]===D},new this.Promise((ne,Ce)=>W()?ne():this.on("done",()=>{if(W())return this.removeAllListeners("done"),ne()}))},I=g.dropWaitingJobs?(this._run=function(D,W){return W.doDrop({message:g.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var D,W,ne;W=this._scheduled;for(D in W)ne=W[D],this.jobStatus(ne.job.options.id)==="RUNNING"&&(clearTimeout(ne.timeout),clearTimeout(ne.expiration),ne.job.doDrop({message:g.dropErrorMessage}));return this._dropAllQueued(g.dropErrorMessage),N(0)}))):this.schedule({priority:Fe-1,weight:0},()=>N(1)),this._receive=function(D){return D._reject(new B.prototype.BottleneckError(g.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new B.prototype.BottleneckError("stop() has already been called")),I}async _addToQueue(g){var I,N,D,W,ne,Ce,tt;({args:I,options:W}=g);try{({reachedHWM:ne,blocked:N,strategy:tt}=await this._store.__submit__(this.queued(),W.weight))}catch(nt){return D=nt,this.Events.trigger("debug",`Could not queue ${W.id}`,{args:I,options:W,error:D}),g.doDrop({error:D}),!1}return N?(g.doDrop(),!0):ne&&(Ce=tt===B.prototype.strategy.LEAK?this._queues.shiftLastFrom(W.priority):tt===B.prototype.strategy.OVERFLOW_PRIORITY?this._queues.shiftLastFrom(W.priority+1):tt===B.prototype.strategy.OVERFLOW?g:void 0,Ce?.doDrop(),Ce==null||tt===B.prototype.strategy.OVERFLOW)?(Ce==null&&g.doDrop(),ne):(g.doQueue(ne,N),this._queues.push(g),await this._drainAll(),ne)}_receive(g){return this._states.jobStatus(g.options.id)!=null?(g._reject(new B.prototype.BottleneckError(`A job with the same id already exists (id=${g.options.id})`)),!1):(g.doReceive(),this._submitLock.schedule(this._addToQueue,g))}submit(...g){var I,N,D,W,ne,Ce,tt;return typeof g[0]=="function"?(ne=g,[N,...g]=ne,[I]=L.call(g,-1),W=ct.load({},this.jobDefaults)):(Ce=g,[W,N,...g]=Ce,[I]=L.call(g,-1),W=ct.load(W,this.jobDefaults)),tt=(...nt)=>new this.Promise(function(ir,On){return N(...nt,function(...ts){return(ts[0]!=null?On:ir)(ts)})}),D=new ie(tt,g,W,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),D.promise.then(function(nt){return typeof I=="function"?I(...nt):void 0}).catch(function(nt){return Array.isArray(nt)?typeof I=="function"?I(...nt):void 0:typeof I=="function"?I(nt):void 0}),this._receive(D)}schedule(...g){var I,N,D;return typeof g[0]=="function"?([D,...g]=g,N={}):[N,D,...g]=g,I=new ie(D,g,N,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(I),I.promise}wrap(g){var I,N;return I=this.schedule.bind(this),N=function(...D){return I(g.bind(this),...D)},N.withOptions=function(D,...W){return I(D,g,...W)},N}async updateSettings(g={}){return await this._store.__updateSettings__(ct.overwrite(g,this.storeDefaults)),ct.overwrite(g,this.instanceDefaults,this),this}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(g=0){return this._store.__incrementReservoir__(g)}}return B.default=B,B.Events=Et,B.version=B.prototype.version=bt.version,B.strategy=B.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},B.BottleneckError=B.prototype.BottleneckError=_,B.Group=B.prototype.Group=Xe,B.RedisConnection=B.prototype.RedisConnection=Q,B.IORedisConnection=B.prototype.IORedisConnection=ce,B.Batcher=B.prototype.Batcher=ot,B.prototype.jobDefaults={priority:lt,weight:1,expiration:null,id:"<no-id>"},B.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:B.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},B.prototype.localStoreDefaults={Promise,timeout:null,heartbeatInterval:250},B.prototype.redisStoreDefaults={Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},B.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise},B.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},B}.call(t);var J=Ne,ue=J;return ue})})(Cu);var Km=Cu.exports;const Ru=Qr(Km);let Jm=class extends Error{name;status;request;response;constructor(e,t,s){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=t,"response"in s&&(this.response=s.response);const n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};async function Iu(r,e,t,s){if(!t.request||!t.request.request)throw t;if(t.status>=400&&!r.doNotRetry.includes(t.status)){const n=s.request.retries!=null?s.request.retries:r.retries,i=Math.pow((s.request.retryCount||0)+1,2);throw e.retry.retryRequest(t,n,i)}throw t}async function Xm(r,e,t,s){const n=new Ru;return n.on("failed",function(i,a){const o=~~i.request.request.retries,l=~~i.request.request.retryAfter;if(s.request.retryCount=a.retryCount+1,o>a.retryCount)return l*r.retryAfterBaseValue}),n.schedule(Qm.bind(null,r,e,t),s)}async function Qm(r,e,t,s){const n=await t(t,s);if(n.data&&n.data.errors&&/Something went wrong while executing your query/.test(n.data.errors[0].message)){const i=new Jm(n.data.errors[0].message,500,{request:s,response:n});return Iu(r,e,i,s)}return n}var Ym="0.0.0-development";function ju(r,e){const t=Object.assign({enabled:!0,retryAfterBaseValue:1e3,doNotRetry:[400,401,403,404,422,451],retries:3},e.retry);return t.enabled&&(r.hook.error("request",Iu.bind(null,t,r)),r.hook.wrap("request",Xm.bind(null,t,r))),{retry:{retryRequest:(s,n,i)=>(s.request.request=Object.assign({},s.request.request,{retries:n,retryAfter:i}),s)}}}ju.VERSION=Ym;var eg="0.0.0-development",ca=()=>Promise.resolve();function tg(r,e,t){return r.retryLimiter.schedule(rg,r,e,t)}async function rg(r,e,t){const s=t.method!=="GET"&&t.method!=="HEAD",{pathname:n}=new URL(t.url,"http://github.test"),i=t.method==="GET"&&n.startsWith("/search/"),a=n.startsWith("/graphql"),l=~~e.retryCount>0?{priority:0,weight:0}:{};r.clustering&&(l.expiration=1e3*60),(s||a)&&await r.write.key(r.id).schedule(l,ca),s&&r.triggersNotification(n)&&await r.notifications.key(r.id).schedule(l,ca),i&&await r.search.key(r.id).schedule(l,ca);const c=r.global.key(r.id).schedule(l,e,t);if(a){const u=await c;if(u.data.errors!=null&&u.data.errors.some(d=>d.type==="RATE_LIMITED"))throw Object.assign(new Error("GraphQL Rate Limit Exceeded"),{response:u,data:u.data})}return c}var sg=["/orgs/{org}/invitations","/orgs/{org}/invitations/{invitation_id}","/orgs/{org}/teams/{team_slug}/discussions","/orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments","/repos/{owner}/{repo}/collaborators/{username}","/repos/{owner}/{repo}/commits/{commit_sha}/comments","/repos/{owner}/{repo}/issues","/repos/{owner}/{repo}/issues/{issue_number}/comments","/repos/{owner}/{repo}/pulls","/repos/{owner}/{repo}/pulls/{pull_number}/comments","/repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies","/repos/{owner}/{repo}/pulls/{pull_number}/merge","/repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers","/repos/{owner}/{repo}/pulls/{pull_number}/reviews","/repos/{owner}/{repo}/releases","/teams/{team_id}/discussions","/teams/{team_id}/discussions/{discussion_number}/comments"];function ng(r){const t=`^(?:${r.map(s=>s.split("/").map(n=>n.startsWith("{")?"(?:.+?)":n).join("/")).map(s=>`(?:${s})`).join("|")})[^/]*$`;return new RegExp(t,"i")}var Jl=ng(sg),Nu=Jl.test.bind(Jl),ms={},ig=function(r,e){ms.global=new r.Group({id:"octokit-global",maxConcurrent:10,...e}),ms.search=new r.Group({id:"octokit-search",maxConcurrent:1,minTime:2e3,...e}),ms.write=new r.Group({id:"octokit-write",maxConcurrent:1,minTime:1e3,...e}),ms.notifications=new r.Group({id:"octokit-notifications",maxConcurrent:1,minTime:3e3,...e})};function Po(r,e){const{enabled:t=!0,Bottleneck:s=Ru,id:n="no-id",timeout:i=1e3*60*2,connection:a}=e.throttle||{};if(!t)return{};const o={connection:a,timeout:i};ms.global==null&&ig(s,o);const l=Object.assign({clustering:a!=null,triggersNotification:Nu,fallbackSecondaryRateRetryAfter:60,retryAfterBaseValue:1e3,retryLimiter:new s,id:n,...ms},e.throttle);if(typeof l.onSecondaryRateLimit!="function"||typeof l.onRateLimit!="function")throw new Error(`octokit/plugin-throttling error:
        You must pass the onSecondaryRateLimit and onRateLimit error handlers.
        See https://octokit.github.io/rest.js/#throttling

        const octokit = new Octokit({
          throttle: {
            onSecondaryRateLimit: (retryAfter, options) => {/* ... */},
            onRateLimit: (retryAfter, options) => {/* ... */}
          }
        })
    `);const c={},u=new s.Events(c);return c.on("secondary-limit",l.onSecondaryRateLimit),c.on("rate-limit",l.onRateLimit),c.on("error",d=>r.log.warn("Error in throttling-plugin limit handler",d)),l.retryLimiter.on("failed",async function(d,h){const[f,m,b]=h.args,{pathname:_}=new URL(b.url,"http://github.test");if(!(_.startsWith("/graphql")&&d.status!==401||d.status===403))return;const w=~~m.retryCount;m.retryCount=w,b.request.retryCount=w;const{wantRetry:T,retryAfter:E=0}=await async function(){if(/\bsecondary rate\b/i.test(d.message)){const k=Number(d.response.headers["retry-after"])||f.fallbackSecondaryRateRetryAfter;return{wantRetry:await u.trigger("secondary-limit",k,b,r,w),retryAfter:k}}if(d.response.headers!=null&&d.response.headers["x-ratelimit-remaining"]==="0"||(d.response.data?.errors??[]).some(k=>k.type==="RATE_LIMITED")){const k=new Date(~~d.response.headers["x-ratelimit-reset"]*1e3).getTime(),x=Math.max(Math.ceil((k-Date.now())/1e3)+1,0);return{wantRetry:await u.trigger("rate-limit",x,b,r,w),retryAfter:x}}return{}}();if(T)return m.retryCount++,E*f.retryAfterBaseValue}),r.hook.wrap("request",tg.bind(null,l)),{}}Po.VERSION=eg;Po.triggersNotification=Nu;const ag="11.0.1",og={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repositories/{repository_id}/environments/{environment_name}/variables"],createOrUpdateEnvironmentSecret:["PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repositories/{repository_id}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repositories/{repository_id}/environments/{environment_name}/variables"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repositories/{repository_id}/environments/{environment_name}/variables/{name}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.cancelImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#cancel-an-import"}],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors",{},{deprecated:"octokit.rest.migrations.getCommitAuthors() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-commit-authors"}],getImportStatus:["GET /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.getImportStatus() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-an-import-status"}],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files",{},{deprecated:"octokit.rest.migrations.getLargeFiles() is deprecated, see https://docs.github.com/rest/migrations/source-imports#get-large-files"}],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}",{},{deprecated:"octokit.rest.migrations.mapCommitAuthor() is deprecated, see https://docs.github.com/rest/migrations/source-imports#map-a-commit-author"}],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs",{},{deprecated:"octokit.rest.migrations.setLfsPreference() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-git-lfs-preference"}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.startImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#start-an-import"}],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"],updateImport:["PATCH /repos/{owner}/{repo}/import",{},{deprecated:"octokit.rest.migrations.updateImport() is deprecated, see https://docs.github.com/rest/migrations/source-imports#update-an-import"}]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}"],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createCustomOrganizationRole:["POST /orgs/{org}/organization-roles"],createInvitation:["POST /orgs/{org}/invitations"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteCustomOrganizationRole:["DELETE /orgs/{org}/organization-roles/{role_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}"],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers"],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],patchCustomOrganizationRole:["PATCH /orgs/{org}/organization-roles/{role_id}"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}"],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}"],createCard:["POST /projects/columns/{column_id}/cards"],createColumn:["POST /projects/{project_id}/columns"],createForAuthenticatedUser:["POST /user/projects"],createForOrg:["POST /orgs/{org}/projects"],createForRepo:["POST /repos/{owner}/{repo}/projects"],delete:["DELETE /projects/{project_id}"],deleteCard:["DELETE /projects/columns/cards/{card_id}"],deleteColumn:["DELETE /projects/columns/{column_id}"],get:["GET /projects/{project_id}"],getCard:["GET /projects/columns/cards/{card_id}"],getColumn:["GET /projects/columns/{column_id}"],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission"],listCards:["GET /projects/columns/{column_id}/cards"],listCollaborators:["GET /projects/{project_id}/collaborators"],listColumns:["GET /projects/{project_id}/columns"],listForOrg:["GET /orgs/{org}/projects"],listForRepo:["GET /repos/{owner}/{repo}/projects"],listForUser:["GET /users/{username}/projects"],moveCard:["POST /projects/columns/cards/{card_id}/moves"],moveColumn:["POST /projects/columns/{column_id}/moves"],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}"],update:["PATCH /projects/{project_id}"],updateCard:["PATCH /projects/columns/cards/{card_id}"],updateColumn:["PATCH /projects/columns/{column_id}"]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createTagProtection:["POST /repos/{owner}/{repo}/tags/protection"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteTagProtection:["DELETE /repos/{owner}/{repo}/tags/protection/{tag_protection_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTagProtection:["GET /repos/{owner}/{repo}/tags/protection"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}"],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}"],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects"],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}};var lg=og;const Ur=new Map;for(const[r,e]of Object.entries(lg))for(const[t,s]of Object.entries(e)){const[n,i,a]=s,[o,l]=n.split(/ /),c=Object.assign({method:o,url:l},i);Ur.has(r)||Ur.set(r,new Map),Ur.get(r).set(t,{scope:r,methodName:t,endpointDefaults:c,decorations:a})}const cg={has({scope:r},e){return Ur.get(r).has(e)},getOwnPropertyDescriptor(r,e){return{value:this.get(r,e),configurable:!0,writable:!0,enumerable:!0}},defineProperty(r,e,t){return Object.defineProperty(r.cache,e,t),!0},deleteProperty(r,e){return delete r.cache[e],!0},ownKeys({scope:r}){return[...Ur.get(r).keys()]},set(r,e,t){return r.cache[e]=t},get({octokit:r,scope:e,cache:t},s){if(t[s])return t[s];const n=Ur.get(e).get(s);if(!n)return;const{endpointDefaults:i,decorations:a}=n;return a?t[s]=dg(r,e,s,i,a):t[s]=r.request.defaults(i),t[s]}};function ug(r){const e={};for(const t of Ur.keys())e[t]=new Proxy({octokit:r,scope:t,cache:{}},cg);return e}function dg(r,e,t,s,n){const i=r.request.defaults(s);function a(...o){let l=i.endpoint.merge(...o);if(n.mapToData)return l=Object.assign({},l,{data:l[n.mapToData],[n.mapToData]:void 0}),i(l);if(n.renamed){const[c,u]=n.renamed;r.log.warn(`octokit.${e}.${t}() has been renamed to octokit.${c}.${u}()`)}if(n.deprecated&&r.log.warn(n.deprecated),n.renamedParameters){const c=i.endpoint.merge(...o);for(const[u,d]of Object.entries(n.renamedParameters))u in c&&(r.log.warn(`"${u}" parameter is deprecated for "octokit.${e}.${t}()". Use "${d}" instead`),d in c||(c[d]=c[u]),delete c[u]);return i(c)}return i(...o)}return Object.assign(a,i)}function $u(r){return{rest:ug(r)}}$u.VERSION=ag;function Rs(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}const hg=Object.freeze(Object.defineProperty({__proto__:null,getUserAgent:Rs},Symbol.toStringTag,{value:"Module"})),pg=Cs(hg);var fg="9.0.4",mg=`octokit-endpoint.js/${fg} ${Rs()}`,gg={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":mg},mediaType:{format:""}};function bg(r){return r?Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=r[t],e),{}):{}}function _g(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function Lu(r,e){const t=Object.assign({},r);return Object.keys(e).forEach(s=>{_g(e[s])?s in r?t[s]=Lu(r[s],e[s]):Object.assign(t,{[s]:e[s]}):Object.assign(t,{[s]:e[s]})}),t}function Xl(r){for(const e in r)r[e]===void 0&&delete r[e];return r}function $a(r,e,t){if(typeof e=="string"){let[n,i]=e.split(" ");t=Object.assign(i?{method:n,url:i}:{url:n},t)}else t=Object.assign({},e);t.headers=bg(t.headers),Xl(t),Xl(t.headers);const s=Lu(r||{},t);return t.url==="/graphql"&&(r&&r.mediaType.previews?.length&&(s.mediaType.previews=r.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function yg(r,e){const t=/\?/.test(r)?"&":"?",s=Object.keys(e);return s.length===0?r:r+t+s.map(n=>n==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(e[n])}`).join("&")}var wg=/\{[^}]+\}/g;function vg(r){return r.replace(/^\W+|\W+$/g,"").split(/,/)}function Eg(r){const e=r.match(wg);return e?e.map(vg).reduce((t,s)=>t.concat(s),[]):[]}function Ql(r,e){const t={__proto__:null};for(const s of Object.keys(r))e.indexOf(s)===-1&&(t[s]=r[s]);return t}function Du(r){return r.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function gs(r){return encodeURIComponent(r).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Us(r,e,t){return e=r==="+"||r==="#"?Du(e):gs(e),t?gs(t)+"="+e:e}function is(r){return r!=null}function ua(r){return r===";"||r==="&"||r==="?"}function Tg(r,e,t,s){var n=r[t],i=[];if(is(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),i.push(Us(e,n,ua(e)?t:""));else if(s==="*")Array.isArray(n)?n.filter(is).forEach(function(a){i.push(Us(e,a,ua(e)?t:""))}):Object.keys(n).forEach(function(a){is(n[a])&&i.push(Us(e,n[a],a))});else{const a=[];Array.isArray(n)?n.filter(is).forEach(function(o){a.push(Us(e,o))}):Object.keys(n).forEach(function(o){is(n[o])&&(a.push(gs(o)),a.push(Us(e,n[o].toString())))}),ua(e)?i.push(gs(t)+"="+a.join(",")):a.length!==0&&i.push(a.join(","))}else e===";"?is(n)&&i.push(gs(t)):n===""&&(e==="&"||e==="?")?i.push(gs(t)+"="):n===""&&i.push("");return i}function kg(r){return{expand:Ag.bind(null,r)}}function Ag(r,e){var t=["+","#",".","/",";","?","&"];return r=r.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,i){if(n){let o="";const l=[];if(t.indexOf(n.charAt(0))!==-1&&(o=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(Tg(e,o,u[1],u[2]||u[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(l.length!==0?o:"")+l.join(a)}else return l.join(",")}else return Du(i)}),r==="/"?r:r.replace(/\/$/,"")}function Mu(r){let e=r.method.toUpperCase(),t=(r.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},r.headers),n,i=Ql(r,["method","baseUrl","url","headers","request","mediaType"]);const a=Eg(t);t=kg(t).expand(i),/^http/.test(t)||(t=r.baseUrl+t);const o=Object.keys(r).filter(u=>a.includes(u)).concat("baseUrl"),l=Ql(i,o);if(!/application\/octet-stream/i.test(s.accept)&&(r.mediaType.format&&(s.accept=s.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${r.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&r.mediaType.previews?.length)){const u=s.accept.match(/[\w-]+(?=-preview)/g)||[];s.accept=u.concat(r.mediaType.previews).map(d=>{const h=r.mediaType.format?`.${r.mediaType.format}`:"+json";return`application/vnd.github.${d}-preview${h}`}).join(",")}return["GET","HEAD"].includes(e)?t=yg(t,l):"data"in l?n=l.data:Object.keys(l).length&&(n=l),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof n>"u"&&(n=""),Object.assign({method:e,url:t,headers:s},typeof n<"u"?{body:n}:null,r.request?{request:r.request}:null)}function Og(r,e,t){return Mu($a(r,e,t))}function Fu(r,e){const t=$a(r,e),s=Og.bind(null,t);return Object.assign(s,{DEFAULTS:t,defaults:Fu.bind(null,t),merge:$a.bind(null,t),parse:Mu})}var Sg=Fu(null,gg);class La extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}const Pg=Object.freeze(Object.defineProperty({__proto__:null,Deprecation:La},Symbol.toStringTag,{value:"Module"}));var xo={exports:{}},xg=Uu;function Uu(r,e){if(r&&e)return Uu(r)(e);if(typeof r!="function")throw new TypeError("need wrapper function");return Object.keys(r).forEach(function(s){t[s]=r[s]}),t;function t(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];var i=r.apply(this,s),a=s[s.length-1];return typeof i=="function"&&i!==a&&Object.keys(a).forEach(function(o){i[o]=a[o]}),i}}var Gu=xg;xo.exports=Gu($n);xo.exports.strict=Gu(Bu);$n.proto=$n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return $n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Bu(this)},configurable:!0})});function $n(r){var e=function(){return e.called?e.value:(e.called=!0,e.value=r.apply(this,arguments))};return e.called=!1,e}function Bu(r){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=r.apply(this,arguments)},t=r.name||"Function wrapped with `once`";return e.onceError=t+" shouldn't be called more than once",e.called=!1,e}var Cg=xo.exports;const zu=Qr(Cg);var Rg=zu(r=>console.warn(r)),Ig=zu(r=>console.warn(r)),cs=class extends Error{constructor(r,e,t){super(r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=e;let s;"headers"in t&&typeof t.headers<"u"&&(s=t.headers),"response"in t&&(this.response=t.response,s=t.response.headers);const n=Object.assign({},t.request);t.request.headers.authorization&&(n.headers=Object.assign({},t.request.headers,{authorization:t.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n,Object.defineProperty(this,"code",{get(){return Rg(new La("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),e}}),Object.defineProperty(this,"headers",{get(){return Ig(new La("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),s||{}}})}},jg="8.1.6";function Ng(r){if(typeof r!="object"||r===null||Object.prototype.toString.call(r)!=="[object Object]")return!1;const e=Object.getPrototypeOf(r);if(e===null)return!0;const t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(r)}function $g(r){return r.arrayBuffer()}function Yl(r){const e=r.request&&r.request.log?r.request.log:console,t=r.request?.parseSuccessResponseBody!==!1;(Ng(r.body)||Array.isArray(r.body))&&(r.body=JSON.stringify(r.body));let s={},n,i,{fetch:a}=globalThis;if(r.request?.fetch&&(a=r.request.fetch),!a)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return a(r.url,{method:r.method,body:r.body,headers:r.headers,signal:r.request?.signal,...r.body&&{duplex:"half"}}).then(async o=>{i=o.url,n=o.status;for(const l of o.headers)s[l[0]]=l[1];if("deprecation"in s){const l=s.link&&s.link.match(/<([^>]+)>; rel="deprecation"/),c=l&&l.pop();e.warn(`[@octokit/request] "${r.method} ${r.url}" is deprecated. It is scheduled to be removed on ${s.sunset}${c?`. See ${c}`:""}`)}if(!(n===204||n===205)){if(r.method==="HEAD"){if(n<400)return;throw new cs(o.statusText,n,{response:{url:i,status:n,headers:s,data:void 0},request:r})}if(n===304)throw new cs("Not modified",n,{response:{url:i,status:n,headers:s,data:await da(o)},request:r});if(n>=400){const l=await da(o);throw new cs(Lg(l),n,{response:{url:i,status:n,headers:s,data:l},request:r})}return t?await da(o):o.body}}).then(o=>({status:n,url:i,headers:s,data:o})).catch(o=>{if(o instanceof cs)throw o;if(o.name==="AbortError")throw o;let l=o.message;throw o.name==="TypeError"&&"cause"in o&&(o.cause instanceof Error?l=o.cause.message:typeof o.cause=="string"&&(l=o.cause)),new cs(l,500,{request:r})})}async function da(r){const e=r.headers.get("content-type");return/application\/json/.test(e)?r.json().catch(()=>r.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?r.text():$g(r)}function Lg(r){return typeof r=="string"?r:"message"in r?Array.isArray(r.errors)?`${r.message}: ${r.errors.map(JSON.stringify).join(", ")}`:r.message:`Unknown error: ${JSON.stringify(r)}`}function Da(r,e){const t=r.defaults(e);return Object.assign(function(n,i){const a=t.merge(n,i);if(!a.request||!a.request.hook)return Yl(t.parse(a));const o=(l,c)=>Yl(t.parse(t.merge(l,c)));return Object.assign(o,{endpoint:t,defaults:Da.bind(null,t)}),a.request.hook(o,a)},{endpoint:t,defaults:Da.bind(null,t)})}var Lt=Da(Sg,{headers:{"user-agent":`octokit-request.js/${jg} ${Rs()}`}});const Dg=Object.freeze(Object.defineProperty({__proto__:null,request:Lt},Symbol.toStringTag,{value:"Module"})),Mg=Cs(Dg);var Fg=function(e){return btoa(e)};const es=Qr(Fg);function Ug(r){const e=r.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}async function Di(r,e,t){const s={baseUrl:Ug(r),headers:{accept:"application/json"},...t},n=await r(e,s);if("error"in n.data){const i=new cs(`${n.data.error_description} (${n.data.error}, ${n.data.error_uri})`,400,{request:r.endpoint.merge(e,s),headers:n.headers});throw i.response=n,i}return n}async function Gg(r){const e=r.request||Lt,t=await Di(e,"POST /login/oauth/access_token",{client_id:r.clientId,client_secret:r.clientSecret,code:r.code,redirect_uri:r.redirectUrl}),s={clientType:r.clientType,clientId:r.clientId,clientSecret:r.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(r.clientType==="github-app"){if("refresh_token"in t.data){const n=new Date(t.headers.date).getTime();s.refreshToken=t.data.refresh_token,s.expiresAt=ec(n,t.data.expires_in),s.refreshTokenExpiresAt=ec(n,t.data.refresh_token_expires_in)}delete s.scopes}return{...t,authentication:s}}function ec(r,e){return new Date(r+e*1e3).toISOString()}async function Bg(r){const e=r.request||Lt,t={client_id:r.clientId};return"scopes"in r&&Array.isArray(r.scopes)&&(t.scope=r.scopes.join(" ")),Di(e,"POST /login/device/code",t)}async function tc(r){const e=r.request||Lt,t=await Di(e,"POST /login/oauth/access_token",{client_id:r.clientId,device_code:r.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),s={clientType:r.clientType,clientId:r.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in r&&(s.clientSecret=r.clientSecret),r.clientType==="github-app"){if("refresh_token"in t.data){const n=new Date(t.headers.date).getTime();s.refreshToken=t.data.refresh_token,s.expiresAt=rc(n,t.data.expires_in),s.refreshTokenExpiresAt=rc(n,t.data.refresh_token_expires_in)}delete s.scopes}return{...t,authentication:s}}function rc(r,e){return new Date(r+e*1e3).toISOString()}async function zg(r){const t=await(r.request||Lt)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${es(`${r.clientId}:${r.clientSecret}`)}`},client_id:r.clientId,access_token:r.token}),s={clientType:r.clientType,clientId:r.clientId,clientSecret:r.clientSecret,token:r.token,scopes:t.data.scopes};return t.data.expires_at&&(s.expiresAt=t.data.expires_at),r.clientType==="github-app"&&delete s.scopes,{...t,authentication:s}}async function Hg(r){const e=r.request||Lt,t=await Di(e,"POST /login/oauth/access_token",{client_id:r.clientId,client_secret:r.clientSecret,grant_type:"refresh_token",refresh_token:r.refreshToken}),s=new Date(t.headers.date).getTime(),n={clientType:"github-app",clientId:r.clientId,clientSecret:r.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:sc(s,t.data.expires_in),refreshTokenExpiresAt:sc(s,t.data.refresh_token_expires_in)};return{...t,authentication:n}}function sc(r,e){return new Date(r+e*1e3).toISOString()}async function qg(r){const e=r.request||Lt,t=es(`${r.clientId}:${r.clientSecret}`),s=await e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:r.clientId,access_token:r.token}),n={clientType:r.clientType,clientId:r.clientId,clientSecret:r.clientSecret,token:s.data.token,scopes:s.data.scopes};return s.data.expires_at&&(n.expiresAt=s.data.expires_at),r.clientType==="github-app"&&delete n.scopes,{...s,authentication:n}}async function Vg(r){const e=r.request||Lt,t=es(`${r.clientId}:${r.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:r.clientId,access_token:r.token})}async function Wg(r){const e=r.request||Lt,t=es(`${r.clientId}:${r.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:r.clientId,access_token:r.token})}async function Hu(r,e){const t=Zg(r,e.auth);if(t)return t;const{data:s}=await Bg({clientType:r.clientType,clientId:r.clientId,request:e.request||r.request,scopes:e.auth.scopes||r.scopes});await r.onVerification(s);const n=await Ma(e.request||r.request,r.clientId,r.clientType,s);return r.authentication=n,n}function Zg(r,e){if(e.refresh===!0||!r.authentication)return!1;if(r.clientType==="github-app")return r.authentication;const t=r.authentication,s=("scopes"in e&&e.scopes||r.scopes).join(" "),n=t.scopes.join(" ");return s===n?t:!1}async function nc(r){await new Promise(e=>setTimeout(e,r*1e3))}async function Ma(r,e,t,s){try{const n={clientId:e,request:r,code:s.device_code},{authentication:i}=t==="oauth-app"?await tc({...n,clientType:"oauth-app"}):await tc({...n,clientType:"github-app"});return{type:"token",tokenType:"oauth",...i}}catch(n){if(!n.response)throw n;const i=n.response.data.error;if(i==="authorization_pending")return await nc(s.interval),Ma(r,e,t,s);if(i==="slow_down")return await nc(s.interval+5),Ma(r,e,t,s);throw n}}async function Kg(r,e){return Hu(r,{auth:e})}async function Jg(r,e,t,s){let n=e.endpoint.merge(t,s);if(/\/login\/(oauth\/access_token|device\/code)$/.test(n.url))return e(n);const{token:i}=await Hu(r,{request:e,auth:{type:"oauth"}});return n.headers.authorization=`token ${i}`,e(n)}var Xg="6.0.1";function Qg(r){const e=r.request||Lt.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${Xg} ${Rs()}`}}),{request:t=e,...s}=r,n=r.clientType==="github-app"?{...s,clientType:"github-app",request:t}:{...s,clientType:"oauth-app",request:t,scopes:r.scopes||[]};if(!r.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!r.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(Kg.bind(null,n),{hook:Jg.bind(null,n)})}var qu="4.0.1";async function ic(r){if("code"in r.strategyOptions){const{authentication:e}=await Gg({clientId:r.clientId,clientSecret:r.clientSecret,clientType:r.clientType,onTokenCreated:r.onTokenCreated,...r.strategyOptions,request:r.request});return{type:"token",tokenType:"oauth",...e}}if("onVerification"in r.strategyOptions){const t=await Qg({clientType:r.clientType,clientId:r.clientId,onTokenCreated:r.onTokenCreated,...r.strategyOptions,request:r.request})({type:"oauth"});return{clientSecret:r.clientSecret,...t}}if("token"in r.strategyOptions)return{type:"token",tokenType:"oauth",clientId:r.clientId,clientSecret:r.clientSecret,clientType:r.clientType,onTokenCreated:r.onTokenCreated,...r.strategyOptions};throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")}async function Fa(r,e={}){if(r.authentication||(r.authentication=r.clientType==="oauth-app"?await ic(r):await ic(r)),r.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");const t=r.authentication;if("expiresAt"in t&&(e.type==="refresh"||new Date(t.expiresAt)<new Date)){const{authentication:s}=await Hg({clientType:"github-app",clientId:r.clientId,clientSecret:r.clientSecret,refreshToken:t.refreshToken,request:r.request});r.authentication={tokenType:"oauth",type:"token",...s}}if(e.type==="refresh"){if(r.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!t.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");await r.onTokenCreated?.(r.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){const s=e.type==="check"?zg:qg;try{const{authentication:n}=await s({clientType:r.clientType,clientId:r.clientId,clientSecret:r.clientSecret,token:r.authentication.token,request:r.request});return r.authentication={tokenType:"oauth",type:"token",...n},e.type==="reset"&&await r.onTokenCreated?.(r.authentication,{type:e.type}),r.authentication}catch(n){throw n.status===404&&(n.message="[@octokit/auth-oauth-user] Token is invalid",r.authentication.invalid=!0),n}}if(e.type==="delete"||e.type==="deleteAuthorization"){const s=e.type==="delete"?Vg:Wg;try{await s({clientType:r.clientType,clientId:r.clientId,clientSecret:r.clientSecret,token:r.authentication.token,request:r.request})}catch(n){if(n.status!==404)throw n}return r.authentication.invalid=!0,r.authentication}return r.authentication}var Yg=/\/applications\/[^/]+\/(token|grant)s?/;function Co(r){return r&&Yg.test(r)}async function eb(r,e,t,s={}){const n=e.endpoint.merge(t,s);if(/\/login\/(oauth\/access_token|device\/code)$/.test(n.url))return e(n);if(Co(n.url)){const a=es(`${r.clientId}:${r.clientSecret}`);return n.headers.authorization=`basic ${a}`,e(n)}const{token:i}=r.clientType==="oauth-app"?await Fa({...r,request:e}):await Fa({...r,request:e});return n.headers.authorization="token "+i,e(n)}function Ys({clientId:r,clientSecret:e,clientType:t="oauth-app",request:s=Lt.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${qu} ${Rs()}`}}),onTokenCreated:n,...i}){const a=Object.assign({clientType:t,clientId:r,clientSecret:e,onTokenCreated:n,strategyOptions:i,request:s});return Object.assign(Fa.bind(null,a),{hook:eb.bind(null,a)})}Ys.VERSION=qu;const tb=Object.freeze(Object.defineProperty({__proto__:null,createOAuthUserAuth:Ys,requiresBasicAuth:Co},Symbol.toStringTag,{value:"Module"}));async function rb(r,e){if(e.type==="oauth-app")return{type:"oauth-app",clientId:r.clientId,clientSecret:r.clientSecret,clientType:r.clientType,headers:{authorization:`basic ${es(`${r.clientId}:${r.clientSecret}`)}`}};if("factory"in e){const{type:n,...i}={...e,...r};return e.factory(i)}const t={clientId:r.clientId,clientSecret:r.clientSecret,request:r.request,...e};return(r.clientType==="oauth-app"?await Ys({...t,clientType:r.clientType}):await Ys({...t,clientType:r.clientType}))()}async function sb(r,e,t,s){let n=e.endpoint.merge(t,s);if(/\/login\/(oauth\/access_token|device\/code)$/.test(n.url))return e(n);if(r.clientType==="github-app"&&!Co(n.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${n.method} ${n.url}" is not supported.`);const i=es(`${r.clientId}:${r.clientSecret}`);n.headers.authorization=`basic ${i}`;try{return await e(n)}catch(a){throw a.status!==401||(a.message=`[@octokit/auth-oauth-app] "${n.method} ${n.url}" does not support clientId/clientSecret basic authentication.`),a}}var nb="7.0.1";function ib(r){const e=Object.assign({request:Lt.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${nb} ${Rs()}`}}),clientType:"oauth-app"},r);return Object.assign(rb.bind(null,e),{hook:sb.bind(null,e)})}const ab=Object.freeze(Object.defineProperty({__proto__:null,createOAuthAppAuth:ib,createOAuthUserAuth:Ys},Symbol.toStringTag,{value:"Module"})),Vu=Cs(ab),ob=Cs(Pg);function ac(r,e,t,s,n,i,a){try{var o=r[i](a),l=o.value}catch(c){return void t(c)}o.done?e(l):Promise.resolve(l).then(s,n)}function Wu(r){return function(){var e=this,t=arguments;return new Promise(function(s,n){var i=r.apply(e,t);function a(l){ac(i,s,n,a,o,"next",l)}function o(l){ac(i,s,n,a,o,"throw",l)}a(void 0)})}}function oc(r){for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),s=0,n=r.length;s<n;s++)t[s]=r.charCodeAt(s);return e}function Zu(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lc(r){return Zu(btoa(JSON.stringify(r)))}var lb=function(){var r=Wu(function*(e){var{privateKey:t,payload:s}=e;if(/BEGIN RSA PRIVATE KEY/.test(t))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#readme");var n,i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=(n=t.trim().split(`
`).slice(1,-1).join(""),oc(atob(n))),o=yield crypto.subtle.importKey("pkcs8",a,i,!1,["sign"]),l=function(d,h){return"".concat(lc(d),".").concat(lc(h))}({alg:"RS256",typ:"JWT"},s),c=oc(l),u=function(d){for(var h="",f=new Uint8Array(d),m=f.byteLength,b=0;b<m;b++)h+=String.fromCharCode(f[b]);return Zu(btoa(h))}(yield crypto.subtle.sign(i.name,o,c));return"".concat(l,".").concat(u)});return function(e){return r.apply(this,arguments)}}();function cb(r){return Ku.apply(this,arguments)}function Ku(){return(Ku=Wu(function*(r){var{id:e,privateKey:t,now:s=Math.floor(Date.now()/1e3)}=r,n=s-30,i=n+600,a={iat:n,exp:i,iss:e};return{appId:e,expiration:i,token:yield lb({privateKey:t,payload:a})}})).apply(this,arguments)}const ub=Object.freeze(Object.defineProperty({__proto__:null,githubAppJwt:cb},Symbol.toStringTag,{value:"Module"})),db=Cs(ub);var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.LRUCache=void 0;const as=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Ju=new Set,Ua=typeof process=="object"&&process?process:{},Xu=(r,e,t,s)=>{typeof Ua.emitWarning=="function"?Ua.emitWarning(r,e,t,s):console.error(`[${t}] ${e}: ${r}`)};let Vn=globalThis.AbortController,cc=globalThis.AbortSignal;if(typeof Vn>"u"){cc=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,n){this._onabort.push(n)}},Vn=class{constructor(){e()}signal=new cc;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(const n of this.signal._onabort)n(s);this.signal.onabort?.(s)}}};let r=Ua.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=()=>{r&&(r=!1,Xu("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const hb=r=>!Ju.has(r),_r=r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),Qu=r=>_r(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Ln:null:null;class Ln extends Array{constructor(e){super(e),this.fill(0)}}class bs{heap;length;static#l=!1;static create(e){const t=Qu(e);if(!t)return[];bs.#l=!0;const s=new bs(e,t);return bs.#l=!1,s}constructor(e,t){if(!bs.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Ro{#l;#d;#m;#g;#x;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#b;#s;#r;#e;#c;#h;#o;#i;#_;#a;#y;#w;#p;#v;#A;#u;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#p,sizes:e.#y,keyMap:e.#s,keyList:e.#r,valList:e.#e,next:e.#c,prev:e.#h,get head(){return e.#o},get tail(){return e.#i},free:e.#_,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,s,n,i)=>e.#I(t,s,n,i),moveToTail:t=>e.#P(t),indexes:t=>e.#E(t),rindexes:t=>e.#T(t),isStale:t=>e.#f(t)}}get max(){return this.#l}get maxSize(){return this.#d}get calculatedSize(){return this.#b}get size(){return this.#n}get fetchMethod(){return this.#x}get dispose(){return this.#m}get disposeAfter(){return this.#g}constructor(e){const{max:t=0,ttl:s,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:a,updateAgeOnHas:o,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:m=0,sizeCalculation:b,fetchMethod:_,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:w,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:E,ignoreFetchAbort:k}=e;if(t!==0&&!_r(t))throw new TypeError("max option must be a nonnegative integer");const x=t?Qu(t):Array;if(!x)throw new Error("invalid max value: "+t);if(this.#l=t,this.#d=f,this.maxEntrySize=m||this.#d,this.sizeCalculation=b,this.sizeCalculation){if(!this.#d&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(_!==void 0&&typeof _!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#x=_,this.#A=!!_,this.#s=new Map,this.#r=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#c=new x(t),this.#h=new x(t),this.#o=0,this.#i=0,this.#_=bs.create(t),this.#n=0,this.#b=0,typeof c=="function"&&(this.#m=c),typeof u=="function"?(this.#g=u,this.#a=[]):(this.#g=void 0,this.#a=void 0),this.#v=!!this.#m,this.#u=!!this.#g,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(this.#d!==0&&!_r(this.#d))throw new TypeError("maxSize must be a positive integer if specified");if(!_r(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!w,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!o,this.ttlResolution=_r(n)||n===0?n:1,this.ttlAutopurge=!!i,this.ttl=s||0,this.ttl){if(!_r(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#j()}if(this.#l===0&&this.ttl===0&&this.#d===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#d){const C="LRU_CACHE_UNBOUNDED";hb(C)&&(Ju.add(C),Xu("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",C,Ro))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#j(){const e=new Ln(this.#l),t=new Ln(this.#l);this.#p=e,this.#w=t,this.#N=(i,a,o=as.now())=>{if(t[i]=a!==0?o:0,e[i]=a,a!==0&&this.ttlAutopurge){const l=setTimeout(()=>{this.#f(i)&&this.delete(this.#r[i])},a+1);l.unref&&l.unref()}},this.#O=i=>{t[i]=e[i]!==0?as.now():0},this.#k=(i,a)=>{if(e[a]){const o=e[a],l=t[a];if(!o||!l)return;i.ttl=o,i.start=l,i.now=s||n();const c=i.now-l;i.remainingTTL=o-c}};let s=0;const n=()=>{const i=as.now();if(this.ttlResolution>0){s=i;const a=setTimeout(()=>s=0,this.ttlResolution);a.unref&&a.unref()}return i};this.getRemainingTTL=i=>{const a=this.#s.get(i);if(a===void 0)return 0;const o=e[a],l=t[a];if(!o||!l)return 1/0;const c=(s||n())-l;return o-c},this.#f=i=>{const a=t[i],o=e[i];return!!o&&!!a&&(s||n())-a>o}}#O=()=>{};#k=()=>{};#N=()=>{};#f=()=>!1;#M(){const e=new Ln(this.#l);this.#b=0,this.#y=e,this.#S=t=>{this.#b-=e[t],e[t]=0},this.#$=(t,s,n,i)=>{if(this.#t(s))return 0;if(!_r(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(s,t),!_r(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#C=(t,s,n)=>{if(e[t]=s,this.#d){const i=this.#d-e[t];for(;this.#b>i;)this.#R(!0)}this.#b+=e[t],n&&(n.entrySize=s,n.totalCalculatedSize=this.#b)}}#S=e=>{};#C=(e,t,s)=>{};#$=(e,t,s,n)=>{if(s||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#n)for(let t=this.#i;!(!this.#L(t)||((e||!this.#f(t))&&(yield t),t===this.#o));)t=this.#h[t]}*#T({allowStale:e=this.allowStale}={}){if(this.#n)for(let t=this.#o;!(!this.#L(t)||((e||!this.#f(t))&&(yield t),t===this.#i));)t=this.#c[t]}#L(e){return e!==void 0&&this.#s.get(this.#r[e])===e}*entries(){for(const e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(const e of this.#T())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(const e of this.#E()){const t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(const e of this.#T()){const t=this.#r[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(const e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#T())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const s of this.#E()){const n=this.#e[s],i=this.#t(n)?n.__staleWhileFetching:n;if(i!==void 0&&e(i,this.#r[s],this))return this.get(this.#r[s],t)}}forEach(e,t=this){for(const s of this.#E()){const n=this.#e[s],i=this.#t(n)?n.__staleWhileFetching:n;i!==void 0&&e.call(t,i,this.#r[s],this)}}rforEach(e,t=this){for(const s of this.#T()){const n=this.#e[s],i=this.#t(n)?n.__staleWhileFetching:n;i!==void 0&&e.call(t,i,this.#r[s],this)}}purgeStale(){let e=!1;for(const t of this.#T({allowStale:!0}))this.#f(t)&&(this.delete(this.#r[t]),e=!0);return e}info(e){const t=this.#s.get(e);if(t===void 0)return;const s=this.#e[t],n=this.#t(s)?s.__staleWhileFetching:s;if(n===void 0)return;const i={value:n};if(this.#p&&this.#w){const a=this.#p[t],o=this.#w[t];if(a&&o){const l=a-(as.now()-o);i.ttl=l,i.start=Date.now()}}return this.#y&&(i.size=this.#y[t]),i}dump(){const e=[];for(const t of this.#E({allowStale:!0})){const s=this.#r[t],n=this.#e[t],i=this.#t(n)?n.__staleWhileFetching:n;if(i===void 0||s===void 0)continue;const a={value:i};if(this.#p&&this.#w){a.ttl=this.#p[t];const o=as.now()-this.#w[t];a.start=Math.floor(Date.now()-o)}this.#y&&(a.size=this.#y[t]),e.unshift([s,a])}return e}load(e){this.clear();for(const[t,s]of e){if(s.start){const n=Date.now()-s.start;s.start=as.now()-n}this.set(t,s.value,s)}}set(e,t,s={}){if(t===void 0)return this.delete(e),this;const{ttl:n=this.ttl,start:i,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:l}=s;let{noUpdateTTL:c=this.noUpdateTTL}=s;const u=this.#$(e,t,s.size||0,o);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.delete(e),this;let d=this.#n===0?void 0:this.#s.get(e);if(d===void 0)d=this.#n===0?this.#i:this.#_.length!==0?this.#_.pop():this.#n===this.#l?this.#R(!1):this.#n,this.#r[d]=e,this.#e[d]=t,this.#s.set(e,d),this.#c[this.#i]=d,this.#h[d]=this.#i,this.#i=d,this.#n++,this.#C(d,u,l),l&&(l.set="add"),c=!1;else{this.#P(d);const h=this.#e[d];if(t!==h){if(this.#A&&this.#t(h)){h.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:f}=h;f!==void 0&&!a&&(this.#v&&this.#m?.(f,e,"set"),this.#u&&this.#a?.push([f,e,"set"]))}else a||(this.#v&&this.#m?.(h,e,"set"),this.#u&&this.#a?.push([h,e,"set"]));if(this.#S(d),this.#C(d,u,l),this.#e[d]=t,l){l.set="replace";const f=h&&this.#t(h)?h.__staleWhileFetching:h;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(n!==0&&!this.#p&&this.#j(),this.#p&&(c||this.#N(d,n,i),l&&this.#k(l,d)),!a&&this.#u&&this.#a){const h=this.#a;let f;for(;f=h?.shift();)this.#g?.(...f)}return this}pop(){try{for(;this.#n;){const e=this.#e[this.#o];if(this.#R(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#u&&this.#a){const e=this.#a;let t;for(;t=e?.shift();)this.#g?.(...t)}}}#R(e){const t=this.#o,s=this.#r[t],n=this.#e[t];return this.#A&&this.#t(n)?n.__abortController.abort(new Error("evicted")):(this.#v||this.#u)&&(this.#v&&this.#m?.(n,s,"evict"),this.#u&&this.#a?.push([n,s,"evict"])),this.#S(t),e&&(this.#r[t]=void 0,this.#e[t]=void 0,this.#_.push(t)),this.#n===1?(this.#o=this.#i=0,this.#_.length=0):this.#o=this.#c[t],this.#s.delete(s),this.#n--,t}has(e,t={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:n}=t,i=this.#s.get(e);if(i!==void 0){const a=this.#e[i];if(this.#t(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#f(i))n&&(n.has="stale",this.#k(n,i));else return s&&this.#O(i),n&&(n.has="hit",this.#k(n,i)),!0}else n&&(n.has="miss");return!1}peek(e,t={}){const{allowStale:s=this.allowStale}=t,n=this.#s.get(e);if(n===void 0||!s&&this.#f(n))return;const i=this.#e[n];return this.#t(i)?i.__staleWhileFetching:i}#I(e,t,s,n){const i=t===void 0?void 0:this.#e[t];if(this.#t(i))return i;const a=new Vn,{signal:o}=s;o?.addEventListener("abort",()=>a.abort(o.reason),{signal:a.signal});const l={signal:a.signal,options:s,context:n},c=(b,_=!1)=>{const{aborted:A}=a.signal,w=s.ignoreFetchAbort&&b!==void 0;if(s.status&&(A&&!_?(s.status.fetchAborted=!0,s.status.fetchError=a.signal.reason,w&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),A&&!w&&!_)return d(a.signal.reason);const T=f;return this.#e[t]===f&&(b===void 0?T.__staleWhileFetching?this.#e[t]=T.__staleWhileFetching:this.delete(e):(s.status&&(s.status.fetchUpdated=!0),this.set(e,b,l.options))),b},u=b=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=b),d(b)),d=b=>{const{aborted:_}=a.signal,A=_&&s.allowStaleOnFetchAbort,w=A||s.allowStaleOnFetchRejection,T=w||s.noDeleteOnFetchRejection,E=f;if(this.#e[t]===f&&(!T||E.__staleWhileFetching===void 0?this.delete(e):A||(this.#e[t]=E.__staleWhileFetching)),w)return s.status&&E.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw b},h=(b,_)=>{const A=this.#x?.(e,i,l);A&&A instanceof Promise&&A.then(w=>b(w===void 0?void 0:w),_),a.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(b(void 0),s.allowStaleOnFetchAbort&&(b=w=>c(w,!0)))})};s.status&&(s.status.fetchDispatched=!0);const f=new Promise(h).then(c,u),m=Object.assign(f,{__abortController:a,__staleWhileFetching:i,__returned:void 0});return t===void 0?(this.set(e,m,{...l.options,status:void 0}),t=this.#s.get(e)):this.#e[t]=m,m}#t(e){if(!this.#A)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Vn}async fetch(e,t={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:m=this.allowStaleOnFetchAbort,context:b,forceRefresh:_=!1,status:A,signal:w}=t;if(!this.#A)return A&&(A.fetch="get"),this.get(e,{allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:A});const T={allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:a,noDisposeOnSet:o,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:m,ignoreFetchAbort:f,status:A,signal:w};let E=this.#s.get(e);if(E===void 0){A&&(A.fetch="miss");const k=this.#I(e,E,T,b);return k.__returned=k}else{const k=this.#e[E];if(this.#t(k)){const F=s&&k.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",F&&(A.returnedStale=!0)),F?k.__staleWhileFetching:k.__returned=k}const x=this.#f(E);if(!_&&!x)return A&&(A.fetch="hit"),this.#P(E),n&&this.#O(E),A&&this.#k(A,E),k;const C=this.#I(e,E,T,b),R=C.__staleWhileFetching!==void 0&&s;return A&&(A.fetch=x?"stale":"refresh",R&&x&&(A.returnedStale=!0)),R?C.__staleWhileFetching:C.__returned=C}}get(e,t={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:a}=t,o=this.#s.get(e);if(o!==void 0){const l=this.#e[o],c=this.#t(l);return a&&this.#k(a,o),this.#f(o)?(a&&(a.get="stale"),c?(a&&s&&l.__staleWhileFetching!==void 0&&(a.returnedStale=!0),s?l.__staleWhileFetching:void 0):(i||this.delete(e),a&&s&&(a.returnedStale=!0),s?l:void 0)):(a&&(a.get="hit"),c?l.__staleWhileFetching:(this.#P(o),n&&this.#O(o),l))}else a&&(a.get="miss")}#D(e,t){this.#h[t]=e,this.#c[e]=t}#P(e){e!==this.#i&&(e===this.#o?this.#o=this.#c[e]:this.#D(this.#h[e],this.#c[e]),this.#D(this.#i,e),this.#i=e)}delete(e){let t=!1;if(this.#n!==0){const s=this.#s.get(e);if(s!==void 0)if(t=!0,this.#n===1)this.clear();else{this.#S(s);const n=this.#e[s];if(this.#t(n)?n.__abortController.abort(new Error("deleted")):(this.#v||this.#u)&&(this.#v&&this.#m?.(n,e,"delete"),this.#u&&this.#a?.push([n,e,"delete"])),this.#s.delete(e),this.#r[s]=void 0,this.#e[s]=void 0,s===this.#i)this.#i=this.#h[s];else if(s===this.#o)this.#o=this.#c[s];else{const i=this.#h[s];this.#c[i]=this.#c[s];const a=this.#c[s];this.#h[a]=this.#h[s]}this.#n--,this.#_.push(s)}}if(this.#u&&this.#a?.length){const s=this.#a;let n;for(;n=s?.shift();)this.#g?.(...n)}return t}clear(){for(const e of this.#T({allowStale:!0})){const t=this.#e[e];if(this.#t(t))t.__abortController.abort(new Error("deleted"));else{const s=this.#r[e];this.#v&&this.#m?.(t,s,"delete"),this.#u&&this.#a?.push([t,s,"delete"])}}if(this.#s.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#w&&(this.#p.fill(0),this.#w.fill(0)),this.#y&&this.#y.fill(0),this.#o=0,this.#i=0,this.#_.length=0,this.#b=0,this.#n=0,this.#u&&this.#a){const e=this.#a;let t;for(;t=e?.shift();)this.#g?.(...t)}}}Mi.LRUCache=Ro;const Yu=Cs(tb);var pb=Object.create,Fi=Object.defineProperty,fb=Object.getOwnPropertyDescriptor,mb=Object.getOwnPropertyNames,gb=Object.getPrototypeOf,bb=Object.prototype.hasOwnProperty,_b=(r,e)=>{for(var t in e)Fi(r,t,{get:e[t],enumerable:!0})},ed=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of mb(e))!bb.call(r,n)&&n!==t&&Fi(r,n,{get:()=>e[n],enumerable:!(s=fb(e,n))||s.enumerable});return r},yb=(r,e,t)=>(t=r!=null?pb(gb(r)):{},ed(e||!r||!r.__esModule?Fi(t,"default",{value:r,enumerable:!0}):t,r)),wb=r=>ed(Fi({},"__esModule",{value:!0}),r),td={};_b(td,{createAppAuth:()=>Bb,createOAuthUserAuth:()=>Gb.createOAuthUserAuth});var vb=wb(td),Eb=pg,Tb=Mg,kb=Vu,Ab=ob;yb(Vu);var Ob=db;async function Wn({appId:r,privateKey:e,timeDifference:t}){try{const s=await(0,Ob.githubAppJwt)({id:+r,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:s.token,appId:s.appId,expiresAt:new Date(s.expiration*1e3).toISOString()}}catch(s){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):s}}var Sb=Mi;function Pb(){return new Sb.LRUCache({max:15e3,ttl:1e3*60*59})}async function xb(r,e){const t=rd(e),s=await r.get(t);if(!s)return;const[n,i,a,o,l,c]=s.split("|"),u=e.permissions||l.split(/,/).reduce((d,h)=>(/!$/.test(h)?d[h.slice(0,-1)]="write":d[h]="read",d),{});return{token:n,createdAt:i,expiresAt:a,permissions:u,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:c,repositorySelection:o}}async function Cb(r,e,t){const s=rd(e),n=e.permissions?"":Object.keys(t.permissions).map(a=>`${a}${t.permissions[a]==="write"?"!":""}`).join(","),i=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,n,t.singleFileName].join("|");await r.set(s,i)}function rd({installationId:r,permissions:e={},repositoryIds:t=[],repositoryNames:s=[]}){const n=Object.keys(e).sort().map(o=>e[o]==="read"?o:`${o}!`).join(","),i=t.sort().join(","),a=s.join(",");return[r,i,a,n].filter(Boolean).join("|")}function uc({installationId:r,token:e,createdAt:t,expiresAt:s,repositorySelection:n,permissions:i,repositoryIds:a,repositoryNames:o,singleFileName:l}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:r,permissions:i,createdAt:t,expiresAt:s,repositorySelection:n},a?{repositoryIds:a}:null,o?{repositoryNames:o}:null,l?{singleFileName:l}:null)}async function sd(r,e,t){const s=Number(e.installationId||r.installationId);if(!s)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){const{type:w,factory:T,oauthApp:E,...k}={...r,...e};return T(k)}const n=Object.assign({installationId:s},e);if(!e.refresh){const w=await xb(r.cache,n);if(w){const{token:T,createdAt:E,expiresAt:k,permissions:x,repositoryIds:C,repositoryNames:H,singleFileName:R,repositorySelection:F}=w;return uc({installationId:s,token:T,createdAt:E,expiresAt:k,permissions:x,repositorySelection:F,repositoryIds:C,repositoryNames:H,singleFileName:R})}}const i=await Wn(r),a=t||r.request,{data:{token:o,expires_at:l,repositories:c,permissions:u,repository_selection:d,single_file:h}}=await a("POST /app/installations/{installation_id}/access_tokens",{installation_id:s,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${i.token}`}}),f=u||{},m=d||"all",b=c?c.map(w=>w.id):void 0,_=c?c.map(w=>w.name):void 0,A=new Date().toISOString();return await Cb(r.cache,n,{token:o,createdAt:A,expiresAt:l,repositorySelection:m,permissions:f,repositoryIds:b,repositoryNames:_,singleFileName:h}),uc({installationId:s,token:o,createdAt:A,expiresAt:l,repositorySelection:m,permissions:f,repositoryIds:b,repositoryNames:_,singleFileName:h})}async function Rb(r,e){switch(e.type){case"app":return Wn(r);case"oauth":r.log.warn(new Ab.Deprecation('[@octokit/auth-app] {type: "oauth"} is deprecated. Use {type: "oauth-app"} instead'));case"oauth-app":return r.oauthApp({type:"oauth-app"});case"installation":return sd(r,{...e,type:"installation"});case"oauth-user":return r.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}}var Ib=Yu,jb=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function Nb(r){const t=`^(?:${r.map(s=>s.split("/").map(n=>n.startsWith("{")?"(?:.+?)":n).join("/")).map(s=>`(?:${s})`).join("|")})$`;return new RegExp(t,"i")}var $b=Nb(jb);function Lb(r){return!!r&&$b.test(r.split("?")[0])}var Db=5*1e3;function Mb(r){return!(r.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||r.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}async function Fb(r,e,t,s){const n=e.endpoint.merge(t,s),i=n.url;if(/\/login\/oauth\/access_token$/.test(i))return e(n);if(Lb(i.replace(e.endpoint.DEFAULTS.baseUrl,""))){const{token:l}=await Wn(r);n.headers.authorization=`bearer ${l}`;let c;try{c=await e(n)}catch(u){if(Mb(u)||typeof u.response.headers.date>"u")throw u;const d=Math.floor((Date.parse(u.response.headers.date)-Date.parse(new Date().toString()))/1e3);r.log.warn(u.message),r.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${d} seconds. Retrying request with the difference accounted for.`);const{token:h}=await Wn({...r,timeDifference:d});return n.headers.authorization=`bearer ${h}`,e(n)}return c}if((0,Ib.requiresBasicAuth)(i)){const l=await r.oauthApp({type:"oauth-app"});return n.headers.authorization=l.headers.authorization,e(n)}const{token:a,createdAt:o}=await sd(r,{},e);return n.headers.authorization=`token ${a}`,nd(r,e,n,o)}async function nd(r,e,t,s,n=0){const i=+new Date-+new Date(s);try{return await e(t)}catch(a){if(a.status!==401)throw a;if(i>=Db)throw n>0&&(a.message=`After ${n} retries within ${i/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),a;++n;const o=n*1e3;return r.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${n}, wait: ${o/1e3}s)`),await new Promise(l=>setTimeout(l,o)),nd(r,e,t,s,n)}}var Ub="6.0.3",Gb=Yu;function Bb(r){if(!r.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!Number.isFinite(+r.appId))throw new Error("[@octokit/auth-app] appId option must be a number or numeric string");if(!r.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in r&&!r.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");const e=Object.assign({warn:console.warn.bind(console)},r.log),t=r.request||Tb.request.defaults({headers:{"user-agent":`octokit-auth-app.js/${Ub} ${(0,Eb.getUserAgent)()}`}}),s=Object.assign({request:t,cache:Pb()},r,r.installationId?{installationId:Number(r.installationId)}:{},{log:e,oauthApp:(0,kb.createOAuthAppAuth)({clientType:"github-app",clientId:r.clientId||"",clientSecret:r.clientSecret||"",request:t})});return Object.assign(Rb.bind(null,s),{hook:Fb.bind(null,s)})}const zb=Zm.plugin(ju).plugin(Po).plugin($u);function Io(r){return new zb({authStrategy:vb.createAppAuth,auth:{appId:Hn.appId,privateKey:Hn.privateKey,installationId:r},throttle:{onRateLimit:(t,s,n,i)=>{if(n.log.warn(`Request quota exhausted for request ${s.method} ${s.url}`),i<1)return n.log.info(`Retrying after ${t} seconds!`),!0},onSecondaryRateLimit:(t,s,n)=>{n.log.warn(`SecondaryRateLimit detected for request ${s.method} ${s.url}`)}}})}const Hb=async r=>({repos:(await(await Io(r)).rest.apps.listReposAccessibleToInstallation({installation_id:parseInt(r)})).data.repositories.map(n=>({id:n.id.toString(),name:n.name,owner:n.owner.login}))});async function qb(r,e){const n=(await(await Io(r)).rest.repos.get({owner:e.owner,repo:e.name})).data.default_branch;return n||console.error(`No default branch found for ${e.owner}/${e.name}`),n}function Vb(r){let e,t,s='<g fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path stroke-linecap="round" d="M12 7h.01"/><path stroke-linecap="round" stroke-linejoin="round" d="M10 11h2v5m-2 0h4"/></g>',n=[{"data-onlook-id":"~icons/akar-icons/info.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/akar-icons/info.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function Wb(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class dc extends Ze{constructor(e){super(),Ke(this,e,Wb,Vb,We,{})}}function hc(r,e,t){const s=r.slice();return s[18]=e[t],s}function Zb(r){let e,t,s,n,i,a,o;function l(f,m){if(f[3])return Xb;if(f[4].length===0)return Jb}let c=l(r),u=c&&c(r),d=As(r[4]),h=[];for(let f=0;f<d.length;f+=1)h[f]=pc(hc(r,d,f));return{c(){e=O("div"),t=O("input"),s=U(),n=O("div"),u&&u.c(),i=U();for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){e=S(f,"DIV",{"data-onlook-id":!0,class:!0});var m=$(e);t=S(m,"INPUT",{"data-onlook-id":!0,class:!0,type:!0,placeholder:!0}),m.forEach(v),s=G(f),n=S(f,"DIV",{"data-onlook-id":!0,class:!0});var b=$(n);u&&u.l(b),i=G(b);for(let _=0;_<h.length;_+=1)h[_].l(b);b.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:167:172:172"),p(t,"class","input input-bordered w-full"),p(t,"type","text"),p(t,"placeholder","Search for repository"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:166:166:173"),p(e,"class","flex flex-row gap-3"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:174:174:196"),p(n,"class","border py-2 divide-y rounded-lg max-h-80 overflow-auto")},m(f,m){K(f,e,m),y(e,t),vr(t,r[1]),K(f,s,m),K(f,n,m),u&&u.m(n,null),y(n,i);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(n,null);a||(o=Ue(t,"input",r[14]),a=!0)},p(f,m){if(m&2&&t.value!==f[1]&&vr(t,f[1]),c!==(c=l(f))&&(u&&u.d(1),u=c&&c(f),u&&(u.c(),u.m(n,i))),m&80){d=As(f[4]);let b;for(b=0;b<d.length;b+=1){const _=hc(f,d,b);h[b]?h[b].p(_,m):(h[b]=pc(_),h[b].c(),h[b].m(n,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=d.length}},i:he,o:he,d(f){f&&(v(e),v(s),v(n)),u&&u.d(),fo(h,f),a=!1,o()}}}function Kb(r){let e,t,s,n,i,a,o=r[2].name+"",l,c,u,d=r[2].owner+"",h,f,m,b,_="Base branch",A,w,T,E,k,x,C,H,R,F,z="Root directory",X,te,oe,re,Oe,j,M,V,Q,ce,ve=r[5]?"Saved":"Save",ye,Je,Se,ze="Disconnect",Me,He,Xe;return s=new yn({props:{class:"h-9 w-9 mr-2"}}),E=new dc({props:{class:"h-4 w-4 text-gray-500"}}),re=new dc({props:{class:"h-4 w-4 text-gray-500"}}),{c(){e=O("div"),t=O("div"),Ee(s.$$.fragment),n=U(),i=O("div"),a=O("p"),l=Le(o),c=U(),u=O("p"),h=Le(d),f=U(),m=O("div"),b=O("p"),b.textContent=_,A=U(),w=O("div"),T=O("button"),Ee(E.$$.fragment),k=U(),x=O("input"),H=U(),R=O("div"),F=O("p"),F.textContent=z,X=U(),te=O("div"),oe=O("button"),Ee(re.$$.fragment),Oe=U(),j=O("input"),V=U(),Q=O("div"),ce=O("button"),ye=Le(ve),Je=U(),Se=O("button"),Se.textContent=ze,this.h()},l(Pe){e=S(Pe,"DIV",{"data-onlook-id":!0,class:!0});var xe=$(e);t=S(xe,"DIV",{"data-onlook-id":!0,class:!0});var rt=$(t);Te(s.$$.fragment,rt),n=G(rt),i=S(rt,"DIV",{"data-onlook-id":!0});var ot=$(i);a=S(ot,"P",{"data-onlook-id":!0,class:!0});var Ot=$(a);l=De(Ot,o),Ot.forEach(v),c=G(ot),u=S(ot,"P",{"data-onlook-id":!0,class:!0});var bt=$(u);h=De(bt,d),bt.forEach(v),ot.forEach(v),rt.forEach(v),f=G(xe),m=S(xe,"DIV",{"data-onlook-id":!0,class:!0});var Ne=$(m);b=S(Ne,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(b)!=="svelte-3lzi6f"&&(b.textContent=_),A=G(Ne),w=S(Ne,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var lt=$(w);T=S(lt,"BUTTON",{"data-onlook-id":!0,class:!0});var Et=$(T);Te(E.$$.fragment,Et),Et.forEach(v),lt.forEach(v),k=G(Ne),x=S(Ne,"INPUT",{"data-onlook-id":!0,class:!0,type:!0,placeholder:!0}),Ne.forEach(v),H=G(xe),R=S(xe,"DIV",{"data-onlook-id":!0,class:!0});var ie=$(R);F=S(ie,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(F)!=="svelte-537vj5"&&(F.textContent=z),X=G(ie),te=S(ie,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var Rt=$(te);oe=S(Rt,"BUTTON",{"data-onlook-id":!0,class:!0});var Fe=$(oe);Te(re.$$.fragment,Fe),Fe.forEach(v),Rt.forEach(v),Oe=G(ie),j=S(ie,"INPUT",{"data-onlook-id":!0,class:!0,type:!0,placeholder:!0}),ie.forEach(v),V=G(xe),Q=S(xe,"DIV",{"data-onlook-id":!0,class:!0});var _e=$(Q);ce=S(_e,"BUTTON",{"data-onlook-id":!0,class:!0});var _t=$(ce);ye=De(_t,ve),_t.forEach(v),Je=G(_e),Se=S(_e,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(Se)!=="svelte-18fysai"&&(Se.textContent=ze),_e.forEach(v),xe.forEach(v),this.h()},h(){p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:102:102:102"),p(a,"class","text-sm"),p(u,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:103:103:103"),p(u,"class","text-xs text-gray-600"),p(i,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:101:101:104"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:99:99:105"),p(t,"class","flex flex-row align-middle"),p(b,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:108:108:108"),p(b,"class","label w-28"),p(T,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:113:113:115"),p(T,"class","label mr-2"),p(w,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:109:112:116"),p(w,"class","tooltip tooltip-bottom tooltip-info before:w-[10rem] before:content-[attr(data-tip)]"),p(w,"data-tip","Branch your changes will be pushed to. Default is your base branch"),p(x,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:117:128:128"),p(x,"class","input input-bordered input-sm"),p(x,"type","text"),p(x,"placeholder","main"),x.value=C=r[0]?.githubSettings?.baseBranch,p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:107:107:129"),p(m,"class","flex flex-row items-center"),p(F,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:131:131:131"),p(F,"class","label w-28"),p(oe,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:136:136:138"),p(oe,"class","label mr-2"),p(te,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:132:135:139"),p(te,"class","tooltip tooltip-bottom tooltip-info before:w-[10rem] before:content-[attr(data-tip)]"),p(te,"data-tip","Folder that contains your src file. If it's at root you can leave this empty"),p(j,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:140:151:151"),p(j,"class","input input-bordered input-sm"),p(j,"type","text"),p(j,"placeholder",""),j.value=M=r[0]?.githubSettings?.rootPath,p(R,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:130:130:152"),p(R,"class","flex flex-row items-center"),p(ce,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:154:157:158"),ce.disabled=r[5],p(ce,"class","btn btn-outline btn-sm"),p(Se,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:159:161:162"),p(Se,"class","btn btn-outline btn-sm btn-error"),p(Q,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:153:153:163"),p(Q,"class","ml-auto mt-4 space-x-2"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:98:98:164"),p(e,"class","border rounded-lg flex flex-col justify-between p-4 space-y-4")},m(Pe,xe){K(Pe,e,xe),y(e,t),ke(s,t,null),y(t,n),y(t,i),y(i,a),y(a,l),y(i,c),y(i,u),y(u,h),y(e,f),y(e,m),y(m,b),y(m,A),y(m,w),y(w,T),ke(E,T,null),y(m,k),y(m,x),y(e,H),y(e,R),y(R,F),y(R,X),y(R,te),y(te,oe),ke(re,oe,null),y(R,Oe),y(R,j),y(e,V),y(e,Q),y(Q,ce),y(ce,ye),y(Q,Je),y(Q,Se),Me=!0,He||(Xe=[Ue(x,"input",r[10]),Ue(j,"input",r[11]),Ue(ce,"click",r[12]),Ue(Se,"click",r[13])],He=!0)},p(Pe,xe){(!Me||xe&4)&&o!==(o=Pe[2].name+"")&&mt(l,o),(!Me||xe&4)&&d!==(d=Pe[2].owner+"")&&mt(h,d),(!Me||xe&1&&C!==(C=Pe[0]?.githubSettings?.baseBranch)&&x.value!==C)&&(x.value=C),(!Me||xe&1&&M!==(M=Pe[0]?.githubSettings?.rootPath)&&j.value!==M)&&(j.value=M),(!Me||xe&32)&&ve!==(ve=Pe[5]?"Saved":"Save")&&mt(ye,ve),(!Me||xe&32)&&(ce.disabled=Pe[5])},i(Pe){Me||(ee(s.$$.fragment,Pe),ee(E.$$.fragment,Pe),ee(re.$$.fragment,Pe),Me=!0)},o(Pe){ae(s.$$.fragment,Pe),ae(E.$$.fragment,Pe),ae(re.$$.fragment,Pe),Me=!1},d(Pe){Pe&&v(e),Ae(s),Ae(E),Ae(re),He=!1,Xr(Xe)}}}function Jb(r){let e,t='<p data-onlook-id="src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:181:181:181" class="text-gray-500">No repositories found</p>';return{c(){e=O("div"),e.innerHTML=t,this.h()},l(s){e=S(s,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1ej0ub4"&&(e.innerHTML=t),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:180:180:182"),p(e,"class","flex items-center justify-center h-full")},m(s,n){K(s,e,n)},d(s){s&&v(e)}}}function Xb(r){let e,t='<div data-onlook-id="src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:177:177:177" class="loading h-10"></div>';return{c(){e=O("div"),e.innerHTML=t,this.h()},l(s){e=S(s,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-43kcl"&&(e.innerHTML=t),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:176:176:178"),p(e,"class","w-full text-center")},m(s,n){K(s,e,n)},d(s){s&&v(e)}}}function pc(r){let e,t,s,n=r[18].name+"",i,a,o,l=r[18].owner+"",c,u,d,h="Connect",f,m,b;function _(){return r[15](r[18])}return{c(){e=O("div"),t=O("div"),s=O("p"),i=Le(n),a=U(),o=O("p"),c=Le(l),u=U(),d=O("button"),d.textContent=h,f=U(),this.h()},l(A){e=S(A,"DIV",{"data-onlook-id":!0,class:!0});var w=$(e);t=S(w,"DIV",{"data-onlook-id":!0});var T=$(t);s=S(T,"P",{"data-onlook-id":!0,class:!0});var E=$(s);i=De(E,n),E.forEach(v),a=G(T),o=S(T,"P",{"data-onlook-id":!0,class:!0});var k=$(o);c=De(k,l),k.forEach(v),T.forEach(v),u=G(w),d=S(w,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(d)!=="svelte-1ho8mzx"&&(d.textContent=h),f=G(w),w.forEach(v),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:188:188:188"),p(s,"class","text-sm"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:189:189:189"),p(o,"class","text-xs text-gray-600"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:187:187:190"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:191:192:193"),p(d,"class","btn btn-outline btn-sm"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:186:186:194"),p(e,"class","flex flex-row justify-between items-center p-4")},m(A,w){K(A,e,w),y(e,t),y(t,s),y(s,i),y(t,a),y(t,o),y(o,c),y(e,u),y(e,d),y(e,f),m||(b=Ue(d,"click",_),m=!0)},p(A,w){r=A,w&16&&n!==(n=r[18].name+"")&&mt(i,n),w&16&&l!==(l=r[18].owner+"")&&mt(c,l)},d(A){A&&v(e),m=!1,b()}}}function Qb(r){let e,t,s,n,i,a="Github Permissions",o,l,c;const u=[Kb,Zb],d=[];function h(f,m){return f[2]?0:1}return t=h(r),s=d[t]=u[t](r),{c(){e=O("div"),s.c(),n=U(),i=O("button"),i.textContent=a,this.h()},l(f){e=S(f,"DIV",{"data-onlook-id":!0,class:!0});var m=$(e);s.l(m),n=G(m),i=S(m,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(i)!=="svelte-isdr18"&&(i.textContent=a),m.forEach(v),this.h()},h(){p(i,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:198:202:203"),p(i,"class","btn btn-link mt-4"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/ConfigureTab.svelte:96:96:204"),p(e,"class","space-y-3")},m(f,m){K(f,e,m),d[t].m(e,null),y(e,n),y(e,i),o=!0,l||(c=Ue(i,"click",r[16]),l=!0)},p(f,[m]){let b=t;t=h(f),t===b?d[t].p(f,m):(Pt(),ae(d[b],1,1,()=>{d[b]=null}),xt(),s=d[t],s?s.p(f,m):(s=d[t]=u[t](f),s.c()),ee(s,1),s.m(e,n))},i(f){o||(ee(s),o=!0)},o(f){ae(s),o=!1},d(f){f&&v(e),d[t].d(),l=!1,c()}}}function Yb(r,e,t){let{project:s}=e;const n=new Sr(Ar.PROJECTS);let i=[],a=!1,o=[],l="",c,u=!1;Ir(async()=>{s?.githubSettings&&t(2,c={name:s.githubSettings.repositoryName,owner:s.githubSettings.owner})});async function d(k){s.installationId||console.error("No installation id found");const x=await qb(s.installationId,k);t(0,s.githubSettings={repositoryName:k.name,owner:k.owner,rootPath:"",baseBranch:x??"main"},s),t(2,c=k),f(s)}async function h(){t(0,s.githubSettings=void 0,s),t(2,c=void 0),f(s)}async function f(k){if(t(5,u=!0),k?.githubSettings?.rootPath){let x=k?.githubSettings?.rootPath;x=x.replace(/^\/+|\/+$/g,""),k.githubSettings.rootPath=x}t(5,u=!1),await n.post(k),Hr.update(x=>(x.set(k.id,k),x)),k={...k}}const m=k=>{s?.githubSettings&&(t(0,s.githubSettings.baseBranch=k.target.value,s),t(5,u=!1))},b=k=>{s?.githubSettings&&(t(0,s.githubSettings.rootPath=k.target.value,s),t(5,u=!1))},_=()=>f(s),A=()=>h();function w(){l=this.value,t(1,l)}const T=k=>d(k),E=()=>{window.location.href=`${Hn.appUrl}/installations/new?state=${s?.id}`};return r.$$set=k=>{"project"in k&&t(0,s=k.project)},r.$$.update=()=>{r.$$.dirty&1&&s.installationId&&(t(3,a=!0),Hb(s.installationId).then(({repos:k})=>{t(9,i=k),t(4,o=k),t(3,a=!1)}).catch(k=>{console.error("Error fetching repositories:",k)})),r.$$.dirty&518&&(l!==""?t(4,o=i.filter(k=>k.name.includes(l)&&k.name!==c?.name)):t(4,o=i.filter(k=>k.name!==c?.name)))},[s,l,c,a,o,u,d,h,f,i,m,b,_,A,w,T,E]}class e_ extends Ze{constructor(e){super(),Ke(this,e,Yb,Qb,We,{project:0})}}function t_(r){let e,t,s,n='Add the following code to your <b data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/NextjsCodeblock.svelte:22:22:22">next.config.mjs</b> file:',i,a,o;return e=new qr({props:{class:"border p-2 rounded overflow-auto",language:"shell",code:"npm i -D @onlook/nextjs"}}),a=new qr({props:{class:"border p-2 rounded overflow-auto",language:"javascript",code:`const nextConfig = {
  experimental: {
    swcPlugins: [
		["@onlook/nextjs", {}] // Add onlook preprocessor
	],
  },
};
export default nextConfig;`}}),{c(){Ee(e.$$.fragment),t=U(),s=O("p"),s.innerHTML=n,i=U(),Ee(a.$$.fragment),this.h()},l(l){Te(e.$$.fragment,l),t=G(l),s=S(l,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(s)!=="svelte-gk7tpk"&&(s.innerHTML=n),i=G(l),Te(a.$$.fragment,l),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/NextjsCodeblock.svelte:22:22:22"),p(s,"class","my-4")},m(l,c){ke(e,l,c),K(l,t,c),K(l,s,c),K(l,i,c),ke(a,l,c),o=!0},p:he,i(l){o||(ee(e.$$.fragment,l),ee(a.$$.fragment,l),o=!0)},o(l){ae(e.$$.fragment,l),ae(a.$$.fragment,l),o=!1},d(l){l&&(v(t),v(s),v(i)),Ae(e,l),Ae(a,l)}}}function r_(r){return Ir(()=>{$i.set(Gt),Gt.registerLanguage("javascript",vo),Gt.registerLanguage("shell",Eo)}),[]}class s_ extends Ze{constructor(e){super(),Ke(this,e,r_,t_,We,{})}}function n_(r){let e,t,s,n='Add the following code to your <b data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/SvelteCodeblock.svelte:22:22:22">svelte.config.js</b> file:',i,a,o;return e=new qr({props:{class:"border p-2 rounded overflow-auto",language:"shell",code:"npm i -D @onlook/svelte"}}),a=new qr({props:{class:"border p-2 rounded overflow-auto",language:"javascript",code:`import adapter from "@sveltejs/adapter-auto";
import { vitePreprocess } from "@sveltejs/vite-plugin-svelte";
import { onlookPreprocess } from "@onlook/svelte"; // import onlook preprocessor

const config = {
  preprocess: [
    vitePreprocess(),
    onlookPreprocess(), // Add onlook preprocessor
  ],
  kit: {
    adapter: adapter(),
  },
};

export default config;`}}),{c(){Ee(e.$$.fragment),t=U(),s=O("p"),s.innerHTML=n,i=U(),Ee(a.$$.fragment),this.h()},l(l){Te(e.$$.fragment,l),t=G(l),s=S(l,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(s)!=="svelte-1md68m1"&&(s.innerHTML=n),i=G(l),Te(a.$$.fragment,l),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/SvelteCodeblock.svelte:22:22:22"),p(s,"class","my-4")},m(l,c){ke(e,l,c),K(l,t,c),K(l,s,c),K(l,i,c),ke(a,l,c),o=!0},p:he,i(l){o||(ee(e.$$.fragment,l),ee(a.$$.fragment,l),o=!0)},o(l){ae(e.$$.fragment,l),ae(a.$$.fragment,l),o=!1},d(l){l&&(v(t),v(s),v(i)),Ae(e,l),Ae(a,l)}}}function i_(r){return Ir(()=>{$i.set(Gt),Gt.registerLanguage("javascript",vo),Gt.registerLanguage("shell",Eo)}),[]}class a_ extends Ze{constructor(e){super(),Ke(this,e,i_,n_,We,{})}}function o_(r){let e,t,s,n="1. Install the onlook library:",i,a,o,l,c,u,d,h,f,m,b,_,A,w="This will add a secure onlook identifier in your app.",T,E,k='<p data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:23:23:23" class="font-semibold py-2">2. Publish project:</p> <p data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:24:24:24" class="">Run your project in localhost or publish it.</p>',x,C,H='<p data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:27:27:27" class="font-semibold py-2">3. Sync your project:</p> <p data-onlook-id="src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:28:28:28" class="">Open project in Chrome extension and press edit.</p>',R;return u=new s_({}),b=new a_({}),{c(){e=O("div"),t=O("div"),s=O("p"),s.textContent=n,i=U(),a=O("div"),o=O("input"),l=U(),c=O("div"),Ee(u.$$.fragment),d=U(),h=O("input"),f=U(),m=O("div"),Ee(b.$$.fragment),_=U(),A=O("p"),A.textContent=w,T=U(),E=O("div"),E.innerHTML=k,x=U(),C=O("div"),C.innerHTML=H,this.h()},l(F){e=S(F,"DIV",{"data-onlook-id":!0,class:!0});var z=$(e);t=S(z,"DIV",{"data-onlook-id":!0});var X=$(t);s=S(X,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(s)!=="svelte-1ttw7fk"&&(s.textContent=n),i=G(X),a=S(X,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var te=$(a);o=S(te,"INPUT",{"data-onlook-id":!0,type:!0,name:!0,role:!0,class:!0,"aria-label":!0}),l=G(te),c=S(te,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var oe=$(c);Te(u.$$.fragment,oe),oe.forEach(v),d=G(te),h=S(te,"INPUT",{"data-onlook-id":!0,type:!0,name:!0,role:!0,class:!0,"aria-label":!0}),f=G(te),m=S(te,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var re=$(m);Te(b.$$.fragment,re),re.forEach(v),te.forEach(v),_=G(X),A=S(X,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(A)!=="svelte-9q6pjl"&&(A.textContent=w),X.forEach(v),T=G(z),E=S(z,"DIV",{"data-onlook-id":!0,"data-svelte-h":!0}),de(E)!=="svelte-12yokg9"&&(E.innerHTML=k),x=G(z),C=S(z,"DIV",{"data-onlook-id":!0,"data-svelte-h":!0}),de(C)!=="svelte-kay6jg"&&(C.innerHTML=H),z.forEach(v),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:8:8:8"),p(s,"class","mt-3 font-semibold"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:10:10:10"),p(o,"type","radio"),p(o,"name","my_tabs_2"),p(o,"role","tab"),p(o,"class","tab"),p(o,"aria-label","Next.js"),o.checked=!0,p(c,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:11:11:13"),p(c,"role","tabpanel"),p(c,"class","tab-content bg-base-100 rounded-box py-4 overflow-auto"),p(h,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:14:14:14"),p(h,"type","radio"),p(h,"name","my_tabs_2"),p(h,"role","tab"),p(h,"class","tab"),p(h,"aria-label","Svelte"),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:15:15:17"),p(m,"role","tabpanel"),p(m,"class","tab-content bg-base-100 rounded-box py-4 overflow-auto"),p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:9:9:18"),p(a,"role","tablist"),p(a,"class","tabs tabs-bordered"),p(A,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:19:19:19"),p(A,"class",""),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:7:7:20"),p(E,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:22:22:25"),p(C,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:26:26:29"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/instructions/ConfigureProjectInstructions.svelte:6:6:30"),p(e,"class","text-start max-w-[100%] space-y-4 my-4")},m(F,z){K(F,e,z),y(e,t),y(t,s),y(t,i),y(t,a),y(a,o),y(a,l),y(a,c),ke(u,c,null),y(a,d),y(a,h),y(a,f),y(a,m),ke(b,m,null),y(t,_),y(t,A),y(e,T),y(e,E),y(e,x),y(e,C),R=!0},p:he,i(F){R||(ee(u.$$.fragment,F),ee(b.$$.fragment,F),R=!0)},o(F){ae(u.$$.fragment,F),ae(b.$$.fragment,F),R=!1},d(F){F&&v(e),Ae(u),Ae(b)}}}class id extends Ze{constructor(e){super(),Ke(this,e,null,o_,We,{})}}function l_(r){let e,t,s='<path fill="currentColor" d="M212 158.06v-34.18a59.61 59.61 0 0 0-17.57-42.42L173 60h19a12 12 0 0 0 0-24h-48a12 12 0 0 0-12 12v48a12 12 0 0 0 24 0V77l21.46 21.46A35.76 35.76 0 0 1 188 123.88v34.18a36 36 0 1 0 24 0M200 204a12 12 0 1 1 12-12a12 12 0 0 1-12 12M108 64a36 36 0 1 0-48 33.94v60.12a36 36 0 1 0 24 0V97.94A36.07 36.07 0 0 0 108 64M72 204a12 12 0 1 1 12-12a12 12 0 0 1-12 12m0-128a12 12 0 1 1 12-12a12 12 0 0 1-12 12"/>',n=[{"data-onlook-id":"~icons/ph/git-pull-request-bold.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/ph/git-pull-request-bold.svelte:1:1:1"},{viewBox:"0 0 256 256"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function c_(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class u_ extends Ze{constructor(e){super(),Ke(this,e,c_,l_,We,{})}}function d_(r){let e,t,s='<path fill="currentColor" d="M13 3a9 9 0 0 0-9 9H1l3.89 3.89l.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7s-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42A8.954 8.954 0 0 0 13 21a9 9 0 0 0 0-18m-1 5v5l4.28 2.54l.72-1.21l-3.5-2.08V8z"/>',n=[{"data-onlook-id":"~icons/ic/baseline-restore.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},r[0]],i={};for(let a=0;a<n.length;a+=1)i=we(i,n[a]);return{c(){e=Wt("svg"),t=new Nt(!0),this.h()},l(a){e=Zt(a,"svg",{"data-onlook-id":!0,viewBox:!0,width:!0,height:!0});var o=$(e);t=$t(o,!0),o.forEach(v),this.h()},h(){t.a=null,et(e,i)},m(a,o){K(a,e,o),t.m(s,e)},p(a,[o]){et(e,i=Kt(n,[{"data-onlook-id":"~icons/ic/baseline-restore.svelte:1:1:1"},{viewBox:"0 0 24 24"},{width:"1.2em"},{height:"1.2em"},o&1&&a[0]]))},i:he,o:he,d(a){a&&v(e)}}}function h_(r,e,t){return r.$$set=s=>{t(0,e=we(we({},e),Ge(s)))},e=Ge(e),[e]}class p_ extends Ze{constructor(e){super(),Ke(this,e,h_,d_,We,{})}}function fc(r,e,t){const s=r.slice();return s[7]=e[t],s}function mc(r){let e,t,s,n,i,a=r[0].length+"",o,l,c,u,d,h,f,m,b=As(r[0]),_=[];for(let w=0;w<b.length;w+=1)_[w]=gc(fc(r,b,w));const A=w=>ae(_[w],1,1,()=>{_[w]=null});return{c(){e=O("div"),t=O("input"),s=U(),n=O("div"),i=Le("Publish history ("),o=Le(a),l=Le(")"),c=U(),u=O("div");for(let w=0;w<_.length;w+=1)_[w].c();this.h()},l(w){e=S(w,"DIV",{"data-onlook-id":!0,class:!0});var T=$(e);t=S(T,"INPUT",{"data-onlook-id":!0,type:!0}),s=G(T),n=S(T,"DIV",{"data-onlook-id":!0,class:!0});var E=$(n);i=De(E,"Publish history ("),o=De(E,a),l=De(E,")"),E.forEach(v),c=G(T),u=S(T,"DIV",{"data-onlook-id":!0,class:!0});var k=$(u);for(let x=0;x<_.length;x+=1)_[x].l(k);k.forEach(v),T.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:18:18:18"),p(t,"type","checkbox"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:19:19:19"),p(n,"class","collapse-title"),p(u,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:20:20:62"),p(u,"class","collapse-content space-y-2"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:13:17:63"),p(e,"class",d="collapse collapse-arrow border rounded-md mt-6 "+(r[2]?"collapse-open":"collapse-close"))},m(w,T){K(w,e,T),y(e,t),y(e,s),y(e,n),y(n,i),y(n,o),y(n,l),y(e,c),y(e,u);for(let E=0;E<_.length;E+=1)_[E]&&_[E].m(u,null);h=!0,f||(m=Ue(t,"click",r[3]),f=!0)},p(w,T){if((!h||T&1)&&a!==(a=w[0].length+"")&&mt(o,a),T&3){b=As(w[0]);let E;for(E=0;E<b.length;E+=1){const k=fc(w,b,E);_[E]?(_[E].p(k,T),ee(_[E],1)):(_[E]=gc(k),_[E].c(),ee(_[E],1),_[E].m(u,null))}for(Pt(),E=b.length;E<_.length;E+=1)A(E);xt()}(!h||T&4&&d!==(d="collapse collapse-arrow border rounded-md mt-6 "+(w[2]?"collapse-open":"collapse-close")))&&p(e,"class",d)},i(w){if(!h){for(let T=0;T<b.length;T+=1)ee(_[T]);h=!0}},o(w){_=_.filter(Boolean);for(let T=0;T<_.length;T+=1)ae(_[T]);h=!1},d(w){w&&v(e),fo(_,w),f=!1,m()}}}function gc(r){let e,t,s=r[7].title+"",n,i,a,o,l,c,u,d,h,f,m,b,_,A,w="Restore changes?",T,E,k="This will overwrite your current activities.",x,C,H,R,F="Cancel",z,X,te="Restore",oe,re,Oe,j;c=new u_({props:{class:"w-4 h-4"}});function M(){return r[4](r[7])}f=new p_({props:{class:"w-4 h-4"}});function V(){return r[6](r[7])}return{c(){e=O("div"),t=O("p"),n=Le(s),i=U(),a=O("div"),o=O("div"),l=O("button"),Ee(c.$$.fragment),u=U(),d=O("div"),h=O("button"),Ee(f.$$.fragment),m=U(),b=O("dialog"),_=O("div"),A=O("h3"),A.textContent=w,T=U(),E=O("p"),E.textContent=k,x=U(),C=O("div"),H=O("form"),R=O("button"),R.textContent=F,z=U(),X=O("button"),X.textContent=te,oe=U(),this.h()},l(Q){e=S(Q,"DIV",{"data-onlook-id":!0,class:!0});var ce=$(e);t=S(ce,"P",{"data-onlook-id":!0,class:!0});var ve=$(t);n=De(ve,s),ve.forEach(v),i=G(ce),a=S(ce,"DIV",{"data-onlook-id":!0,class:!0});var ye=$(a);o=S(ye,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var Je=$(o);l=S(Je,"BUTTON",{"data-onlook-id":!0,class:!0});var Se=$(l);Te(c.$$.fragment,Se),Se.forEach(v),Je.forEach(v),u=G(ye),d=S(ye,"DIV",{"data-onlook-id":!0,class:!0,"data-tip":!0});var ze=$(d);h=S(ze,"BUTTON",{"data-onlook-id":!0,class:!0});var Me=$(h);Te(f.$$.fragment,Me),Me.forEach(v),ze.forEach(v),m=G(ye),b=S(ye,"DIALOG",{"data-onlook-id":!0,id:!0,class:!0});var He=$(b);_=S(He,"DIV",{"data-onlook-id":!0,class:!0});var Xe=$(_);A=S(Xe,"H3",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(A)!=="svelte-18u9itr"&&(A.textContent=w),T=G(Xe),E=S(Xe,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(E)!=="svelte-9heekg"&&(E.textContent=k),x=G(Xe),C=S(Xe,"DIV",{"data-onlook-id":!0,class:!0});var Pe=$(C);H=S(Pe,"FORM",{"data-onlook-id":!0,method:!0});var xe=$(H);R=S(xe,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(R)!=="svelte-1vrbcrd"&&(R.textContent=F),z=G(xe),X=S(xe,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(X)!=="svelte-yjj657"&&(X.textContent=te),xe.forEach(v),Pe.forEach(v),Xe.forEach(v),He.forEach(v),ye.forEach(v),oe=G(ce),ce.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:23:23:25"),p(t,"class","line-clamp-1 text-ellipsis max-w-[70%]"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:28:31:32"),p(l,"class","btn btn-xs btn-square btn-ghost ml-auto"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:27:27:33"),p(o,"class","tooltip tooltip-left"),p(o,"data-tip","View pull request"),p(h,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:35:40:41"),p(h,"class","btn btn-xs btn-square btn-ghost"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:34:34:42"),p(d,"class","tooltip tooltip-left"),p(d,"data-tip","Restore changes"),p(A,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:46:46:46"),p(A,"class","font-bold text-lg"),p(E,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:47:47:47"),p(E,"class","py-4"),p(R,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:51:51:51"),p(R,"class","btn"),p(X,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:52:53:54"),p(X,"class","btn btn-error ml-2"),p(H,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:49:49:55"),p(H,"method","dialog"),p(C,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:48:48:56"),p(C,"class","modal-action"),p(_,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:45:45:57"),p(_,"class","modal-box"),p(b,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:44:44:58"),p(b,"id","confirm_restore_modal"),p(b,"class","modal"),p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:26:26:59"),p(a,"class","ml-auto"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/HistoriesView.svelte:22:22:60"),p(e,"class","flex flex-row max-w-[100%] items-center")},m(Q,ce){K(Q,e,ce),y(e,t),y(t,n),y(e,i),y(e,a),y(a,o),y(o,l),ke(c,l,null),y(a,u),y(a,d),y(d,h),ke(f,h,null),y(a,m),y(a,b),y(b,_),y(_,A),y(_,T),y(_,E),y(_,x),y(_,C),y(C,H),y(H,R),y(H,z),y(H,X),y(e,oe),re=!0,Oe||(j=[Ue(l,"click",M),Ue(h,"click",r[5]),Ue(X,"click",V)],Oe=!0)},p(Q,ce){r=Q,(!re||ce&1)&&s!==(s=r[7].title+"")&&mt(n,s)},i(Q){re||(ee(c.$$.fragment,Q),ee(f.$$.fragment,Q),re=!0)},o(Q){ae(c.$$.fragment,Q),ae(f.$$.fragment,Q),re=!1},d(Q){Q&&v(e),Ae(c),Ae(f),Oe=!1,Xr(j)}}}function f_(r){let e,t,s=r[0].length>0&&mc(r);return{c(){s&&s.c(),e=ks()},l(n){s&&s.l(n),e=ks()},m(n,i){s&&s.m(n,i),K(n,e,i),t=!0},p(n,[i]){n[0].length>0?s?(s.p(n,i),i&1&&ee(s,1)):(s=mc(n),s.c(),ee(s,1),s.m(e.parentNode,e)):s&&(Pt(),ae(s,1,1,()=>{s=null}),xt())},i(n){t||(ee(s),t=!0)},o(n){ae(s),t=!1},d(n){n&&v(e),s&&s.d(n)}}}function m_(r,e,t){let{githubHistories:s=[]}=e,{restoreActivities:n}=e,i=!0;const a=()=>t(2,i=!i),o=u=>window.open(u.pullRequestUrl,"_blank"),l=()=>{document.getElementById("confirm_restore_modal").showModal()},c=u=>n(u);return r.$$set=u=>{"githubHistories"in u&&t(0,s=u.githubHistories),"restoreActivities"in u&&t(1,n=u.restoreActivities)},[s,n,i,a,o,l,c]}class g_ extends Ze{constructor(e){super(),Ke(this,e,m_,f_,We,{githubHistories:0,restoreActivities:1})}}async function b_(r,e,t,s,n){const i=await r.rest.repos.getContent({owner:e,repo:t,ref:s,path:n});if("content"in i.data&&i.data.content){const a=atob(i.data.content);return{path:n,content:a,sha:i.data.sha??""}}else throw`The requested path ${n} is not a file.`}async function __(r,e,t,s){try{return await r.rest.repos.getBranch({owner:e,repo:t,branch:s}),!0}catch(n){if(n.status===404)return!1;throw n}}async function y_(r,e,t,s,n){const a=(await r.rest.git.getRef({owner:e,repo:t,ref:`heads/${s}`})).data.object.sha;await r.rest.git.createRef({owner:e,repo:t,ref:`refs/heads/${n}`,sha:a})}async function w_(r,e,t,s,n){await __(r,e,t,n)||await y_(r,e,t,s,n)}async function v_(r,e,t,s,n,i,a,o){if(o.length===0)throw new Error("No files to commit");const l=o.map(f=>({path:f.path,mode:"100644",type:"blob",content:f.content})),u=(await r.rest.git.getRef({owner:e,repo:t,ref:`heads/${s}`})).data.object.sha,d=await r.rest.git.createTree({owner:e,repo:t,tree:l,base_tree:u}),h=await r.rest.git.createCommit({owner:e,repo:t,message:a,tree:d.data.sha,parents:[u],author:{name:n,email:i,date:new Date().toISOString()}});return await r.rest.git.updateRef({owner:e,repo:t,ref:`heads/${s}`,sha:h.data.sha}),h.data.sha}async function E_(r,e,t,s,n,i,a){const o=await r.rest.pulls.list({owner:e,repo:t,head:`${e}:${a}`,base:s});return o.data.length>0?o.data[0].html_url:(await r.rest.pulls.create({owner:e,repo:t,title:n,body:i,head:`${e}:${a}`,base:s})).data.html_url}class T_{constructor(e,t,s,n){this.installationId=e,this.owner=t,this.repo=s,this.baseBranch=n,this.octokit=Io(this.installationId)}octokit;fetchFileFromPath(e){return b_(this.octokit,this.owner,this.repo,this.baseBranch,e)}createOrGetBranch(e){return w_(this.octokit,this.owner,this.repo,this.baseBranch,e)}createCommitFromFiles(e,t,s,n,i){return v_(this.octokit,this.owner,this.repo,e,t,s,n,i)}createOrGetPullRequest(e,t,s){return E_(this.octokit,this.owner,this.repo,this.baseBranch,e,t,s)}}const us="4.28.0";let bc=!1,Ws,ad,od,Ga,ld,cd,ud,dd,hd;function k_(r,e={auto:!1}){if(bc)throw new Error(`you must \`import 'openai/shims/${r.kind}'\` before importing anything else from openai`);if(Ws)throw new Error(`can't \`import 'openai/shims/${r.kind}'\` after \`import 'openai/shims/${Ws}'\``);bc=e.auto,Ws=r.kind,ad=r.fetch,r.Request,r.Response,r.Headers,od=r.FormData,r.Blob,Ga=r.File,ld=r.ReadableStream,cd=r.getMultipartRequestOptions,ud=r.getDefaultAgent,dd=r.fileFromPath,hd=r.isFsReadStream}class A_{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function O_({manuallyImported:r}={}){const e=r?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,s,n,i;try{t=fetch,s=Request,n=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${e}`)}return{kind:"web",fetch:t,Request:s,Response:n,Headers:i,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(a,o)=>({...o,body:new A_(a)}),getDefaultAgent:a=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:a=>!1}}Ws||k_(O_(),{auto:!0});let Ie=class extends Error{},At=class Ba extends Ie{constructor(e,t,s,n){super(`${Ba.makeMessage(e,t,s)}`),this.status=e,this.headers=n;const i=t;this.error=i,this.code=i?.code,this.param=i?.param,this.type=i?.type}static makeMessage(e,t,s){const n=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,s,n){if(!e)return new wn({cause:Ha(t)});const i=t?.error;return e===400?new jo(e,i,s,n):e===401?new No(e,i,s,n):e===403?new $o(e,i,s,n):e===404?new Lo(e,i,s,n):e===409?new Do(e,i,s,n):e===422?new Mo(e,i,s,n):e===429?new Fo(e,i,s,n):e>=500?new Uo(e,i,s,n):new Ba(e,i,s,n)}},Pr=class extends At{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}},wn=class extends At{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}},Ui=class extends wn{constructor({message:e}={}){super({message:e??"Request timed out."})}},jo=class extends At{constructor(){super(...arguments),this.status=400}},No=class extends At{constructor(){super(...arguments),this.status=401}},$o=class extends At{constructor(){super(...arguments),this.status=403}},Lo=class extends At{constructor(){super(...arguments),this.status=404}},Do=class extends At{constructor(){super(...arguments),this.status=409}},Mo=class extends At{constructor(){super(...arguments),this.status=422}},Fo=class extends At{constructor(){super(...arguments),this.status=429}},Uo=class extends At{};const S_=Object.freeze(Object.defineProperty({__proto__:null,APIConnectionError:wn,APIConnectionTimeoutError:Ui,APIError:At,APIUserAbortError:Pr,AuthenticationError:No,BadRequestError:jo,ConflictError:Do,InternalServerError:Uo,NotFoundError:Lo,OpenAIError:Ie,PermissionDeniedError:$o,RateLimitError:Fo,UnprocessableEntityError:Mo},Symbol.toStringTag,{value:"Module"}));class Tr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let s=!1;const n=new P_;async function*i(){if(!e.body)throw t.abort(),new Ie("Attempted to iterate over a response with no body");const o=new Vr,l=_c(e.body);for await(const c of l)for(const u of o.decode(c)){const d=n.decode(u);d&&(yield d)}for(const c of o.flush()){const u=n.decode(c);u&&(yield u)}}async function*a(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let o=!1;try{for await(const l of i())if(!o){if(l.data.startsWith("[DONE]")){o=!0;continue}if(l.event===null){let c;try{c=JSON.parse(l.data)}catch(u){throw console.error("Could not parse message into JSON:",l.data),console.error("From chunk:",l.raw),u}if(c&&c.error)throw new At(void 0,c.error,void 0,void 0);yield c}}o=!0}catch(l){if(l instanceof Error&&l.name==="AbortError")return;throw l}finally{o||t.abort()}}return new Tr(a,t)}static fromReadableStream(e,t){let s=!1;async function*n(){const a=new Vr,o=_c(e);for await(const l of o)for(const c of a.decode(l))yield c;for(const l of a.flush())yield l}async function*i(){if(s)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let a=!1;try{for await(const o of n())a||o&&(yield JSON.parse(o));a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new Tr(i,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),n=i=>({next:()=>{if(i.length===0){const a=s.next();e.push(a),t.push(a)}return i.shift()}});return[new Tr(()=>n(e),this.controller),new Tr(()=>n(t),this.controller)]}toReadableStream(){const e=this;let t;const s=new TextEncoder;return new ld({async start(){t=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:a}=await t.next();if(a)return n.close();const o=s.encode(JSON.stringify(i)+`
`);n.enqueue(o)}catch(i){n.error(i)}},async cancel(){await t.return?.()}})}}class P_{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,n]=x_(e,":");return n.startsWith(" ")&&(n=n.substring(1)),t==="event"?this.event=n:t==="data"&&this.data.push(n),null}}class Vr{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const s=Vr.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(Vr.NEWLINE_REGEXP);return n.length===1&&!s?(this.buffer.push(n[0]),[]):(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),s||(this.buffer=[n.pop()||""]),n)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Ie(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Ie(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Ie("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Vr.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);Vr.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function x_(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}function _c(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t?.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const pd=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",C_=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&fd(r),fd=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",R_=r=>C_(r)||pd(r)||hd(r);async function md(r,e,t={}){if(r=await r,pd(r)){const n=await r.blob();return e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new Ga([n],e,t)}const s=await I_(r);if(e||(e=N_(r)??"unknown_file"),!t.type){const n=s[0]?.type;typeof n=="string"&&(t={...t,type:n})}return new Ga(s,e,t)}async function I_(r){let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(fd(r))e.push(await r.arrayBuffer());else if($_(r))for await(const t of r)e.push(t);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${r?.constructor?.name}; props: ${j_(r)}`);return e}function j_(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function N_(r){return ha(r.name)||ha(r.filename)||ha(r.path)?.split(/[\\/]/).pop()}const ha=r=>{if(typeof r=="string")return r;if(typeof Buffer<"u"&&r instanceof Buffer)return String(r)},$_=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",yc=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody",en=async r=>{const e=await L_(r.body);return cd(e,r)},L_=async r=>{const e=new od;return await Promise.all(Object.entries(r||{}).map(([t,s])=>za(e,t,s))),e},za=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(R_(t)){const s=await md(t);r.append(e,s)}else if(Array.isArray(t))await Promise.all(t.map(s=>za(r,e+"[]",s)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([s,n])=>za(r,`${e}[${s}]`,n)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var gd={},D_=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},M_=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},xn;async function bd(r){const{response:e}=r;if(r.options.stream)return ys("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):Tr.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;const t=e.headers.get("content-type");if(t?.includes("application/json")||t?.includes("application/vnd.api+json")){const i=await e.json();return ys("response",e.status,e.url,e.headers,i),i}const n=await e.text();return ys("response",e.status,e.url,e.headers,n),n}class Gi extends Promise{constructor(e,t=bd){super(s=>{s(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Gi(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class F_{constructor({baseURL:e,maxRetries:t=2,timeout:s=6e5,httpAgent:n,fetch:i}){this.baseURL=e,this.maxRetries=pa("maxRetries",t),this.timeout=pa("timeout",s),this.httpAgent=n,this.fetch=i??ad}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...q_(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${K_()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(n=>({method:e,path:t,...n})))}getAPIList(e,t,s){return this.requestAPIList(t,{method:"get",path:e,...s})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){const{method:t,path:s,query:n,headers:i={}}=e,a=yc(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,o=this.calculateContentLength(a),l=this.buildURL(s,n);"timeout"in e&&pa("timeout",e.timeout);const c=e.timeout??this.timeout,u=e.httpAgent??this.httpAgent??ud(l),d=c+1e3;typeof u?.options?.timeout=="number"&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);const h=this.buildHeaders({options:e,headers:i,contentLength:o});return{req:{method:t,...a&&{body:a},headers:h,...u&&{agent:u},signal:e.signal??null},url:l,timeout:c}}buildHeaders({options:e,headers:t,contentLength:s}){const n={};s&&(n["content-length"]=s);const i=this.defaultHeaders(e);return Tc(n,i),Tc(n,t),yc(e.body)&&Ws!=="node"&&delete n["content-type"],this.validateHeaders(n,t),n}async prepareOptions(e){}async prepareRequest(e,{url:t,options:s}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,s,n){return At.generate(e,t,s,n)}request(e,t=null){return new Gi(this.makeRequest(e,t))}async makeRequest(e,t){const s=await e;t==null&&(t=s.maxRetries??this.maxRetries),await this.prepareOptions(s);const{req:n,url:i,timeout:a}=this.buildRequest(s);if(await this.prepareRequest(n,{url:i,options:s}),ys("request",i,s,n.headers),s.signal?.aborted)throw new Pr;const o=new AbortController,l=await this.fetchWithTimeout(i,n,a,o).catch(Ha);if(l instanceof Error){if(s.signal?.aborted)throw new Pr;if(t)return this.retryRequest(s,t);throw l.name==="AbortError"?new Ui:new wn({cause:l})}const c=G_(l.headers);if(!l.ok){if(t&&this.shouldRetry(l)){const b=`retrying, ${t} attempts remaining`;return ys(`response (error; ${b})`,l.status,i,c),this.retryRequest(s,t,c)}const u=await l.text().catch(b=>Ha(b).message),d=V_(u),h=d?void 0:u;throw ys(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,l.status,i,c,h),this.makeStatusError(l.status,d,h,c)}return{response:l,options:s,controller:o}}requestAPIList(e,t){const s=this.makeRequest(t,null);return new U_(this,s,e)}buildURL(e,t){const s=Z_(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return wd(n)||(t={...n,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(s.search=this.stringifyQuery(t)),s.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Ie(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,s,n){const{signal:i,...a}=t||{};i&&i.addEventListener("abort",()=>n.abort());const o=setTimeout(()=>n.abort(),s);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...a}).finally(()=>{clearTimeout(o)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s){let n;const i=s?.["retry-after-ms"];if(i){const o=parseFloat(i);Number.isNaN(o)||(n=o)}const a=s?.["retry-after"];if(a&&!n){const o=parseFloat(a);Number.isNaN(o)?n=Date.parse(a)-Date.now():n=o*1e3}if(!(n&&0<=n&&n<60*1e3)){const o=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,o)}return await yd(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const i=t-e,a=Math.min(.5*Math.pow(2,i),8),o=1-Math.random()*.25;return a*o*1e3}getUserAgent(){return`${this.constructor.name}/JS ${us}`}}class _d{constructor(e,t,s,n){xn.set(this,void 0),D_(this,xn,e,"f"),this.options=n,this.response=t,this.body=s}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Ie("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const s=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[n,i]of s)e.url.searchParams.set(n,i);t.query=void 0,t.path=e.url.toString()}return await M_(this,xn,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(xn=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class U_ extends Gi{constructor(e,t,s){super(t,async n=>new s(e,n.response,await bd(n),n.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const G_=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){const s=t.toString();return e[s.toLowerCase()]||e[s]}}),B_={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0,__streamClass:!0},tr=r=>typeof r=="object"&&r!==null&&!wd(r)&&Object.keys(r).every(e=>vd(B_,e)),z_=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":us,"X-Stainless-OS":vc(Deno.build.os),"X-Stainless-Arch":wc(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":us,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":us,"X-Stainless-OS":vc(process.platform),"X-Stainless-Arch":wc(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const r=H_();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":us,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":us,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function H_(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const s=t.exec(navigator.userAgent);if(s){const n=s[1]||0,i=s[2]||0,a=s[3]||0;return{browser:e,version:`${n}.${i}.${a}`}}}return null}const wc=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",vc=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Ec;const q_=()=>Ec??(Ec=z_()),V_=r=>{try{return JSON.parse(r)}catch{return}},W_=new RegExp("^(?:[a-z]+:)?//","i"),Z_=r=>W_.test(r),yd=r=>new Promise(e=>setTimeout(e,r)),pa=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Ie(`${r} must be an integer`);if(e<0)throw new Ie(`${r} must be a positive integer`);return e},Ha=r=>r instanceof Error?r:new Error(r),fa=r=>{if(typeof process<"u")return gd?.[r]?.trim()??void 0;if(typeof Deno<"u")return Deno.env?.get?.(r)?.trim()};function wd(r){if(!r)return!0;for(const e in r)return!1;return!0}function vd(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Tc(r,e){for(const t in e){if(!vd(e,t))continue;const s=t.toLowerCase();if(!s)continue;const n=e[t];n===null?delete r[s]:n!==void 0&&(r[s]=n)}}function ys(r,...e){typeof process<"u"&&gd.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${r}`,...e)}const K_=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),J_=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";let Go=class extends _d{constructor(e,t,s,n){super(e,t,s,n),this.data=s.data||[],this.object=s.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}};class fr extends _d{constructor(e,t,s,n){super(e,t,s,n),this.data=s.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class Be{constructor(e){this._client=e}}let Zn=class extends Be{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}};Zn||(Zn={});let Kn=class extends Be{constructor(){super(...arguments),this.completions=new Zn(this._client)}};(function(r){r.Completions=Zn})(Kn||(Kn={}));class Jn extends Be{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}Jn||(Jn={});class Xn extends Be{create(e,t){return this._client.post("/audio/transcriptions",en({body:e,...t}))}}Xn||(Xn={});class Qn extends Be{create(e,t){return this._client.post("/audio/translations",en({body:e,...t}))}}Qn||(Qn={});class Yn extends Be{constructor(){super(...arguments),this.transcriptions=new Xn(this._client),this.translations=new Qn(this._client),this.speech=new Jn(this._client)}}(function(r){r.Transcriptions=Xn,r.Translations=Qn,r.Speech=Jn})(Yn||(Yn={}));let ei=class extends Be{create(e,t,s){return this._client.post(`/assistants/${e}/files`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/assistants/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}list(e,t={},s){return tr(t)?this.list(e,{},t):this._client.getAPIList(`/assistants/${e}/files`,Bo,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}del(e,t,s){return this._client.delete(`/assistants/${e}/files/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}};class Bo extends fr{}(function(r){r.AssistantFilesPage=Bo})(ei||(ei={}));class ti extends Be{constructor(){super(...arguments),this.files=new ei(this._client)}create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,s){return this._client.post(`/assistants/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}list(e={},t){return tr(e)?this.list({},e):this._client.getAPIList("/assistants",zo,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}class zo extends fr{}(function(r){r.AssistantsPage=zo,r.Files=ei,r.AssistantFilesPage=Bo})(ti||(ti={}));function kc(r){return typeof r.parse=="function"}const ws=r=>r?.role==="assistant",Ed=r=>r?.role==="function",Td=r=>r?.role==="tool";var Dt=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},be=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},pt,Dn,Mn,Bs,zs,Fn,Hs,lr,qs,Un,Gn,ds,qa,ri,Va,Wa,Za,Ka,kd,Ja;const Ac=10;class Ad{constructor(){pt.add(this),this.controller=new AbortController,Dn.set(this,void 0),Mn.set(this,()=>{}),Bs.set(this,()=>{}),zs.set(this,void 0),Fn.set(this,()=>{}),Hs.set(this,()=>{}),lr.set(this,{}),this._chatCompletions=[],this.messages=[],qs.set(this,!1),Un.set(this,!1),Gn.set(this,!1),ds.set(this,!1),Ka.set(this,e=>{if(Dt(this,Un,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Pr),e instanceof Pr)return Dt(this,Gn,!0,"f"),this._emit("abort",e);if(e instanceof Ie)return this._emit("error",e);if(e instanceof Error){const t=new Ie(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Ie(String(e)))}),Dt(this,Dn,new Promise((e,t)=>{Dt(this,Mn,e,"f"),Dt(this,Bs,t,"f")}),"f"),Dt(this,zs,new Promise((e,t)=>{Dt(this,Fn,e,"f"),Dt(this,Hs,t,"f")}),"f"),be(this,Dn,"f").catch(()=>{}),be(this,zs,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},be(this,Ka,"f"))},0)}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(Ed(e)||Td(e))&&e.content)this._emit("functionCallResult",e.content);else if(ws(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ws(e)&&e.tool_calls)for(const s of e.tool_calls)s.type==="function"&&this._emit("functionCall",s.function)}}_connected(){this.ended||(be(this,Mn,"f").call(this),this._emit("connect"))}get ended(){return be(this,qs,"f")}get errored(){return be(this,Un,"f")}get aborted(){return be(this,Gn,"f")}abort(){this.controller.abort()}on(e,t){return(be(this,lr,"f")[e]||(be(this,lr,"f")[e]=[])).push({listener:t}),this}off(e,t){const s=be(this,lr,"f")[e];if(!s)return this;const n=s.findIndex(i=>i.listener===t);return n>=0&&s.splice(n,1),this}once(e,t){return(be(this,lr,"f")[e]||(be(this,lr,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,s)=>{Dt(this,ds,!0,"f"),e!=="error"&&this.once("error",s),this.once(e,t)})}async done(){Dt(this,ds,!0,"f"),await be(this,zs,"f")}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Ie("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),be(this,pt,"m",qa).call(this)}async finalMessage(){return await this.done(),be(this,pt,"m",ri).call(this)}async finalFunctionCall(){return await this.done(),be(this,pt,"m",Va).call(this)}async finalFunctionCallResult(){return await this.done(),be(this,pt,"m",Wa).call(this)}async totalUsage(){return await this.done(),be(this,pt,"m",Za).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(be(this,qs,"f"))return;e==="end"&&(Dt(this,qs,!0,"f"),be(this,Fn,"f").call(this));const s=be(this,lr,"f")[e];if(s&&(be(this,lr,"f")[e]=s.filter(n=>!n.once),s.forEach(({listener:n})=>n(...t))),e==="abort"){const n=t[0];!be(this,ds,"f")&&!s?.length&&Promise.reject(n),be(this,Bs,"f").call(this,n),be(this,Hs,"f").call(this,n),this._emit("end");return}if(e==="error"){const n=t[0];!be(this,ds,"f")&&!s?.length&&Promise.reject(n),be(this,Bs,"f").call(this,n),be(this,Hs,"f").call(this,n),this._emit("end")}}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=be(this,pt,"m",ri).call(this);t&&this._emit("finalMessage",t);const s=be(this,pt,"m",qa).call(this);s&&this._emit("finalContent",s);const n=be(this,pt,"m",Va).call(this);n&&this._emit("finalFunctionCall",n);const i=be(this,pt,"m",Wa).call(this);i!=null&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(a=>a.usage)&&this._emit("totalUsage",be(this,pt,"m",Za).call(this))}async _createChatCompletion(e,t,s){const n=s?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),be(this,pt,"m",kd).call(this,t);const i=await e.create({...t,stream:!1},{...s,signal:this.controller.signal});return this._connected(),this._addChatCompletion(i)}async _runChatCompletion(e,t,s){for(const n of t.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,t,s)}async _runFunctions(e,t,s){const n="function",{function_call:i="auto",stream:a,...o}=t,l=typeof i!="string"&&i?.name,{maxChatCompletions:c=Ac}=s||{},u={};for(const h of t.functions)u[h.name||h.function.name]=h;const d=t.functions.map(h=>({name:h.name||h.function.name,parameters:h.parameters,description:h.description}));for(const h of t.messages)this._addMessage(h,!1);for(let h=0;h<c;++h){const m=(await this._createChatCompletion(e,{...o,function_call:i,functions:d,messages:[...this.messages]},s)).choices[0]?.message;if(!m)throw new Ie("missing message in ChatCompletion response");if(!m.function_call)return;const{name:b,arguments:_}=m.function_call,A=u[b];if(A){if(l&&l!==b){const k=`Invalid function_call: ${JSON.stringify(b)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,name:b,content:k});continue}}else{const k=`Invalid function_call: ${JSON.stringify(b)}. Available options are: ${d.map(x=>JSON.stringify(x.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:b,content:k});continue}let w;try{w=kc(A)?await A.parse(_):_}catch(k){this._addMessage({role:n,name:b,content:k instanceof Error?k.message:String(k)});continue}const T=await A.function(w,this),E=be(this,pt,"m",Ja).call(this,T);if(this._addMessage({role:n,name:b,content:E}),l)return}}async _runTools(e,t,s){const n="tool",{tool_choice:i="auto",stream:a,...o}=t,l=typeof i!="string"&&i?.function?.name,{maxChatCompletions:c=Ac}=s||{},u={};for(const h of t.tools)h.type==="function"&&(u[h.function.name||h.function.function.name]=h.function);const d="tools"in t?t.tools.map(h=>h.type==="function"?{type:"function",function:{name:h.function.name||h.function.function.name,parameters:h.function.parameters,description:h.function.description}}:h):void 0;for(const h of t.messages)this._addMessage(h,!1);for(let h=0;h<c;++h){const m=(await this._createChatCompletion(e,{...o,tool_choice:i,tools:d,messages:[...this.messages]},s)).choices[0]?.message;if(!m)throw new Ie("missing message in ChatCompletion response");if(!m.tool_calls)return;for(const b of m.tool_calls){if(b.type!=="function")continue;const _=b.id,{name:A,arguments:w}=b.function,T=u[A];if(T){if(l&&l!==A){const C=`Invalid tool_call: ${JSON.stringify(A)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:n,tool_call_id:_,content:C});continue}}else{const C=`Invalid tool_call: ${JSON.stringify(A)}. Available options are: ${d.map(H=>JSON.stringify(H.function.name)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:_,content:C});continue}let E;try{E=kc(T)?await T.parse(w):w}catch(C){const H=C instanceof Error?C.message:String(C);this._addMessage({role:n,tool_call_id:_,content:H});continue}const k=await T.function(E,this),x=be(this,pt,"m",Ja).call(this,k);if(this._addMessage({role:n,tool_call_id:_,content:x}),l)return}}}}Dn=new WeakMap,Mn=new WeakMap,Bs=new WeakMap,zs=new WeakMap,Fn=new WeakMap,Hs=new WeakMap,lr=new WeakMap,qs=new WeakMap,Un=new WeakMap,Gn=new WeakMap,ds=new WeakMap,Ka=new WeakMap,pt=new WeakSet,qa=function(){return be(this,pt,"m",ri).call(this).content??null},ri=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ws(t))return{...t,content:t.content??null}}throw new Ie("stream ended without producing a ChatCompletionMessage with role=assistant")},Va=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ws(t)&&t?.function_call)return t.function_call;if(ws(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},Wa=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Ed(t)&&t.content!=null||Td(t)&&t.content!=null&&this.messages.some(s=>s.role==="assistant"&&s.tool_calls?.some(n=>n.type==="function"&&n.id===t.tool_call_id)))return t.content}},Za=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},kd=function(e){if(e.n!=null&&e.n>1)throw new Ie("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Ja=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class tn extends Ad{static runFunctions(e,t,s){const n=new tn,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,i)),n}static runTools(e,t,s){const n=new tn,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}_addMessage(e){super._addMessage(e),ws(e)&&e.content&&this._emit("content",e.content)}}var Mt=function(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)},ma=function(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t},Jt,mr,ga,ba,Cn,Oc;class rn extends Ad{constructor(){super(...arguments),Jt.add(this),mr.set(this,void 0)}get currentChatCompletionSnapshot(){return Mt(this,mr,"f")}static fromReadableStream(e){const t=new rn;return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,s){const n=new rn;return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,s){const n=s?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Mt(this,Jt,"m",ga).call(this);const i=await e.create({...t,stream:!0},{...s,signal:this.controller.signal});this._connected();for await(const a of i)Mt(this,Jt,"m",ba).call(this,a);if(i.controller.signal?.aborted)throw new Pr;return this._addChatCompletion(Mt(this,Jt,"m",Cn).call(this))}async _fromReadableStream(e,t){const s=t?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),Mt(this,Jt,"m",ga).call(this),this._connected();const n=Tr.fromReadableStream(e,this.controller);let i;for await(const a of n)i&&i!==a.id&&this._addChatCompletion(Mt(this,Jt,"m",Cn).call(this)),Mt(this,Jt,"m",ba).call(this,a),i=a.id;if(n.controller.signal?.aborted)throw new Pr;return this._addChatCompletion(Mt(this,Jt,"m",Cn).call(this))}[(mr=new WeakMap,Jt=new WeakSet,ga=function(){this.ended||ma(this,mr,void 0,"f")},ba=function(t){if(this.ended)return;const s=Mt(this,Jt,"m",Oc).call(this,t);this._emit("chunk",t,s);const n=t.choices[0]?.delta?.content,i=s.choices[0]?.message;n!=null&&i?.role==="assistant"&&i?.content&&this._emit("content",n,i.content)},Cn=function(){if(this.ended)throw new Ie("stream has ended, this shouldn't happen");const t=Mt(this,mr,"f");if(!t)throw new Ie("request ended without sending any chunks");return ma(this,mr,void 0,"f"),X_(t)},Oc=function(t){var s,n,i;let a=Mt(this,mr,"f");const{choices:o,...l}=t;a?Object.assign(a,l):a=ma(this,mr,{...l,choices:[]},"f");for(const{delta:c,finish_reason:u,index:d,logprobs:h=null,...f}of t.choices){let m=a.choices[d];if(m||(m=a.choices[d]={finish_reason:u,index:d,message:{},logprobs:h,...f}),h)if(!m.logprobs)m.logprobs=Object.assign({},h);else{const{content:E,...k}=h;Object.assign(m.logprobs,k),E&&((s=m.logprobs).content??(s.content=[]),m.logprobs.content.push(...E))}if(u&&(m.finish_reason=u),Object.assign(m,f),!c)continue;const{content:b,function_call:_,role:A,tool_calls:w,...T}=c;if(Object.assign(m.message,T),b&&(m.message.content=(m.message.content||"")+b),A&&(m.message.role=A),_&&(m.message.function_call?(_.name&&(m.message.function_call.name=_.name),_.arguments&&((n=m.message.function_call).arguments??(n.arguments=""),m.message.function_call.arguments+=_.arguments)):m.message.function_call=_),w){m.message.tool_calls||(m.message.tool_calls=[]);for(const{index:E,id:k,type:x,function:C,...H}of w){const R=(i=m.message.tool_calls)[E]??(i[E]={});Object.assign(R,H),k&&(R.id=k),x&&(R.type=x),C&&(R.function??(R.function={arguments:""})),C?.name&&(R.function.name=C.name),C?.arguments&&(R.function.arguments+=C.arguments)}}}return a},Symbol.asyncIterator)](){const e=[],t=[];let s=!1;return this.on("chunk",n=>{const i=t.shift();i?i(n):e.push(n)}),this.on("end",()=>{s=!0;for(const n of t)n(void 0);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:s?{value:void 0,done:!0}:new Promise(i=>t.push(i)).then(i=>i?{value:i,done:!1}:{value:void 0,done:!0})}}toReadableStream(){return new Tr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function X_(r){const{id:e,choices:t,created:s,model:n,system_fingerprint:i,...a}=r;return{...a,id:e,choices:t.map(({message:o,finish_reason:l,index:c,logprobs:u,...d})=>{if(!l)throw new Ie(`missing finish_reason for choice ${c}`);const{content:h=null,function_call:f,tool_calls:m,...b}=o,_=o.role;if(!_)throw new Ie(`missing role for choice ${c}`);if(f){const{arguments:A,name:w}=f;if(A==null)throw new Ie(`missing function_call.arguments for choice ${c}`);if(!w)throw new Ie(`missing function_call.name for choice ${c}`);return{...d,message:{content:h,function_call:{arguments:A,name:w},role:_},finish_reason:l,index:c,logprobs:u}}return m?{...d,index:c,finish_reason:l,logprobs:u,message:{...b,role:_,content:h,tool_calls:m.map((A,w)=>{const{function:T,type:E,id:k,...x}=A,{arguments:C,name:H,...R}=T||{};if(k==null)throw new Ie(`missing choices[${c}].tool_calls[${w}].id
${Rn(r)}`);if(E==null)throw new Ie(`missing choices[${c}].tool_calls[${w}].type
${Rn(r)}`);if(H==null)throw new Ie(`missing choices[${c}].tool_calls[${w}].function.name
${Rn(r)}`);if(C==null)throw new Ie(`missing choices[${c}].tool_calls[${w}].function.arguments
${Rn(r)}`);return{...x,id:k,type:E,function:{...R,name:H,arguments:C}}})}}:{...d,message:{...b,content:h,role:_},finish_reason:l,index:c,logprobs:u}}),created:s,model:n,object:"chat.completion",...i?{system_fingerprint:i}:{}}}function Rn(r){return JSON.stringify(r)}class vs extends rn{static fromReadableStream(e){const t=new vs;return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,s){const n=new vs,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,i)),n}static runTools(e,t,s){const n=new vs,i={...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,i)),n}}let Od=class extends Be{runFunctions(e,t){return e.stream?vs.runFunctions(this._client.chat.completions,e,t):tn.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?vs.runTools(this._client.chat.completions,e,t):tn.runTools(this._client.chat.completions,e,t)}stream(e,t){return rn.createChatCompletion(this._client.chat.completions,e,t)}};class si extends Be{constructor(){super(...arguments),this.completions=new Od(this._client)}}(function(r){r.Completions=Od})(si||(si={}));let ni=class extends Be{retrieve(e,t,s,n){return this._client.get(`/threads/${e}/messages/${t}/files/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,s={},n){return tr(s)?this.list(e,t,{},s):this._client.getAPIList(`/threads/${e}/messages/${t}/files`,Ho,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}};class Ho extends fr{}(function(r){r.MessageFilesPage=Ho})(ni||(ni={}));class ii extends Be{constructor(){super(...arguments),this.files=new ni(this._client)}create(e,t,s){return this._client.post(`/threads/${e}/messages`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/threads/${e}/messages/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}update(e,t,s,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},s){return tr(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,qo,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}}class qo extends fr{}(function(r){r.ThreadMessagesPage=qo,r.Files=ni,r.MessageFilesPage=Ho})(ii||(ii={}));class ai extends Be{retrieve(e,t,s,n){return this._client.get(`/threads/${e}/runs/${t}/steps/${s}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,s={},n){return tr(s)?this.list(e,t,{},s):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Vo,{query:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Vo extends fr{}(function(r){r.RunStepsPage=Vo})(ai||(ai={}));class oi extends Be{constructor(){super(...arguments),this.steps=new ai(this._client)}create(e,t,s){return this._client.post(`/threads/${e}/runs`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}retrieve(e,t,s){return this._client.get(`/threads/${e}/runs/${t}`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}update(e,t,s,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},s){return tr(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Wo,{query:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}cancel(e,t,s){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}submitToolOutputs(e,t,s,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:s,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class Wo extends fr{}(function(r){r.RunsPage=Wo,r.Steps=ai,r.RunStepsPage=Vo})(oi||(oi={}));class li extends Be{constructor(){super(...arguments),this.runs=new oi(this._client),this.messages=new ii(this._client)}create(e={},t){return tr(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,s){return this._client.post(`/threads/${e}`,{body:t,...s,headers:{"OpenAI-Beta":"assistants=v1",...s?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}(function(r){r.Runs=oi,r.RunsPage=Wo,r.Messages=ii,r.ThreadMessagesPage=qo})(li||(li={}));class ci extends Be{constructor(){super(...arguments),this.chat=new si(this._client),this.assistants=new ti(this._client),this.threads=new li(this._client)}}(function(r){r.Chat=si,r.Assistants=ti,r.AssistantsPage=zo,r.Threads=li})(ci||(ci={}));class ui extends Be{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}ui||(ui={});class di extends Be{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}di||(di={});class hi extends Be{create(e,t){return this._client.post("/files",en({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return tr(e)?this.list({},e):this._client.getAPIList("/files",Zo,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:s=30*60*1e3}={}){const n=new Set(["processed","error","deleted"]),i=Date.now();let a=await this.retrieve(e);for(;!a.status||!n.has(a.status);)if(await yd(t),a=await this.retrieve(e),Date.now()-i>s)throw new Ui({message:`Giving up on waiting for file ${e} to finish processing after ${s} milliseconds.`});return a}}class Zo extends Go{}(function(r){r.FileObjectsPage=Zo})(hi||(hi={}));class pi extends Be{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return tr(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ko,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},s){return tr(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Jo,{query:t,...s})}}class Ko extends fr{}class Jo extends fr{}(function(r){r.FineTuningJobsPage=Ko,r.FineTuningJobEventsPage=Jo})(pi||(pi={}));class fi extends Be{constructor(){super(...arguments),this.jobs=new pi(this._client)}}(function(r){r.Jobs=pi,r.FineTuningJobsPage=Ko,r.FineTuningJobEventsPage=Jo})(fi||(fi={}));class mi extends Be{createVariation(e,t){return this._client.post("/images/variations",en({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",en({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}mi||(mi={});class gi extends Be{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Xo,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Xo extends Go{}(function(r){r.ModelsPage=Xo})(gi||(gi={}));class bi extends Be{create(e,t){return this._client.post("/moderations",{body:e,...t})}}bi||(bi={});var Sd;let at=class extends F_{constructor({baseURL:e=fa("OPENAI_BASE_URL"),apiKey:t=fa("OPENAI_API_KEY"),organization:s=fa("OPENAI_ORG_ID")??null,...n}={}){if(t===void 0)throw new Ie("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const i={apiKey:t,organization:s,...n,baseURL:e||"https://api.openai.com/v1"};if(!i.dangerouslyAllowBrowser&&J_())throw new Ie(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:i.baseURL,timeout:i.timeout??6e5,httpAgent:i.httpAgent,maxRetries:i.maxRetries,fetch:i.fetch}),this.completions=new ui(this),this.chat=new Kn(this),this.embeddings=new di(this),this.files=new hi(this),this.images=new mi(this),this.audio=new Yn(this),this.moderations=new bi(this),this.models=new gi(this),this.fineTuning=new fi(this),this.beta=new ci(this),this._options=i,this.apiKey=t,this.organization=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}};Sd=at;at.OpenAI=Sd;at.OpenAIError=Ie;at.APIError=At;at.APIConnectionError=wn;at.APIConnectionTimeoutError=Ui;at.APIUserAbortError=Pr;at.NotFoundError=Lo;at.ConflictError=Do;at.RateLimitError=Fo;at.BadRequestError=jo;at.AuthenticationError=No;at.InternalServerError=Uo;at.PermissionDeniedError=$o;at.UnprocessableEntityError=Mo;const{OpenAIError:Hk,APIError:qk,APIConnectionError:Vk,APIConnectionTimeoutError:Q_,APIUserAbortError:Y_,NotFoundError:Wk,ConflictError:Zk,RateLimitError:Kk,BadRequestError:Jk,AuthenticationError:Xk,InternalServerError:Qk,PermissionDeniedError:Yk,UnprocessableEntityError:e1}=S_;(function(r){r.toFile=md,r.fileFromPath=dd,r.Page=Go,r.CursorPage=fr,r.Completions=ui,r.Chat=Kn,r.Embeddings=di,r.Files=hi,r.FileObjectsPage=Zo,r.Images=mi,r.Audio=Yn,r.Moderations=bi,r.Models=gi,r.ModelsPage=Xo,r.FineTuning=fi,r.Beta=ci})(at||(at={}));var ey=function(r,e){if(typeof r!="string")throw new TypeError("Expected a string");return e=typeof e>"u"?"_":e,r.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()};const ty=Qr(ey);var Pd={exports:{}};const ry=/[\p{Lu}]/u,sy=/[\p{Ll}]/u,Sc=/^[\p{Lu}](?![\p{Lu}])/gu,xd=/([\p{Alpha}\p{N}_]|$)/u,Cd=/[_.\- ]+/,ny=new RegExp("^"+Cd.source),Pc=new RegExp(Cd.source+xd.source,"gu"),xc=new RegExp("\\d+"+xd.source,"gu"),iy=(r,e,t)=>{let s=!1,n=!1,i=!1;for(let a=0;a<r.length;a++){const o=r[a];s&&ry.test(o)?(r=r.slice(0,a)+"-"+r.slice(a),s=!1,i=n,n=!0,a++):n&&i&&sy.test(o)?(r=r.slice(0,a-1)+"-"+r.slice(a-1),i=n,n=!1,s=!0):(s=e(o)===o&&t(o)!==o,i=n,n=t(o)===o&&e(o)!==o)}return r},ay=(r,e)=>(Sc.lastIndex=0,r.replace(Sc,t=>e(t))),oy=(r,e)=>(Pc.lastIndex=0,xc.lastIndex=0,r.replace(Pc,(t,s)=>e(s)).replace(xc,t=>e(t))),Rd=(r,e)=>{if(!(typeof r=="string"||Array.isArray(r)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(r)?r=r.map(i=>i.trim()).filter(i=>i.length).join("-"):r=r.trim(),r.length===0)return"";const t=e.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(e.locale),s=e.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(e.locale);return r.length===1?e.pascalCase?s(r):t(r):(r!==t(r)&&(r=iy(r,t,s)),r=r.replace(ny,""),e.preserveConsecutiveUppercase?r=ay(r,t):r=t(r),e.pascalCase&&(r=s(r.charAt(0))+r.slice(1)),oy(r,s))};Pd.exports=Rd;Pd.exports.default=Rd;function ly(r,e){return e?.[r]||ty(r)}function cy(r,e,t){const s={};for(const n in r)Object.hasOwn(r,n)&&(s[e(n,t)]=r[n]);return s}function Cc(r){return Array.isArray(r)?[...r]:{...r}}function uy(r,e){const t=Cc(r);for(const[s,n]of Object.entries(e)){const[i,...a]=s.split(".").reverse();let o=t;for(const l of a.reverse()){if(o[l]===void 0)break;o[l]=Cc(o[l]),o=o[l]}o[i]!==void 0&&(o[i]={lc:1,type:"secret",id:[n]})}return t}function Id(r){const e=Object.getPrototypeOf(r);return typeof r.lc_name=="function"&&(typeof e.lc_name!="function"||r.lc_name()!==e.lc_name())?r.lc_name():r.name}class Wr{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Id(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Wr||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},s=Object.keys(this.lc_kwargs).reduce((n,i)=>(n[i]=i in this?this[i]:this.lc_kwargs[i],n),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(s,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach(n=>{let i=this,a=s;const[o,...l]=n.split(".").reverse();for(const c of l.reverse()){if(!(c in i)||i[c]===void 0)return;(!(c in a)||a[c]===void 0)&&(typeof i[c]=="object"&&i[c]!=null?a[c]={}:Array.isArray(i[c])&&(a[c]=[])),i=i[c],a=a[c]}o in i&&i[o]!==void 0&&(a[o]=a[o]||i[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:cy(Object.keys(t).length?uy(s,t):s,ly,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Is(r,e){return typeof r=="string"?typeof e=="string"?r+e:[{type:"text",text:r},...e]:Array.isArray(e)?[...r,...e]:[...r,{type:"text",text:e}]}class vn extends Wr{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}constructor(e,t){typeof e=="string"&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}toChunk(){const e=this._getType();if(e==="human")return new Bi({...this});if(e==="ai")return new En({...this});if(e==="system")return new zi({...this});if(e==="function")return new Hi({...this});if(Tn.isInstance(this))return new qi({...this});throw new Error("Unknown message type.")}}function Rc(r){return Array.isArray(r)&&r.every(e=>typeof e.index=="number")}function Ct(r,e){const t={...r};for(const[s,n]of Object.entries(e))if(t[s]==null)t[s]=n;else{if(n==null)continue;if(typeof t[s]!=typeof n||Array.isArray(t[s])!==Array.isArray(n))throw new Error(`field[${s}] already exists in the message chunk, but with a different type.`);if(typeof t[s]=="string")t[s]=t[s]+n;else if(!Array.isArray(t[s])&&typeof t[s]=="object")t[s]=Ct(t[s],n);else if(s==="tool_calls"&&Rc(t[s])&&Rc(n))for(const i of n)t[s]?.[i.index]!==void 0?t[s]=t[s]?.map((a,o)=>o!==i.index?a:{...a,...i,function:{name:i.function.name??a.function.name,arguments:(a.function.arguments??"")+(i.function.arguments??"")}}):t[s][i.index]=i;else if(Array.isArray(t[s]))t[s]=t[s].concat(n);else{if(t[s]===n)continue;console.warn(`field[${s}] already exists in this message chunk and value has unsupported type.`)}}return t}class js extends vn{}class _i extends vn{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Bi extends js{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new Bi({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata)})}}class jd extends vn{static lc_name(){return"AIMessage"}_getType(){return"ai"}}class En extends js{static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}concat(e){return new En({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata)})}}class dy extends vn{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class zi extends js{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new zi({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata)})}}class Hi extends js{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Hi({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata),name:this.name??""})}}class Qo extends js{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new Qo({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata),tool_call_id:this.tool_call_id})}}class Tn extends vn{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return Tn}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}}function Yo(r){return typeof r?._getType=="function"}function hy(r){return Yo(r)&&typeof r.concat=="function"}function Vs(r){if(typeof r=="string")return new _i(r);if(Yo(r))return r;const[e,t]=r;if(e==="human"||e==="user")return new _i({content:t});if(e==="ai"||e==="assistant")return new jd({content:t});if(e==="system")return new dy({content:t});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}class qi extends js{static lc_name(){return"ChatMessageChunk"}constructor(e,t){typeof e=="string"&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new qi({content:Is(this.content,e.content),additional_kwargs:Ct(this.additional_kwargs,e.additional_kwargs),response_metadata:Ct(this.response_metadata,e.response_metadata),role:this.role})}}function Nd(r,e="Human",t="AI"){const s=[];for(const n of r){let i;if(n._getType()==="human")i=e;else if(n._getType()==="ai")i=t;else if(n._getType()==="system")i="System";else if(n._getType()==="function")i="Function";else if(n._getType()==="tool")i="Tool";else if(n._getType()==="generic")i=n.role;else throw new Error(`Got unsupported message type: ${n._getType()}`);const a=n.name?`${n.name}, `:"";s.push(`${i}: ${a}${n.content}`)}return s.join(`
`)}const Ic="__run";class Vi{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Vi({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class sn extends Vi{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new sn({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}var py={};const fy=()=>typeof window<"u"&&typeof window.document<"u",my=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",gy=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),$d=()=>typeof Deno<"u",by=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!$d(),_y=()=>{let r;return fy()?r="browser":by()?r="node":my()?r="webworker":gy()?r="jsdom":$d()?r="deno":r="other",r};let _a;async function yy(){return _a===void 0&&(_a={library:"langchain-js",runtime:_y()}),_a}function St(r){try{return typeof process<"u"?py?.[r]:void 0}catch{return}}/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */var wy=typeof window=="object"?window:{},me="0123456789abcdef".split(""),vy=[-2147483648,8388608,32768,128],Ft=[24,16,8,0],it=[];function qt(r){r?(it[0]=it[16]=it[1]=it[2]=it[3]=it[4]=it[5]=it[6]=it[7]=it[8]=it[9]=it[10]=it[11]=it[12]=it[13]=it[14]=it[15]=0,this.blocks=it):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}qt.prototype.update=function(r){if(!this.finalized){var e=typeof r!="string";e&&r.constructor===wy.ArrayBuffer&&(r=new Uint8Array(r));for(var t,s=0,n,i=r.length||0,a=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(n=this.start;s<i&&n<64;++s)a[n>>2]|=r[s]<<Ft[n++&3];else for(n=this.start;s<i&&n<64;++s)t=r.charCodeAt(s),t<128?a[n>>2]|=t<<Ft[n++&3]:t<2048?(a[n>>2]|=(192|t>>6)<<Ft[n++&3],a[n>>2]|=(128|t&63)<<Ft[n++&3]):t<55296||t>=57344?(a[n>>2]|=(224|t>>12)<<Ft[n++&3],a[n>>2]|=(128|t>>6&63)<<Ft[n++&3],a[n>>2]|=(128|t&63)<<Ft[n++&3]):(t=65536+((t&1023)<<10|r.charCodeAt(++s)&1023),a[n>>2]|=(240|t>>18)<<Ft[n++&3],a[n>>2]|=(128|t>>12&63)<<Ft[n++&3],a[n>>2]|=(128|t>>6&63)<<Ft[n++&3],a[n>>2]|=(128|t&63)<<Ft[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=a[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};qt.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,e=this.lastByteIndex;r[16]=this.block,r[e>>2]|=vy[e&3],this.block=r[16],e>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}};qt.prototype.hash=function(){var r=this.h0,e=this.h1,t=this.h2,s=this.h3,n=this.h4,i,a,o,l=this.blocks;for(a=16;a<80;++a)o=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=o<<1|o>>>31;for(a=0;a<20;a+=5)i=e&t|~e&s,o=r<<5|r>>>27,n=o+i+n+1518500249+l[a]<<0,e=e<<30|e>>>2,i=r&e|~r&t,o=n<<5|n>>>27,s=o+i+s+1518500249+l[a+1]<<0,r=r<<30|r>>>2,i=n&r|~n&e,o=s<<5|s>>>27,t=o+i+t+1518500249+l[a+2]<<0,n=n<<30|n>>>2,i=s&n|~s&r,o=t<<5|t>>>27,e=o+i+e+1518500249+l[a+3]<<0,s=s<<30|s>>>2,i=t&s|~t&n,o=e<<5|e>>>27,r=o+i+r+1518500249+l[a+4]<<0,t=t<<30|t>>>2;for(;a<40;a+=5)i=e^t^s,o=r<<5|r>>>27,n=o+i+n+1859775393+l[a]<<0,e=e<<30|e>>>2,i=r^e^t,o=n<<5|n>>>27,s=o+i+s+1859775393+l[a+1]<<0,r=r<<30|r>>>2,i=n^r^e,o=s<<5|s>>>27,t=o+i+t+1859775393+l[a+2]<<0,n=n<<30|n>>>2,i=s^n^r,o=t<<5|t>>>27,e=o+i+e+1859775393+l[a+3]<<0,s=s<<30|s>>>2,i=t^s^n,o=e<<5|e>>>27,r=o+i+r+1859775393+l[a+4]<<0,t=t<<30|t>>>2;for(;a<60;a+=5)i=e&t|e&s|t&s,o=r<<5|r>>>27,n=o+i+n-1894007588+l[a]<<0,e=e<<30|e>>>2,i=r&e|r&t|e&t,o=n<<5|n>>>27,s=o+i+s-1894007588+l[a+1]<<0,r=r<<30|r>>>2,i=n&r|n&e|r&e,o=s<<5|s>>>27,t=o+i+t-1894007588+l[a+2]<<0,n=n<<30|n>>>2,i=s&n|s&r|n&r,o=t<<5|t>>>27,e=o+i+e-1894007588+l[a+3]<<0,s=s<<30|s>>>2,i=t&s|t&n|s&n,o=e<<5|e>>>27,r=o+i+r-1894007588+l[a+4]<<0,t=t<<30|t>>>2;for(;a<80;a+=5)i=e^t^s,o=r<<5|r>>>27,n=o+i+n-899497514+l[a]<<0,e=e<<30|e>>>2,i=r^e^t,o=n<<5|n>>>27,s=o+i+s-899497514+l[a+1]<<0,r=r<<30|r>>>2,i=n^r^e,o=s<<5|s>>>27,t=o+i+t-899497514+l[a+2]<<0,n=n<<30|n>>>2,i=s^n^r,o=t<<5|t>>>27,e=o+i+e-899497514+l[a+3]<<0,s=s<<30|s>>>2,i=t^s^n,o=e<<5|e>>>27,r=o+i+r-899497514+l[a+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+s<<0,this.h4=this.h4+n<<0};qt.prototype.hex=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,s=this.h3,n=this.h4;return me[r>>28&15]+me[r>>24&15]+me[r>>20&15]+me[r>>16&15]+me[r>>12&15]+me[r>>8&15]+me[r>>4&15]+me[r&15]+me[e>>28&15]+me[e>>24&15]+me[e>>20&15]+me[e>>16&15]+me[e>>12&15]+me[e>>8&15]+me[e>>4&15]+me[e&15]+me[t>>28&15]+me[t>>24&15]+me[t>>20&15]+me[t>>16&15]+me[t>>12&15]+me[t>>8&15]+me[t>>4&15]+me[t&15]+me[s>>28&15]+me[s>>24&15]+me[s>>20&15]+me[s>>16&15]+me[s>>12&15]+me[s>>8&15]+me[s>>4&15]+me[s&15]+me[n>>28&15]+me[n>>24&15]+me[n>>20&15]+me[n>>16&15]+me[n>>12&15]+me[n>>8&15]+me[n>>4&15]+me[n&15]};qt.prototype.toString=qt.prototype.hex;qt.prototype.digest=function(){this.finalize();var r=this.h0,e=this.h1,t=this.h2,s=this.h3,n=this.h4;return[r>>24&255,r>>16&255,r>>8&255,r&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,s>>24&255,s>>16&255,s>>8&255,s&255,n>>24&255,n>>16&255,n>>8&255,n&255]};qt.prototype.array=qt.prototype.digest;qt.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(20),e=new DataView(r);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),r};const Ey=r=>new qt(!0).update(r).hex(),jc=(...r)=>Ey(r.join("_"));class Ty{}const ky=new Map;class el extends Ty{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(jc(e,t))??null)}async update(e,t,s){this.cache.set(jc(e,t),s)}static global(){return new el(ky)}}class Ld extends Wr{}class Dd extends Ld{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new _i(this.value)]}}class Md extends Ld{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return Nd(this.messages)}toChatMessages(){return this.messages}}var Wi={exports:{}},Fd={};function jt(r,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Ay=jt;jt.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};jt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};jt.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var e=new Date().getTime();if(r&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var t=this._timeouts.shift();if(t===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},t),this._options.unref&&this._timer.unref(),!0};jt.prototype.attempt=function(r,e){this._fn=r,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){t._operationTimeoutCb()},t._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};jt.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)};jt.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)};jt.prototype.start=jt.prototype.try;jt.prototype.errors=function(){return this._errors};jt.prototype.attempts=function(){return this._attempts};jt.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},e=null,t=0,s=0;s<this._errors.length;s++){var n=this._errors[s],i=n.message,a=(r[i]||0)+1;r[i]=a,a>=t&&(e=n,t=a)}return e};(function(r){var e=Ay;r.operation=function(t){var s=r.timeouts(t);return new e(s,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in t)s[n]=t[n];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],a=0;a<s.retries;a++)i.push(this.createTimeout(a,s));return t&&t.forever&&!i.length&&i.push(this.createTimeout(a,s)),i.sort(function(o,l){return o-l}),i},r.createTimeout=function(t,s){var n=s.randomize?Math.random()+1:1,i=Math.round(n*Math.max(s.minTimeout,1)*Math.pow(s.factor,t));return i=Math.min(i,s.maxTimeout),i},r.wrap=function(t,s,n){if(s instanceof Array&&(n=s,s=null),!n){n=[];for(var i in t)typeof t[i]=="function"&&n.push(i)}for(var a=0;a<n.length;a++){var o=n[a],l=t[o];t[o]=function(u){var d=r.operation(s),h=Array.prototype.slice.call(arguments,1),f=h.pop();h.push(function(m){d.retry(m)||(m&&(arguments[0]=d.mainError()),f.apply(this,arguments))}),d.attempt(function(){u.apply(t,h)})}.bind(t,l),t[o].options=s}}})(Fd);var Oy=Fd;const Sy=Oy,Py=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class Ud extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const xy=(r,e,t)=>{const s=t.retries-(e-1);return r.attemptNumber=e,r.retriesLeft=s,r},Cy=r=>Py.includes(r),Gd=(r,e)=>new Promise((t,s)=>{e={onFailedAttempt:()=>{},retries:10,...e};const n=Sy.operation(e);n.attempt(async i=>{try{t(await r(i))}catch(a){if(!(a instanceof Error)){s(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof Ud)n.stop(),s(a.originalError);else if(a instanceof TypeError&&!Cy(a.message))n.stop(),s(a);else{xy(a,i,e);try{await e.onFailedAttempt(a)}catch(o){s(o);return}n.retry(a)||s(n.mainError())}}})});Wi.exports=Gd;Wi.exports.default=Gd;Wi.exports.AbortError=Ud;var Ry=Wi.exports;const yi=Qr(Ry);var Bd={},zd={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(t=!1));function n(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new n(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new s:delete l._events[c]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,f,m){var b=t?t+c:c;if(!this._events[b])return!1;var _=this._events[b],A=arguments.length,w,T;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),A){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,u),!0;case 3:return _.fn.call(_.context,u,d),!0;case 4:return _.fn.call(_.context,u,d,h),!0;case 5:return _.fn.call(_.context,u,d,h,f),!0;case 6:return _.fn.call(_.context,u,d,h,f,m),!0}for(T=1,w=new Array(A-1);T<A;T++)w[T-1]=arguments[T];_.fn.apply(_.context,w)}else{var E=_.length,k;for(T=0;T<E;T++)switch(_[T].once&&this.removeListener(c,_[T].fn,void 0,!0),A){case 1:_[T].fn.call(_[T].context);break;case 2:_[T].fn.call(_[T].context,u);break;case 3:_[T].fn.call(_[T].context,u,d);break;case 4:_[T].fn.call(_[T].context,u,d,h);break;default:if(!w)for(k=1,w=new Array(A-1);k<A;k++)w[k-1]=arguments[k];_[T].fn.apply(_[T].context,w)}}return!0},o.prototype.on=function(c,u,d){return i(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return i(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&a(this,f);else{for(var b=0,_=[],A=m.length;b<A;b++)(m[b].fn!==u||h&&!m[b].once||d&&m[b].context!==d)&&_.push(m[b]);_.length?this._events[f]=_.length===1?_[0]:_:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(zd);var Iy=zd.exports,Zi={exports:{}},jy=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(s=>{s(e())}).then(()=>t),t=>new Promise(s=>{s(e())}).then(()=>{throw t})));const Ny=jy;class Hd extends Error{constructor(e){super(e),this.name="TimeoutError"}}const qd=(r,e,t)=>new Promise((s,n)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){s(r);return}const i=setTimeout(()=>{if(typeof t=="function"){try{s(t())}catch(l){n(l)}return}const a=typeof t=="string"?t:`Promise timed out after ${e} milliseconds`,o=t instanceof Error?t:new Hd(a);typeof r.cancel=="function"&&r.cancel(),n(o)},e);Ny(r.then(s,n),()=>{clearTimeout(i)})});Zi.exports=qd;Zi.exports.default=qd;Zi.exports.TimeoutError=Hd;var $y=Zi.exports,tl={},rl={};Object.defineProperty(rl,"__esModule",{value:!0});function Ly(r,e,t){let s=0,n=r.length;for(;n>0;){const i=n/2|0;let a=s+i;t(r[a],e)<=0?(s=++a,n-=i+1):n=i}return s}rl.default=Ly;Object.defineProperty(tl,"__esModule",{value:!0});const Dy=rl;class My{constructor(){this._queue=[]}enqueue(e,t){t=Object.assign({priority:0},t);const s={priority:t.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority){this._queue.push(s);return}const n=Dy.default(this._queue,s,(i,a)=>a.priority-i.priority);this._queue.splice(n,0,s)}dequeue(){const e=this._queue.shift();return e?.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this._queue.length}}tl.default=My;Object.defineProperty(Bd,"__esModule",{value:!0});const Fy=Iy,Vd=$y,Uy=tl,In=()=>{},Gy=new Vd.TimeoutError;class By extends Fy{constructor(e){var t,s,n,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=In,this._resolveIdle=In,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Uy.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(s=(t=e.intervalCap)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(i=(n=e.interval)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=In,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=In,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const t=this._intervalEnd-e;if(t<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return t?(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((s,n)=>{const i=async()=>{this._pendingCount++,this._intervalCount++;try{const a=this._timeout===void 0&&t.timeout===void 0?e():Vd.default(Promise.resolve(e()),t.timeout===void 0?this._timeout:t.timeout,()=>{(t.throwOnTimeout===void 0?this._throwOnTimeout:t.throwOnTimeout)&&n(Gy)});s(await a)}catch(a){n(a)}this._next()};this._queue.enqueue(i,t),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async s=>this.add(s,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}var ur=Bd.default=By;const zy=[400,401,402,403,404,405,406,407,409],Hy=r=>{if(r.message.startsWith("Cancel")||r.message.startsWith("AbortError")||r.name==="AbortError"||r?.code==="ECONNABORTED")throw r;const e=r?.response?.status??r?.status;if(e&&zy.includes(+e))throw r;if(r?.error?.code==="insufficient_quota"){const t=new Error(r?.message);throw t.name="InsufficientQuotaError",t}};let sl=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Hy;const t="default"in ur?ur.default:ur;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>yi(()=>e(...t).catch(s=>{throw s instanceof Error?s:new Error(s)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...s){return e.signal?Promise.race([this.call(t,...s),new Promise((n,i)=>{e.signal?.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...s)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}};var Ki={};Ki.byteLength=Wy;Ki.toByteArray=Ky;Ki.fromByteArray=Qy;var Qt=[],It=[],qy=typeof Uint8Array<"u"?Uint8Array:Array,ya="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var os=0,Vy=ya.length;os<Vy;++os)Qt[os]=ya[os],It[ya.charCodeAt(os)]=os;It[45]=62;It[95]=63;function Wd(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var s=t===e?0:4-t%4;return[t,s]}function Wy(r){var e=Wd(r),t=e[0],s=e[1];return(t+s)*3/4-s}function Zy(r,e,t){return(e+t)*3/4-t}function Ky(r){var e,t=Wd(r),s=t[0],n=t[1],i=new qy(Zy(r,s,n)),a=0,o=n>0?s-4:s,l;for(l=0;l<o;l+=4)e=It[r.charCodeAt(l)]<<18|It[r.charCodeAt(l+1)]<<12|It[r.charCodeAt(l+2)]<<6|It[r.charCodeAt(l+3)],i[a++]=e>>16&255,i[a++]=e>>8&255,i[a++]=e&255;return n===2&&(e=It[r.charCodeAt(l)]<<2|It[r.charCodeAt(l+1)]>>4,i[a++]=e&255),n===1&&(e=It[r.charCodeAt(l)]<<10|It[r.charCodeAt(l+1)]<<4|It[r.charCodeAt(l+2)]>>2,i[a++]=e>>8&255,i[a++]=e&255),i}function Jy(r){return Qt[r>>18&63]+Qt[r>>12&63]+Qt[r>>6&63]+Qt[r&63]}function Xy(r,e,t){for(var s,n=[],i=e;i<t;i+=3)s=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),n.push(Jy(s));return n.join("")}function Qy(r){for(var e,t=r.length,s=t%3,n=[],i=16383,a=0,o=t-s;a<o;a+=i)n.push(Xy(r,a,a+i>o?o:a+i));return s===1?(e=r[t-1],n.push(Qt[e>>2]+Qt[e<<4&63]+"==")):s===2&&(e=(r[t-2]<<8)+r[t-1],n.push(Qt[e>>10]+Qt[e>>4&63]+Qt[e<<2&63]+"=")),n.join("")}var Yy=Object.defineProperty,ew=(r,e,t)=>e in r?Yy(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tw=(r,e,t)=>(ew(r,typeof e!="symbol"?e+"":e,t),t);function rw(r,e){let t=Array.from({length:r.length},(s,n)=>({start:n,end:n+1}));for(;t.length>1;){let s=null;for(let n=0;n<t.length-1;n++){const i=r.slice(t[n].start,t[n+1].end),a=e.get(i.join(","));a!=null&&(s==null||a<s[0])&&(s=[a,n])}if(s!=null){const n=s[1];t[n]={start:t[n].start,end:t[n+1].end},t.splice(n+1,1)}else break}return t}function sw(r,e){return r.length===1?[e.get(r.join(","))]:rw(r,e).map(t=>e.get(r.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function nw(r){return r.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var Xa=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(r,e){this.patStr=r.pat_str;const t=r.bpe_ranks.split(`
`).filter(Boolean).reduce((s,n)=>{const[i,a,...o]=n.split(" "),l=Number.parseInt(a,10);return o.forEach((c,u)=>s[c]=l+u),s},{});for(const[s,n]of Object.entries(t)){const i=Ki.toByteArray(s);this.rankMap.set(i.join(","),n),this.textMap.set(n,i)}this.specialTokens={...r.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((s,[n,i])=>(s[i]=this.textEncoder.encode(n),s),{})}encode(r,e=[],t="all"){const s=new RegExp(this.patStr,"ug"),n=Xa.specialTokenRegex(Object.keys(this.specialTokens)),i=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(t==="all"?Object.keys(this.specialTokens).filter(c=>!a.has(c)):t);if(o.size>0){const c=Xa.specialTokenRegex([...o]),u=r.match(c);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let l=0;for(;;){let c=null,u=l;for(;n.lastIndex=u,c=n.exec(r),!(c==null||a.has(c[0]));)u=c.index+1;const d=c?.index??r.length;for(const f of r.substring(l,d).matchAll(s)){const m=this.textEncoder.encode(f[0]),b=this.rankMap.get(m.join(","));if(b!=null){i.push(b);continue}i.push(...sw(m,this.rankMap))}if(c==null)break;let h=this.specialTokens[c[0]];i.push(h),l=c.index+c[0].length}return i}decode(r){const e=[];let t=0;for(let i=0;i<r.length;++i){const a=r[i],o=this.textMap.get(a)??this.inverseSpecialTokens[a];o!=null&&(e.push(o),t+=o.length)}const s=new Uint8Array(t);let n=0;for(const i of e)s.set(i,n),n+=i.length;return this.textDecoder.decode(s)}},Zd=Xa;tw(Zd,"specialTokenRegex",r=>new RegExp(r.map(e=>nw(e)).join("|"),"g"));function iw(r){switch(r){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":return"cl100k_base";default:throw new Error("Unknown model")}}const jn={},aw=new sl({});async function ow(r){return r in jn||(jn[r]=aw.fetch(`https://tiktoken.pages.dev/js/${r}.json`).then(e=>e.json()).then(e=>new Zd(e)).catch(e=>{throw delete jn[r],e})),await jn[r]}async function lw(r){return ow(iw(r))}var Re;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{const i={};for(const a of n)i[a]=a;return i},r.getValidEnumValues=n=>{const i=r.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(const o of i)a[o]=n[o];return r.objectValues(a)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const i=[];for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.push(a);return i},r.find=(n,i)=>{for(const a of n)if(i(a))return a},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(Re||(Re={}));var Qa;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Qa||(Qa={}));const Y=Re.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wr=r=>{switch(typeof r){case"undefined":return Y.undefined;case"string":return Y.string;case"number":return isNaN(r)?Y.nan:Y.number;case"boolean":return Y.boolean;case"function":return Y.function;case"bigint":return Y.bigint;case"symbol":return Y.symbol;case"object":return Array.isArray(r)?Y.array:r===null?Y.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?Y.promise:typeof Map<"u"&&r instanceof Map?Y.map:typeof Set<"u"&&r instanceof Set?Y.set:typeof Date<"u"&&r instanceof Date?Y.date:Y.object;default:return Y.unknown}},Z=Re.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cw=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:");class zt extends Error{constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(const a of i.issues)if(a.code==="invalid_union")a.unionErrors.map(n);else if(a.code==="invalid_return_type")n(a.returnTypeError);else if(a.code==="invalid_arguments")n(a.argumentsError);else if(a.path.length===0)s._errors.push(t(a));else{let o=s,l=0;for(;l<a.path.length;){const c=a.path[l];l===a.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(a))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,Re.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}zt.create=r=>new zt(r);const nn=(r,e)=>{let t;switch(r.code){case Z.invalid_type:r.received===Y.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case Z.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,Re.jsonStringifyReplacer)}`;break;case Z.unrecognized_keys:t=`Unrecognized key(s) in object: ${Re.joinValues(r.keys,", ")}`;break;case Z.invalid_union:t="Invalid input";break;case Z.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${Re.joinValues(r.options)}`;break;case Z.invalid_enum_value:t=`Invalid enum value. Expected ${Re.joinValues(r.options)}, received '${r.received}'`;break;case Z.invalid_arguments:t="Invalid function arguments";break;case Z.invalid_return_type:t="Invalid function return type";break;case Z.invalid_date:t="Invalid date";break;case Z.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:Re.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case Z.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case Z.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case Z.custom:t="Invalid input";break;case Z.invalid_intersection_types:t="Intersection results could not be merged";break;case Z.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case Z.not_finite:t="Number must be finite";break;default:t=e.defaultError,Re.assertNever(r)}return{message:t}};let Kd=nn;function uw(r){Kd=r}function wi(){return Kd}const vi=r=>{const{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],a={...n,path:i};let o="";const l=s.filter(c=>!!c).slice().reverse();for(const c of l)o=c(a,{data:e,defaultError:o}).message;return{...n,path:i,message:n.message||o}},dw=[];function se(r,e){const t=vi({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,wi(),nn].filter(s=>!!s)});r.common.issues.push(t)}class gt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const n of t){if(n.status==="aborted")return pe;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const n of t)s.push({key:await n.key,value:await n.value});return gt.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const n of t){const{key:i,value:a}=n;if(i.status==="aborted"||a.status==="aborted")return pe;i.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(s[i.value]=a.value)}return{status:e.value,value:s}}}const pe=Object.freeze({status:"aborted"}),Jd=r=>({status:"dirty",value:r}),vt=r=>({status:"valid",value:r}),Ya=r=>r.status==="aborted",eo=r=>r.status==="dirty",an=r=>r.status==="valid",Ei=r=>typeof Promise<"u"&&r instanceof Promise;var le;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(le||(le={}));class rr{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Nc=(r,e)=>{if(an(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new zt(r.common.issues);return this._error=t,this._error}}};function fe(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(a,o)=>a.code!=="invalid_type"?{message:o.defaultError}:typeof o.data>"u"?{message:s??o.defaultError}:{message:t??o.defaultError},description:n}}class ge{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wr(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gt,ctx:{common:e.parent.common,data:e.data,parsedType:wr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Ei(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const n={common:{issues:[],async:(s=t?.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Nc(n,i)}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wr(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(Ei(n)?n:Promise.resolve(n));return Nc(s,i)}refine(e,t){const s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{const a=e(n),o=()=>i.addIssue({code:Z.custom,...s(n)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new Vt({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return dr.create(this,this._def)}nullable(){return Jr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ht.create(this,this._def)}promise(){return Ps.create(this,this._def)}or(e){return un.create([this,e],this._def)}and(e){return dn.create(this,e,this._def)}transform(e){return new Vt({...fe(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new gn({...fe(this._def),innerType:this,defaultValue:t,typeName:q.ZodDefault})}brand(){return new Qd({typeName:q.ZodBranded,type:this,...fe(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Oi({...fe(this._def),innerType:this,catchValue:t,typeName:q.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return kn.create(this,e)}readonly(){return Pi.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const hw=/^c[^\s-]{8,}$/i,pw=/^[a-z][a-z0-9]*$/,fw=/^[0-9A-HJKMNP-TV-Z]{26}$/,mw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gw=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let wa;const _w=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,yw=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ww=r=>r.precision?r.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${r.precision}}Z$`):r.precision===0?r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):r.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function vw(r,e){return!!((e==="v4"||!e)&&_w.test(r)||(e==="v6"||!e)&&yw.test(r))}class Bt extends ge{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Y.string){const i=this._getOrReturnCtx(e);return se(i,{code:Z.invalid_type,expected:Y.string,received:i.parsedType}),pe}const s=new gt;let n;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const a=e.data.length>i.value,o=e.data.length<i.value;(a||o)&&(n=this._getOrReturnCtx(e,n),a?se(n,{code:Z.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&se(n,{code:Z.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")gw.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"email",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")wa||(wa=new RegExp(bw,"u")),wa.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"emoji",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")mw.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"uuid",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")hw.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"cuid",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")pw.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"cuid2",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")fw.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"ulid",code:Z.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),se(n,{validation:"url",code:Z.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"regex",code:Z.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),se(n,{code:Z.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),se(n,{code:Z.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),se(n,{code:Z.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?ww(i).test(e.data)||(n=this._getOrReturnCtx(e,n),se(n,{code:Z.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="ip"?vw(e.data,i.version)||(n=this._getOrReturnCtx(e,n),se(n,{validation:"ip",code:Z.invalid_string,message:i.message}),s.dirty()):Re.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:Z.invalid_string,...le.errToObj(s)})}_addCheck(e){return new Bt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}datetime(e){var t;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,...le.errToObj(e?.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...le.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...le.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...le.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...le.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...le.errToObj(t)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new Bt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Bt.create=r=>{var e;return new Bt({checks:[],typeName:q.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...fe(r)})};function Ew(r,e){const t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return i%a/Math.pow(10,n)}class xr extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Y.number){const i=this._getOrReturnCtx(e);return se(i,{code:Z.invalid_type,expected:Y.number,received:i.parsedType}),pe}let s;const n=new gt;for(const i of this._def.checks)i.kind==="int"?Re.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Z.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?Ew(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),se(s,{code:Z.not_finite,message:i.message}),n.dirty()):Re.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,n){return new xr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(n)}]})}_addCheck(e){return new xr({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Re.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}xr.create=r=>new xr({checks:[],typeName:q.ZodNumber,coerce:r?.coerce||!1,...fe(r)});class Cr extends ge{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Y.bigint){const i=this._getOrReturnCtx(e);return se(i,{code:Z.invalid_type,expected:Y.bigint,received:i.parsedType}),pe}let s;const n=new gt;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),se(s,{code:Z.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Re.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,le.toString(t))}gt(e,t){return this.setLimit("min",e,!1,le.toString(t))}lte(e,t){return this.setLimit("max",e,!0,le.toString(t))}lt(e,t){return this.setLimit("max",e,!1,le.toString(t))}setLimit(e,t,s,n){return new Cr({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:le.toString(n)}]})}_addCheck(e){return new Cr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Cr.create=r=>{var e;return new Cr({checks:[],typeName:q.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...fe(r)})};class on extends ge{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Y.boolean){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.boolean,received:s.parsedType}),pe}return vt(e.data)}}on.create=r=>new on({typeName:q.ZodBoolean,coerce:r?.coerce||!1,...fe(r)});class Zr extends ge{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Y.date){const i=this._getOrReturnCtx(e);return se(i,{code:Z.invalid_type,expected:Y.date,received:i.parsedType}),pe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return se(i,{code:Z.invalid_date}),pe}const s=new gt;let n;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:Z.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),se(n,{code:Z.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):Re.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Zr({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Zr.create=r=>new Zr({checks:[],coerce:r?.coerce||!1,typeName:q.ZodDate,...fe(r)});class Ti extends ge{_parse(e){if(this._getType(e)!==Y.symbol){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.symbol,received:s.parsedType}),pe}return vt(e.data)}}Ti.create=r=>new Ti({typeName:q.ZodSymbol,...fe(r)});class ln extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.undefined,received:s.parsedType}),pe}return vt(e.data)}}ln.create=r=>new ln({typeName:q.ZodUndefined,...fe(r)});class cn extends ge{_parse(e){if(this._getType(e)!==Y.null){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.null,received:s.parsedType}),pe}return vt(e.data)}}cn.create=r=>new cn({typeName:q.ZodNull,...fe(r)});class Ss extends ge{constructor(){super(...arguments),this._any=!0}_parse(e){return vt(e.data)}}Ss.create=r=>new Ss({typeName:q.ZodAny,...fe(r)});class Gr extends ge{constructor(){super(...arguments),this._unknown=!0}_parse(e){return vt(e.data)}}Gr.create=r=>new Gr({typeName:q.ZodUnknown,...fe(r)});class hr extends ge{_parse(e){const t=this._getOrReturnCtx(e);return se(t,{code:Z.invalid_type,expected:Y.never,received:t.parsedType}),pe}}hr.create=r=>new hr({typeName:q.ZodNever,...fe(r)});class ki extends ge{_parse(e){if(this._getType(e)!==Y.undefined){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.void,received:s.parsedType}),pe}return vt(e.data)}}ki.create=r=>new ki({typeName:q.ZodVoid,...fe(r)});class Ht extends ge{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==Y.array)return se(t,{code:Z.invalid_type,expected:Y.array,received:t.parsedType}),pe;if(n.exactLength!==null){const a=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(a||o)&&(se(t,{code:a?Z.too_big:Z.too_small,minimum:o?n.exactLength.value:void 0,maximum:a?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(se(t,{code:Z.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(se(t,{code:Z.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((a,o)=>n.type._parseAsync(new rr(t,a,t.path,o)))).then(a=>gt.mergeArray(s,a));const i=[...t.data].map((a,o)=>n.type._parseSync(new rr(t,a,t.path,o)));return gt.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new Ht({...this._def,minLength:{value:e,message:le.toString(t)}})}max(e,t){return new Ht({...this._def,maxLength:{value:e,message:le.toString(t)}})}length(e,t){return new Ht({...this._def,exactLength:{value:e,message:le.toString(t)}})}nonempty(e){return this.min(1,e)}}Ht.create=(r,e)=>new Ht({type:r,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...fe(e)});function hs(r){if(r instanceof Ve){const e={};for(const t in r.shape){const s=r.shape[t];e[t]=dr.create(hs(s))}return new Ve({...r._def,shape:()=>e})}else return r instanceof Ht?new Ht({...r._def,type:hs(r.element)}):r instanceof dr?dr.create(hs(r.unwrap())):r instanceof Jr?Jr.create(hs(r.unwrap())):r instanceof sr?sr.create(r.items.map(e=>hs(e))):r}class Ve extends ge{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=Re.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Y.object){const c=this._getOrReturnCtx(e);return se(c,{code:Z.invalid_type,expected:Y.object,received:c.parsedType}),pe}const{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof hr&&this._def.unknownKeys==="strip"))for(const c in n.data)a.includes(c)||o.push(c);const l=[];for(const c of a){const u=i[c],d=n.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new rr(n,d,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof hr){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of o)l.push({key:{status:"valid",value:u},value:{status:"valid",value:n.data[u]}});else if(c==="strict")o.length>0&&(se(n,{code:Z.unrecognized_keys,keys:o}),s.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of o){const d=n.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new rr(n,d,n.path,u)),alwaysSet:u in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>gt.mergeObjectSync(s,c)):gt.mergeObjectSync(s,l)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new Ve({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,a,o;const l=(a=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&a!==void 0?a:s.defaultError;return t.code==="unrecognized_keys"?{message:(o=le.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Ve({...this._def,unknownKeys:"strip"})}passthrough(){return new Ve({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ve({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ve({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:q.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ve({...this._def,catchall:e})}pick(e){const t={};return Re.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new Ve({...this._def,shape:()=>t})}omit(e){const t={};return Re.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new Ve({...this._def,shape:()=>t})}deepPartial(){return hs(this)}partial(e){const t={};return Re.objectKeys(this.shape).forEach(s=>{const n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new Ve({...this._def,shape:()=>t})}required(e){const t={};return Re.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof dr;)i=i._def.innerType;t[s]=i}}),new Ve({...this._def,shape:()=>t})}keyof(){return Xd(Re.objectKeys(this.shape))}}Ve.create=(r,e)=>new Ve({shape:()=>r,unknownKeys:"strip",catchall:hr.create(),typeName:q.ZodObject,...fe(e)});Ve.strictCreate=(r,e)=>new Ve({shape:()=>r,unknownKeys:"strict",catchall:hr.create(),typeName:q.ZodObject,...fe(e)});Ve.lazycreate=(r,e)=>new Ve({shape:r,unknownKeys:"strip",catchall:hr.create(),typeName:q.ZodObject,...fe(e)});class un extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;const a=i.map(o=>new zt(o.ctx.common.issues));return se(t,{code:Z.invalid_union,unionErrors:a}),pe}if(t.common.async)return Promise.all(s.map(async i=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(n);{let i;const a=[];for(const l of s){const c={...t,common:{...t.common,issues:[]},parent:null},u=l._parseSync({data:t.data,path:t.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:c}),c.common.issues.length&&a.push(c.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const o=a.map(l=>new zt(l));return se(t,{code:Z.invalid_union,unionErrors:o}),pe}}get options(){return this._def.options}}un.create=(r,e)=>new un({options:r,typeName:q.ZodUnion,...fe(e)});const Bn=r=>r instanceof pn?Bn(r.schema):r instanceof Vt?Bn(r.innerType()):r instanceof fn?[r.value]:r instanceof Rr?r.options:r instanceof mn?Object.keys(r.enum):r instanceof gn?Bn(r._def.innerType):r instanceof ln?[void 0]:r instanceof cn?[null]:null;class Ji extends ge{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.object)return se(t,{code:Z.invalid_type,expected:Y.object,received:t.parsedType}),pe;const s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(se(t,{code:Z.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),pe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){const n=new Map;for(const i of t){const a=Bn(i.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,i)}}return new Ji({typeName:q.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...fe(s)})}}function to(r,e){const t=wr(r),s=wr(e);if(r===e)return{valid:!0,data:r};if(t===Y.object&&s===Y.object){const n=Re.objectKeys(e),i=Re.objectKeys(r).filter(o=>n.indexOf(o)!==-1),a={...r,...e};for(const o of i){const l=to(r[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(t===Y.array&&s===Y.array){if(r.length!==e.length)return{valid:!1};const n=[];for(let i=0;i<r.length;i++){const a=r[i],o=e[i],l=to(a,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return t===Y.date&&s===Y.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class dn extends ge{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=(i,a)=>{if(Ya(i)||Ya(a))return pe;const o=to(i.value,a.value);return o.valid?((eo(i)||eo(a))&&t.dirty(),{status:t.value,value:o.data}):(se(s,{code:Z.invalid_intersection_types}),pe)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,a])=>n(i,a)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}dn.create=(r,e,t)=>new dn({left:r,right:e,typeName:q.ZodIntersection,...fe(t)});class sr extends ge{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.array)return se(s,{code:Z.invalid_type,expected:Y.array,received:s.parsedType}),pe;if(s.data.length<this._def.items.length)return se(s,{code:Z.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pe;!this._def.rest&&s.data.length>this._def.items.length&&(se(s,{code:Z.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...s.data].map((a,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new rr(s,a,s.path,o)):null}).filter(a=>!!a);return s.common.async?Promise.all(i).then(a=>gt.mergeArray(t,a)):gt.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new sr({...this._def,rest:e})}}sr.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sr({items:r,typeName:q.ZodTuple,rest:null,...fe(e)})};class hn extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.object)return se(s,{code:Z.invalid_type,expected:Y.object,received:s.parsedType}),pe;const n=[],i=this._def.keyType,a=this._def.valueType;for(const o in s.data)n.push({key:i._parse(new rr(s,o,s.path,o)),value:a._parse(new rr(s,s.data[o],s.path,o))});return s.common.async?gt.mergeObjectAsync(t,n):gt.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof ge?new hn({keyType:e,valueType:t,typeName:q.ZodRecord,...fe(s)}):new hn({keyType:Bt.create(),valueType:e,typeName:q.ZodRecord,...fe(t)})}}class Ai extends ge{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.map)return se(s,{code:Z.invalid_type,expected:Y.map,received:s.parsedType}),pe;const n=this._def.keyType,i=this._def.valueType,a=[...s.data.entries()].map(([o,l],c)=>({key:n._parse(new rr(s,o,s.path,[c,"key"])),value:i._parse(new rr(s,l,s.path,[c,"value"]))}));if(s.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of a){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}})}else{const o=new Map;for(const l of a){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return pe;(c.status==="dirty"||u.status==="dirty")&&t.dirty(),o.set(c.value,u.value)}return{status:t.value,value:o}}}}Ai.create=(r,e,t)=>new Ai({valueType:e,keyType:r,typeName:q.ZodMap,...fe(t)});class Kr extends ge{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Y.set)return se(s,{code:Z.invalid_type,expected:Y.set,received:s.parsedType}),pe;const n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(se(s,{code:Z.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(se(s,{code:Z.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function a(l){const c=new Set;for(const u of l){if(u.status==="aborted")return pe;u.status==="dirty"&&t.dirty(),c.add(u.value)}return{status:t.value,value:c}}const o=[...s.data.values()].map((l,c)=>i._parse(new rr(s,l,s.path,c)));return s.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,t){return new Kr({...this._def,minSize:{value:e,message:le.toString(t)}})}max(e,t){return new Kr({...this._def,maxSize:{value:e,message:le.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Kr.create=(r,e)=>new Kr({valueType:r,minSize:null,maxSize:null,typeName:q.ZodSet,...fe(e)});class Es extends ge{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.function)return se(t,{code:Z.invalid_type,expected:Y.function,received:t.parsedType}),pe;function s(o,l){return vi({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wi(),nn].filter(c=>!!c),issueData:{code:Z.invalid_arguments,argumentsError:l}})}function n(o,l){return vi({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wi(),nn].filter(c=>!!c),issueData:{code:Z.invalid_return_type,returnTypeError:l}})}const i={errorMap:t.common.contextualErrorMap},a=t.data;if(this._def.returns instanceof Ps){const o=this;return vt(async function(...l){const c=new zt([]),u=await o._def.args.parseAsync(l,i).catch(f=>{throw c.addIssue(s(l,f)),c}),d=await Reflect.apply(a,this,u);return await o._def.returns._def.type.parseAsync(d,i).catch(f=>{throw c.addIssue(n(d,f)),c})})}else{const o=this;return vt(function(...l){const c=o._def.args.safeParse(l,i);if(!c.success)throw new zt([s(l,c.error)]);const u=Reflect.apply(a,this,c.data),d=o._def.returns.safeParse(u,i);if(!d.success)throw new zt([n(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Es({...this._def,args:sr.create(e).rest(Gr.create())})}returns(e){return new Es({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new Es({args:e||sr.create([]).rest(Gr.create()),returns:t||Gr.create(),typeName:q.ZodFunction,...fe(s)})}}class pn extends ge{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}pn.create=(r,e)=>new pn({getter:r,typeName:q.ZodLazy,...fe(e)});class fn extends ge{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return se(t,{received:t.data,code:Z.invalid_literal,expected:this._def.value}),pe}return{status:"valid",value:e.data}}get value(){return this._def.value}}fn.create=(r,e)=>new fn({value:r,typeName:q.ZodLiteral,...fe(e)});function Xd(r,e){return new Rr({values:r,typeName:q.ZodEnum,...fe(e)})}class Rr extends ge{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return se(t,{expected:Re.joinValues(s),received:t.parsedType,code:Z.invalid_type}),pe}if(this._def.values.indexOf(e.data)===-1){const t=this._getOrReturnCtx(e),s=this._def.values;return se(t,{received:t.data,code:Z.invalid_enum_value,options:s}),pe}return vt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Rr.create(e)}exclude(e){return Rr.create(this.options.filter(t=>!e.includes(t)))}}Rr.create=Xd;class mn extends ge{_parse(e){const t=Re.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Y.string&&s.parsedType!==Y.number){const n=Re.objectValues(t);return se(s,{expected:Re.joinValues(n),received:s.parsedType,code:Z.invalid_type}),pe}if(t.indexOf(e.data)===-1){const n=Re.objectValues(t);return se(s,{received:s.data,code:Z.invalid_enum_value,options:n}),pe}return vt(e.data)}get enum(){return this._def.values}}mn.create=(r,e)=>new mn({values:r,typeName:q.ZodNativeEnum,...fe(e)});class Ps extends ge{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Y.promise&&t.common.async===!1)return se(t,{code:Z.invalid_type,expected:Y.promise,received:t.parsedType}),pe;const s=t.parsedType===Y.promise?t.data:Promise.resolve(t.data);return vt(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ps.create=(r,e)=>new Ps({type:r,typeName:q.ZodPromise,...fe(e)});class Vt extends ge{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:a=>{se(s,a),a.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){const a=n.transform(s.data,i);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(a).then(o=>this._def.schema._parseAsync({data:o,path:s.path,parent:s})):this._def.schema._parseSync({data:a,path:s.path,parent:s})}if(n.type==="refinement"){const a=o=>{const l=n.refinement(o,i);if(s.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return o.status==="aborted"?pe:(o.status==="dirty"&&t.dirty(),a(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>o.status==="aborted"?pe:(o.status==="dirty"&&t.dirty(),a(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(s.common.async===!1){const a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!an(a))return a;const o=n.transform(a.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>an(a)?Promise.resolve(n.transform(a.value,i)).then(o=>({status:t.value,value:o})):a);Re.assertNever(n)}}Vt.create=(r,e,t)=>new Vt({schema:r,typeName:q.ZodEffects,effect:e,...fe(t)});Vt.createWithPreprocess=(r,e,t)=>new Vt({schema:e,effect:{type:"preprocess",transform:r},typeName:q.ZodEffects,...fe(t)});class dr extends ge{_parse(e){return this._getType(e)===Y.undefined?vt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dr.create=(r,e)=>new dr({innerType:r,typeName:q.ZodOptional,...fe(e)});class Jr extends ge{_parse(e){return this._getType(e)===Y.null?vt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Jr.create=(r,e)=>new Jr({innerType:r,typeName:q.ZodNullable,...fe(e)});class gn extends ge{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===Y.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}gn.create=(r,e)=>new gn({innerType:r,typeName:q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});class Oi extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Ei(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zt(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new zt(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Oi.create=(r,e)=>new Oi({innerType:r,typeName:q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});class Si extends ge{_parse(e){if(this._getType(e)!==Y.nan){const s=this._getOrReturnCtx(e);return se(s,{code:Z.invalid_type,expected:Y.nan,received:s.parsedType}),pe}return{status:"valid",value:e.data}}}Si.create=r=>new Si({typeName:q.ZodNaN,...fe(r)});const Tw=Symbol("zod_brand");class Qd extends ge{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class kn extends ge{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?pe:i.status==="dirty"?(t.dirty(),Jd(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?pe:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new kn({in:e,out:t,typeName:q.ZodPipeline})}}class Pi extends ge{_parse(e){const t=this._def.innerType._parse(e);return an(t)&&(t.value=Object.freeze(t.value)),t}}Pi.create=(r,e)=>new Pi({innerType:r,typeName:q.ZodReadonly,...fe(e)});const Yd=(r,e={},t)=>r?Ss.create().superRefine((s,n)=>{var i,a;if(!r(s)){const o=typeof e=="function"?e(s):typeof e=="string"?{message:e}:e,l=(a=(i=o.fatal)!==null&&i!==void 0?i:t)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;n.addIssue({code:"custom",...c,fatal:l})}}):Ss.create(),kw={object:Ve.lazycreate};var q;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(q||(q={}));const Aw=(r,e={message:`Input not instance of ${r.name}`})=>Yd(t=>t instanceof r,e),eh=Bt.create,th=xr.create,Ow=Si.create,Sw=Cr.create,rh=on.create,Pw=Zr.create,xw=Ti.create,Cw=ln.create,Rw=cn.create,Iw=Ss.create,jw=Gr.create,Nw=hr.create,$w=ki.create,Lw=Ht.create,Dw=Ve.create,Mw=Ve.strictCreate,Fw=un.create,Uw=Ji.create,Gw=dn.create,Bw=sr.create,zw=hn.create,Hw=Ai.create,qw=Kr.create,Vw=Es.create,Ww=pn.create,Zw=fn.create,Kw=Rr.create,Jw=mn.create,Xw=Ps.create,$c=Vt.create,Qw=dr.create,Yw=Jr.create,ev=Vt.createWithPreprocess,tv=kn.create,rv=()=>eh().optional(),sv=()=>th().optional(),nv=()=>rh().optional(),iv={string:r=>Bt.create({...r,coerce:!0}),number:r=>xr.create({...r,coerce:!0}),boolean:r=>on.create({...r,coerce:!0}),bigint:r=>Cr.create({...r,coerce:!0}),date:r=>Zr.create({...r,coerce:!0})},av=pe;var xs=Object.freeze({__proto__:null,defaultErrorMap:nn,setErrorMap:uw,getErrorMap:wi,makeIssue:vi,EMPTY_PATH:dw,addIssueToContext:se,ParseStatus:gt,INVALID:pe,DIRTY:Jd,OK:vt,isAborted:Ya,isDirty:eo,isValid:an,isAsync:Ei,get util(){return Re},get objectUtil(){return Qa},ZodParsedType:Y,getParsedType:wr,ZodType:ge,ZodString:Bt,ZodNumber:xr,ZodBigInt:Cr,ZodBoolean:on,ZodDate:Zr,ZodSymbol:Ti,ZodUndefined:ln,ZodNull:cn,ZodAny:Ss,ZodUnknown:Gr,ZodNever:hr,ZodVoid:ki,ZodArray:Ht,ZodObject:Ve,ZodUnion:un,ZodDiscriminatedUnion:Ji,ZodIntersection:dn,ZodTuple:sr,ZodRecord:hn,ZodMap:Ai,ZodSet:Kr,ZodFunction:Es,ZodLazy:pn,ZodLiteral:fn,ZodEnum:Rr,ZodNativeEnum:mn,ZodPromise:Ps,ZodEffects:Vt,ZodTransformer:Vt,ZodOptional:dr,ZodNullable:Jr,ZodDefault:gn,ZodCatch:Oi,ZodNaN:Si,BRAND:Tw,ZodBranded:Qd,ZodPipeline:kn,ZodReadonly:Pi,custom:Yd,Schema:ge,ZodSchema:ge,late:kw,get ZodFirstPartyTypeKind(){return q},coerce:iv,any:Iw,array:Lw,bigint:Sw,boolean:rh,date:Pw,discriminatedUnion:Uw,effect:$c,enum:Kw,function:Vw,instanceof:Aw,intersection:Gw,lazy:Ww,literal:Zw,map:Hw,nan:Ow,nativeEnum:Jw,never:Nw,null:Rw,nullable:Yw,number:th,object:Dw,oboolean:nv,onumber:sv,optional:Qw,ostring:rv,pipeline:tv,preprocess:ev,promise:Xw,record:zw,set:qw,strictObject:Mw,string:eh,symbol:xw,transformer:$c,tuple:Bw,undefined:Cw,union:Fw,unknown:jw,void:$w,NEVER:av,ZodIssueCode:Z,quotelessJson:cw,ZodError:zt});let Nn;const ov=new Uint8Array(16);function lv(){if(!Nn&&(Nn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nn(ov)}const cv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function sh(r){return typeof r=="string"&&cv.test(r)}const ut=[];for(let r=0;r<256;++r)ut.push((r+256).toString(16).slice(1));function uv(r,e=0){return ut[r[e+0]]+ut[r[e+1]]+ut[r[e+2]]+ut[r[e+3]]+"-"+ut[r[e+4]]+ut[r[e+5]]+"-"+ut[r[e+6]]+ut[r[e+7]]+"-"+ut[r[e+8]]+ut[r[e+9]]+"-"+ut[r[e+10]]+ut[r[e+11]]+ut[r[e+12]]+ut[r[e+13]]+ut[r[e+14]]+ut[r[e+15]]}const dv=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lc={randomUUID:dv};function Xt(r,e,t){if(Lc.randomUUID&&!e&&!r)return Lc.randomUUID();r=r||{};const s=r.random||(r.rng||lv)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let n=0;n<16;++n)e[t+n]=s[n];return e}return uv(s)}class hv{}class An extends hv{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Id(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:St("LANGCHAIN_CALLBACKS_BACKGROUND")!=="true"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.awaitHandlers=e._awaitHandler??this.awaitHandlers)}copy(){return new this.constructor(this)}toJSON(){return Wr.prototype.toJSON.call(this)}toJSONNotImplemented(){return Wr.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class t extends An{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Xt()}),Object.assign(this,e)}}return new t}}var nl={exports:{}};nl.exports;(function(r){const t=(i=0)=>a=>`\x1B[${38+i};5;${a}m`,s=(i=0)=>(a,o,l)=>`\x1B[${38+i};2;${a};${o};${l}m`;function n(){const i=new Map,a={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};a.color.gray=a.color.blackBright,a.bgColor.bgGray=a.bgColor.bgBlackBright,a.color.grey=a.color.blackBright,a.bgColor.bgGrey=a.bgColor.bgBlackBright;for(const[o,l]of Object.entries(a)){for(const[c,u]of Object.entries(l))a[c]={open:`\x1B[${u[0]}m`,close:`\x1B[${u[1]}m`},l[c]=a[c],i.set(u[0],u[1]);Object.defineProperty(a,o,{value:l,enumerable:!1})}return Object.defineProperty(a,"codes",{value:i,enumerable:!1}),a.color.close="\x1B[39m",a.bgColor.close="\x1B[49m",a.color.ansi256=t(),a.color.ansi16m=s(),a.bgColor.ansi256=t(10),a.bgColor.ansi16m=s(10),Object.defineProperties(a,{rgbToAnsi256:{value:(o,l,c)=>o===l&&l===c?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(l/255*5)+Math.round(c/255*5),enumerable:!1},hexToRgb:{value:o=>{const l=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(o.toString(16));if(!l)return[0,0,0];let{colorString:c}=l.groups;c.length===3&&(c=c.split("").map(d=>d+d).join(""));const u=Number.parseInt(c,16);return[u>>16&255,u>>8&255,u&255]},enumerable:!1},hexToAnsi256:{value:o=>a.rgbToAnsi256(...a.hexToRgb(o)),enumerable:!1}}),a}Object.defineProperty(r,"exports",{enumerable:!0,get:n})})(nl);var pv=nl.exports;const nh=Qr(pv);function va(r,e){return r&&!Array.isArray(r)&&typeof r=="object"?r:{[e]:r}}function fv(r){return r.replace(/[-:.]/g,"")}function mv(r,e){return fv(`${new Date(r).toISOString().slice(0,-1)}000Z`)+e}class Xi extends An{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}async _startTrace(e){const t=mv(e.start_time,e.id),s={...e};if(s.parent_run_id!==void 0){const n=this.runMap.get(s.parent_run_id);n&&(this._addChildRun(n,s),n.child_execution_order=Math.max(n.child_execution_order,s.child_execution_order),s.trace_id=n.trace_id,n.dotted_order!==void 0&&(s.dotted_order=[n.dotted_order,t].join(".")))}else s.trace_id=s.id,s.dotted_order=t;this.runMap.set(s.id,s),await this.onRunCreate?.(s)}async _endTrace(e){const t=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await this.onRunUpdate?.(e)}_getExecutionOrder(e){const t=e!==void 0&&this.runMap.get(e);return t?t.child_execution_order+1:1}async handleLLMStart(e,t,s,n,i,a,o,l){const c=this._getExecutionOrder(n),u=Date.now(),d=o?{...i,metadata:o}:i,h={id:s,name:l??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await this.onLLMStart?.(h),h}async handleChatModelStart(e,t,s,n,i,a,o,l){const c=this._getExecutionOrder(n),u=Date.now(),d=o?{...i,metadata:o}:i,h={id:s,name:l??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:d??{},tags:a||[]};return await this._startTrace(h),await this.onLLMStart?.(h),h}async handleLLMEnd(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.outputs=e,s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),await this.onLLMEnd?.(s),await this._endTrace(s),s}async handleLLMError(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="llm")throw new Error("No LLM run to end.");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),await this.onLLMError?.(s),await this._endTrace(s),s}async handleChainStart(e,t,s,n,i,a,o,l){const c=this._getExecutionOrder(n),u=Date.now(),d={id:s,name:l??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:c,child_execution_order:c,run_type:o??"chain",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return await this._startTrace(d),await this.onChainStart?.(d),d}async handleChainEnd(e,t,s,n,i){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=va(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=va(i.inputs,"input")),await this.onChainEnd?.(a),await this._endTrace(a),a}async handleChainError(e,t,s,n,i){const a=this.runMap.get(t);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),i?.inputs!==void 0&&(a.inputs=va(i.inputs,"input")),await this.onChainError?.(a),await this._endTrace(a),a}async handleToolStart(e,t,s,n,i,a,o){const l=this._getExecutionOrder(n),c=Date.now(),u={id:s,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:t},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return await this._startTrace(u),await this.onToolStart?.(u),u}async handleToolEnd(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="tool")throw new Error("No tool run to end");return s.end_time=Date.now(),s.outputs={output:e},s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),await this.onToolEnd?.(s),await this._endTrace(s),s}async handleToolError(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="tool")throw new Error("No tool run to end");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),await this.onToolError?.(s),await this._endTrace(s),s}async handleAgentAction(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="chain")return;const n=s;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentAction?.(s)}async handleAgentEnd(e,t){const s=this.runMap.get(t);!s||s?.run_type!=="chain"||(s.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await this.onAgentEnd?.(s))}async handleRetrieverStart(e,t,s,n,i,a,o){const l=this._getExecutionOrder(n),c=Date.now(),u={id:s,name:o??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:t},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:i||[]};return await this._startTrace(u),await this.onRetrieverStart?.(u),u}async handleRetrieverEnd(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="retriever")throw new Error("No retriever run to end");return s.end_time=Date.now(),s.outputs={documents:e},s.events.push({name:"end",time:new Date(s.end_time).toISOString()}),await this.onRetrieverEnd?.(s),await this._endTrace(s),s}async handleRetrieverError(e,t){const s=this.runMap.get(t);if(!s||s?.run_type!=="retriever")throw new Error("No retriever run to end");return s.end_time=Date.now(),s.error=this.stringifyError(e),s.events.push({name:"error",time:new Date(s.end_time).toISOString()}),await this.onRetrieverError?.(s),await this._endTrace(s),s}async handleText(e,t){const s=this.runMap.get(t);!s||s?.run_type!=="chain"||(s.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await this.onText?.(s))}async handleLLMNewToken(e,t,s,n,i,a){const o=this.runMap.get(s);if(!o||o?.run_type!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:t,chunk:a?.chunk}}),await this.onLLMNewToken?.(o,e,{chunk:a?.chunk}),o}}function yt(r,e){return`${r.open}${e}${r.close}`}function Ut(r,e){try{return JSON.stringify(r,null,2)}catch{return e}}function gr(r){if(!r.end_time)return"";const e=r.end_time-r.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}const{color:Tt}=nh;class Dc extends Xi{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let s=e;for(;s.parent_run_id;){const n=this.runMap.get(s.parent_run_id);if(n)t.push(n),s=n;else break}return t}getBreadcrumbs(e){const s=[...this.getParents(e).reverse(),e].map((n,i,a)=>{const o=`${n.execution_order}:${n.run_type}:${n.name}`;return i===a.length-1?yt(nh.bold,o):o}).join(" > ");return yt(Tt.grey,s)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Ut(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.cyan,"[chain/end]")} [${t}] [${gr(e)}] Exiting Chain run with output: ${Ut(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.red,"[chain/error]")} [${t}] [${gr(e)}] Chain run errored with error: ${Ut(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),s="prompts"in e.inputs?{prompts:e.inputs.prompts.map(n=>n.trim())}:e.inputs;console.log(`${yt(Tt.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Ut(s,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.cyan,"[llm/end]")} [${t}] [${gr(e)}] Exiting LLM run with output: ${Ut(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.red,"[llm/error]")} [${t}] [${gr(e)}] LLM run errored with error: ${Ut(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.green,"[tool/start]")} [${t}] Entering Tool run with input: "${e.inputs.input?.trim()}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.cyan,"[tool/end]")} [${t}] [${gr(e)}] Exiting Tool run with output: "${e.outputs?.output?.trim()}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.red,"[tool/error]")} [${t}] [${gr(e)}] Tool run errored with error: ${Ut(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Ut(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.cyan,"[retriever/end]")} [${t}] [${gr(e)}] Exiting Retriever run with output: ${Ut(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${yt(Tt.red,"[retriever/error]")} [${t}] [${gr(e)}] Retriever run errored with error: ${Ut(e.error,"[error]")}`)}onAgentAction(e){const t=e,s=this.getBreadcrumbs(e);console.log(`${yt(Tt.blue,"[agent/action]")} [${s}] Agent selected action: ${Ut(t.actions[t.actions.length-1],"[action]")}`)}}const gv=[400,401,403,404,405,406,407,408],bv=[409];class Mc{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6;const t="default"in ur?ur.default:ur;this.queue=new t({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){const s=this.onFailedResponseHook;return this.queue.add(()=>yi(()=>e(...t).catch(n=>{throw n instanceof Error?n:new Error(n)}),{async onFailedAttempt(n){if(n.message.startsWith("Cancel")||n.message.startsWith("TimeoutError")||n.message.startsWith("AbortError")||n?.code==="ECONNABORTED")throw n;const i=n?.response,a=i?.status;if(a){if(gv.includes(+a))throw n;if(bv.includes(+a))return;s&&await s(i)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...s){return e.signal?Promise.race([this.call(t,...s),new Promise((n,i)=>{e.signal?.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...s)}fetch(...e){return this.call(()=>fetch(...e).then(t=>t.ok?t:Promise.reject(t)))}}function Fc(r){return typeof r?._getType=="function"}function Uc(r){const e={type:r._getType(),data:{content:r.content}};return r?.additional_kwargs&&Object.keys(r.additional_kwargs).length>0&&(e.data.additional_kwargs={...r.additional_kwargs}),e}var ro={};let ar;const _v=()=>typeof window<"u"&&typeof window.document<"u",yv=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",wv=()=>typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),ih=()=>typeof Deno<"u",vv=()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"&&!ih(),Ev=()=>ar||(_v()?ar="browser":vv()?ar="node":yv()?ar="webworker":wv()?ar="jsdom":ih()?ar="deno":ar="other",ar);let Ea;async function Tv(){if(Ea===void 0){const r=Ev(),e=Ov();Ea={library:"langsmith",runtime:r,sdk:"langsmith-js",sdk_version:ah,...e}}return Ea}function kv(){const r=Av()||{},e={},t=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[s,n]of Object.entries(r))s.startsWith("LANGCHAIN_")&&typeof n=="string"&&!t.includes(s)&&!s.toLowerCase().includes("key")&&!s.toLowerCase().includes("secret")&&!s.toLowerCase().includes("token")&&(s==="LANGCHAIN_REVISION_ID"?e.revision_id=n:e[s]=n);return e}function Av(){try{return typeof process<"u"&&ro?Object.entries(ro).reduce((r,[e,t])=>(r[e]=String(t),r),{}):void 0}catch{return}}function Nr(r){try{return typeof process<"u"?ro?.[r]:void 0}catch{return}}let Ta;function Ov(){if(Ta!==void 0)return Ta;const r=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(const t of r){const s=Nr(t);s!==void 0&&(e[t]=s)}return Ta=e,e}async function Gc(r){const e=await Tv(),t=kv();return r.map(s=>{const n=s.extra??{},i=n.metadata;return s.extra={...n,runtime:{...e,...n?.runtime},metadata:{...t,...t.revision_id||s.revision_id?{revision_id:s.revision_id??t.revision_id}:{},...i}},s})}const Sv=()=>{const r=Nr("LANGCHAIN_TRACING_SAMPLING_RATE");if(r===void 0)return;const e=parseFloat(r);if(e<0||e>1)throw new Error(`LANGCHAIN_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},Pv=r=>{const t=r.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return t==="localhost"||t==="127.0.0.1"||t==="::1"},br=async(r,e)=>{const t=await r.text();if(!r.ok)throw new Error(`Failed to ${e}: ${r.status} ${r.statusText} ${t}`)};async function xv(r){const e=[];for await(const t of r)e.push(t);return e}function ka(r){if(r!==void 0)return r.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function qe(r){if(!sh(r))throw new Error(`Invalid UUID: ${r}`)}const Cv=async r=>{if(r?.status===429){const e=parseInt(r.headers.get("retry-after")??"30",10)*1e3;if(e>0)return await new Promise(t=>setTimeout(t,e)),!0}return!1};class Rv{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){return new Promise(t=>{this.items.push([e,t])})}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");const t=[];for(;t.length<e&&this.items.length;){const s=this.items.shift();if(s)t.push(s);else break}return[t.map(s=>s[0]),()=>t.forEach(s=>s[1]())]}}const Iv=20971520;class il{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sampledPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Rv}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=il.getDefaultClientConfig();this.tracingSampleRate=Sv(),this.apiUrl=ka(e.apiUrl??t.apiUrl)??"",this.apiKey=ka(e.apiKey??t.apiKey),this.webUrl=ka(e.webUrl??t.webUrl),this.timeout_ms=e.timeout_ms??12e3,this.caller=new Mc(e.callerOptions??{}),this.batchIngestCaller=new Mc({...e.callerOptions??{},onFailedResponseHook:Cv}),this.hideInputs=e.hideInputs??t.hideInputs,this.hideOutputs=e.hideOutputs??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=e.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit}static getDefaultClientConfig(){const e=Nr("LANGCHAIN_API_KEY"),t=Nr("LANGCHAIN_ENDPOINT")??"https://api.smith.langchain.com",s=Nr("LANGCHAIN_HIDE_INPUTS")==="true",n=Nr("LANGCHAIN_HIDE_OUTPUTS")==="true";return{apiUrl:t,apiKey:e,webUrl:void 0,hideInputs:s,hideOutputs:n}}getHostUrl(){return this.webUrl?this.webUrl:Pv(this.apiUrl)?(this.webUrl="http://localhost","http://localhost"):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com","https://dev.smith.langchain.com"):(this.webUrl="https://smith.langchain.com","https://smith.langchain.com")}get headers(){const e={"User-Agent":`langsmith-js/${ah}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return t.inputs!==void 0&&(t.inputs=this.processInputs(t.inputs)),t.outputs!==void 0&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){const s=t?.toString()??"",n=`${this.apiUrl}${e}?${s}`,i=await this.caller.call(fetch,n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to fetch ${e}: ${i.status} ${i.statusText}`);return i}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams){let s=Number(t.get("offset"))||0;const n=Number(t.get("limit"))||100;for(;;){t.set("offset",String(s)),t.set("limit",String(n));const i=`${this.apiUrl}${e}?${t}`,a=await this.caller.call(fetch,i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!a.ok)throw new Error(`Failed to fetch ${e}: ${a.status} ${a.statusText}`);const o=await a.json();if(o.length===0||(yield o,o.length<n))break;s+=o.length}}async*_getCursorPaginatedList(e,t=null,s="POST",n="runs"){const i=t?{...t}:{};for(;;){const o=await(await this.caller.call(fetch,`${this.apiUrl}${e}`,{method:s,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),body:JSON.stringify(i)})).json();if(!o||!o[n])break;yield o[n];const l=o.cursors;if(!l||!l.next)break;i.cursor=l.next}}_filterForSampling(e,t=!1){if(this.tracingSampleRate===void 0)return e;if(t){const s=[];for(const n of e)this.sampledPostUuids.has(n.id)&&(s.push(n),this.sampledPostUuids.delete(n.id));return s}else{const s=[];for(const n of e)Math.random()<this.tracingSampleRate&&(s.push(n),this.sampledPostUuids.add(n.id));return s}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[e,t]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length){t();return}try{await this.batchIngestRuns({runCreates:e.filter(s=>s.action==="create").map(s=>s.item),runUpdates:e.filter(s=>s.action==="update").map(s=>s.item)})}finally{t()}}}async processRunOperation(e,t){const s=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const n=this.autoBatchQueue.push(e);return(t||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue(),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},s?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),n}async _getServerInfo(){const e=await fetch(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms)});if(!e.ok)throw await e.text(),new Error("Failed to retrieve server info.");return e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch{return!1}return!0}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},s=e.project_name;delete e.project_name;const n=this.prepareRunCreateOrUpdateInputs({session_name:s,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){this.processRunOperation({action:"create",item:n}).catch(console.error);return}const i=await Gc([n]),a=await this.caller.call(fetch,`${this.apiUrl}/runs`,{method:"POST",headers:t,body:JSON.stringify(i[0]),signal:AbortSignal.timeout(this.timeout_ms)});await br(a,"create run")}async batchIngestRuns({runCreates:e,runUpdates:t}){if(e===void 0&&t===void 0)return;let s=e?.map(c=>this.prepareRunCreateOrUpdateInputs(c))??[],n=t?.map(c=>this.prepareRunCreateOrUpdateInputs(c))??[];if(s.length>0&&n.length>0){const c=s.reduce((d,h)=>(h.id&&(d[h.id]=h),d),{}),u=[];for(const d of n)d.id!==void 0&&c[d.id]?c[d.id]={...c[d.id],...d}:u.push(d);s=Object.values(c),n=u}const i={post:this._filterForSampling(s),patch:this._filterForSampling(n,!0)};if(!i.post.length&&!i.patch.length)return;if(s=await Gc(s),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const c of i.post)await this.createRun(c);for(const c of i.patch)c.id!==void 0&&await this.updateRun(c.id,c);return}const a=this.serverInfo?.batch_ingest_config?.size_limit_bytes??Iv,o={post:[],patch:[]};let l=0;for(const c of["post","patch"]){const u=c,d=i[u].reverse();let h=d.pop();for(;h!==void 0;){const f=JSON.stringify(h);l>0&&l+f.length>a&&(await this._postBatchIngestRuns(JSON.stringify(o)),l=0,o.post=[],o.patch=[]),l+=f.length,o[u].push(h),h=d.pop()}}(o.post.length>0||o.patch.length>0)&&await this._postBatchIngestRuns(JSON.stringify(o))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},s=await this.batchIngestCaller.call(fetch,`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms)});await br(s,"batch create run")}async updateRun(e,t){qe(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const s={...t,id:e};if(!this._filterForSampling([s],!0).length)return;if(this.autoBatchTracing&&s.trace_id!==void 0&&s.dotted_order!==void 0){if(t.end_time!==void 0&&s.parent_run_id===void 0){await this.processRunOperation({action:"update",item:s},!0);return}else this.processRunOperation({action:"update",item:s}).catch(console.error);return}const n={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});await br(i,"update run")}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){qe(e);let s=await this._get(`/runs/${e}`);return t&&s.child_run_ids&&(s=await this._loadChildRuns(s)),s}async getRunUrl({runId:e,run:t,projectOpts:s}){if(t!==void 0){let n;t.session_id?n=t.session_id:s?.projectName?n=(await this.readProject({projectName:s?.projectName})).id:s?.projectId?n=s?.projectId:n=(await this.readProject({projectName:Nr("LANGCHAIN_PROJECT")||"default"})).id;const i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n}/r/${t.id}?poll=true`}else if(e!==void 0){const n=await this.readRun(e);if(!n.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${n.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await xv(this.listRuns({id:e.child_run_ids})),s={},n={};t.sort((i,a)=>(i?.dotted_order??"").localeCompare(a?.dotted_order??""));for(const i of t){if(i.parent_run_id===null||i.parent_run_id===void 0)throw new Error(`Child run ${i.id} has no parent`);i.parent_run_id in s||(s[i.parent_run_id]=[]),s[i.parent_run_id].push(i),n[i.id]=i}e.child_runs=s[e.id]||[];for(const i in s)i!==e.id&&(n[i].child_runs=s[i]);return e}async*listRuns(e){const{projectId:t,projectName:s,parentRunId:n,traceId:i,referenceExampleId:a,startTime:o,executionOrder:l,runType:c,error:u,id:d,query:h,filter:f,traceFilter:m,treeFilter:b,limit:_}=e;let A=[];if(t&&(A=Array.isArray(t)?t:[t]),s){const T=Array.isArray(s)?s:[s],E=await Promise.all(T.map(k=>this.readProject({projectName:k}).then(x=>x.id)));A.push(...E)}const w={session:A.length?A:null,run_type:c,reference_example:a,query:h,filter:f,trace_filter:m,tree_filter:b,execution_order:l,parent_run:n,start_time:o?o.toISOString():null,error:u,id:d,limit:_,trace:i};for await(const T of this._getCursorPaginatedList("/runs/query",w))yield*T}async shareRun(e,{shareId:t}={}){const s={run_id:e,share_token:t||Xt()};qe(e);const i=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)})).json();if(i===null||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){qe(e);const t=await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await br(t,"unshare run")}async readRunSharedLink(e){qe(e);const s=await(await this.caller.call(fetch,`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();if(!(s===null||!("share_token"in s)))return`${this.getHostUrl()}/public/${s.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const s=new URLSearchParams({share_token:e});if(t!==void 0)for(const a of t)s.append("id",a);return qe(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/runs${s}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id),qe(e);const n=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:t})).id);const s={dataset_id:e};qe(e);const i=await(await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms)})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(e){qe(e);const t=await this.caller.call(fetch,`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await br(t,"unshare dataset")}async readSharedDataset(e){return qe(e),await(await this.caller.call(fetch,`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)})).json()}async createProject({projectName:e,description:t=null,metadata:s=null,upsert:n=!1,projectExtra:i=null,referenceDatasetId:a=null}){const o=n?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,c=i||{};s&&(c.metadata=s);const u={name:e,extra:c,description:t};a!==null&&(u.reference_dataset_id=a);const d=await this.caller.call(fetch,l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms)}),h=await d.json();if(!d.ok)throw new Error(`Failed to create session ${e}: ${d.status} ${d.statusText}`);return h}async updateProject(e,{name:t=null,description:s=null,metadata:n=null,projectExtra:i=null,endTime:a=null}){const o=`${this.apiUrl}/sessions/${e}`;let l=i;n&&(l={...l||{},metadata:n});const c={name:t,extra:l,description:s,end_time:a?new Date(a).toISOString():null},u=await this.caller.call(fetch,o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)}),d=await u.json();if(!u.ok)throw new Error(`Failed to update project ${e}: ${u.status} ${u.statusText}`);return d}async hasProject({projectId:e,projectName:t}){let s="/sessions";const n=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)qe(e),s+=`/${e}`;else if(t!==void 0)n.append("name",t);else throw new Error("Must provide projectName or projectId");const i=await this.caller.call(fetch,`${this.apiUrl}${s}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});try{const a=await i.json();return i.ok?Array.isArray(a)?a.length>0:!0:!1}catch{return!1}}async readProject({projectId:e,projectName:t,includeStats:s}){let n="/sessions";const i=new URLSearchParams;if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)qe(e),n+=`/${e}`;else if(t!==void 0)i.append("name",t);else throw new Error("Must provide projectName or projectId");s!==void 0&&i.append("include_stats",s.toString());const a=await this._get(n,i);let o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${t}] not found`);o=a[0]}else o=a;return o}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:s,referenceDatasetId:n,referenceDatasetName:i,referenceFree:a}={}){const o=new URLSearchParams;if(e!==void 0)for(const l of e)o.append("id",l);if(t!==void 0&&o.append("name",t),s!==void 0&&o.append("name_contains",s),n!==void 0)o.append("reference_dataset",n);else if(i!==void 0){const l=await this.readDataset({datasetName:i});o.append("reference_dataset",l.id)}a!==void 0&&o.append("reference_free",a.toString());for await(const l of this._getPaginated("/sessions",o))yield*l}async deleteProject({projectId:e,projectName:t}){let s;if(e===void 0&&t===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&t!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?s=(await this.readProject({projectName:t})).id:s=e,qe(s);const n=await this.caller.call(fetch,`${this.apiUrl}/sessions/${s}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});await br(n,`delete session ${s} (${t})`)}async uploadCsv({csvFile:e,fileName:t,inputKeys:s,outputKeys:n,description:i,dataType:a,name:o}){const l=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,t),s.forEach(h=>{c.append("input_keys",h)}),n.forEach(h=>{c.append("output_keys",h)}),i&&c.append("description",i),a&&c.append("data_type",a),o&&c.append("name",o);const u=await this.caller.call(fetch,l,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok){const h=await u.json();throw h.detail&&h.detail.includes("already exists")?new Error(`Dataset ${t} already exists`):new Error(`Failed to upload CSV: ${u.status} ${u.statusText}`)}return await u.json()}async createDataset(e,{description:t,dataType:s}={}){const n={name:e,description:t};s&&(n.data_type=s);const i=await this.caller.call(fetch,`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok){const o=await i.json();throw o.detail&&o.detail.includes("already exists")?new Error(`Dataset ${e} already exists`):new Error(`Failed to create dataset ${i.status} ${i.statusText}`)}return await i.json()}async readDataset({datasetId:e,datasetName:t}){let s="/datasets";const n=new URLSearchParams({limit:"1"});if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)qe(e),s+=`/${e}`;else if(t!==void 0)n.append("name",t);else throw new Error("Must provide datasetName or datasetId");const i=await this._get(s,n);let a;if(Array.isArray(i)){if(i.length===0)throw new Error(`Dataset[id=${e}, name=${t}] not found`);a=i[0]}else a=i;return a}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:s,toVersion:n}){let i=e;if(i===void 0&&t===void 0)throw new Error("Must provide either datasetName or datasetId");if(i!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");i===void 0&&(i=(await this.readDataset({datasetName:t})).id);const a=new URLSearchParams({from_version:typeof s=="string"?s:s.toISOString(),to_version:typeof n=="string"?n:n.toISOString()});return await this._get(`/datasets/${i}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){const s="/datasets";if(e===void 0)if(t!==void 0)e=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${s}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:s,datasetName:n,datasetNameContains:i}={}){const a="/datasets",o=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(s!==void 0)for(const l of s)o.append("id",l);n!==void 0&&o.append("name",n),i!==void 0&&o.append("name_contains",i);for await(const l of this._getPaginated(a,o))yield*l}async deleteDataset({datasetId:e,datasetName:t}){let s="/datasets",n=e;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(t!==void 0&&(n=(await this.readDataset({datasetName:t})).id),n!==void 0)qe(n),s+=`/${n}`;else throw new Error("Must provide datasetName or datasetId");const i=await this.caller.call(fetch,this.apiUrl+s,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!i.ok)throw new Error(`Failed to delete ${s}: ${i.status} ${i.statusText}`);await i.json()}async createExample(e,t,{datasetId:s,datasetName:n,createdAt:i,exampleId:a}){let o=s;if(o===void 0&&n===void 0)throw new Error("Must provide either datasetName or datasetId");if(o!==void 0&&n!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");o===void 0&&(o=(await this.readDataset({datasetName:n})).id);const c={dataset_id:o,inputs:e,outputs:t,created_at:(i||new Date)?.toISOString(),id:a},u=await this.caller.call(fetch,`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw new Error(`Failed to create example: ${u.status} ${u.statusText}`);return await u.json()}async createExamples(e){const{inputs:t,outputs:s,sourceRunIds:n,exampleIds:i,datasetId:a,datasetName:o}=e;let l=a;if(l===void 0&&o===void 0)throw new Error("Must provide either datasetName or datasetId");if(l!==void 0&&o!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");l===void 0&&(l=(await this.readDataset({datasetName:o})).id);const c=t.map((h,f)=>({dataset_id:l,inputs:h,outputs:s?s[f]:void 0,id:i?i[f]:void 0,source_run_id:n?n[f]:void 0})),u=await this.caller.call(fetch,`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms)});if(!u.ok)throw new Error(`Failed to create examples: ${u.status} ${u.statusText}`);return await u.json()}async createLLMExample(e,t,s){return this.createExample({input:e},{output:t},s)}async createChatExample(e,t,s){const n=e.map(a=>Fc(a)?Uc(a):a),i=Fc(t)?Uc(t):t;return this.createExample({input:n},{output:i},s)}async readExample(e){qe(e);const t=`/examples/${e}`;return await this._get(t)}async*listExamples({datasetId:e,datasetName:t,exampleIds:s,asOf:n,inlineS3Urls:i}={}){let a;if(e!==void 0&&t!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)a=e;else if(t!==void 0)a=(await this.readDataset({datasetName:t})).id;else throw new Error("Must provide a datasetName or datasetId");const o=new URLSearchParams({dataset:a}),l=n?typeof n=="string"?n:n?.toISOString():void 0;l&&o.append("as_of",l);const c=i??!0;if(o.append("inline_s3_urls",c.toString()),s!==void 0)for(const u of s)o.append("id",u);for await(const u of this._getPaginated("/examples",o))yield*u}async deleteExample(e){qe(e);const t=`/examples/${e}`,s=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${t}: ${s.status} ${s.statusText}`);await s.json()}async updateExample(e,t){qe(e);const s=await this.caller.call(fetch,`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to update example ${e}: ${s.status} ${s.statusText}`);return await s.json()}async evaluateRun(e,t,{sourceInfo:s,loadChildRuns:n,referenceExample:i}={loadChildRuns:!1}){let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:n});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(i=await this.readExample(a.reference_example_id));const o=await t.evaluateRun(a,i);let l=s??{};o.evaluatorInfo&&(l={...l,...o.evaluatorInfo});const c=o.targetRunId??a.id;return await this.createFeedback(c,o.key,{score:o?.score,value:o?.value,comment:o?.comment,correction:o?.correction,sourceInfo:l,feedbackSourceType:"model",sourceRunId:o?.sourceRunId})}async createFeedback(e,t,{score:s,value:n,correction:i,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:c,feedbackId:u,feedbackConfig:d}){const h={type:l??"api",metadata:o??{}};c!==void 0&&h?.metadata!==void 0&&!h.metadata.__run&&(h.metadata.__run={run_id:c}),h?.metadata!==void 0&&h.metadata.__run?.run_id!==void 0&&qe(h.metadata.__run.run_id);const f={id:u??Xt(),run_id:e,key:t,score:s,value:n,correction:i,comment:a,feedback_source:h,feedbackConfig:d},m=`${this.apiUrl}/feedback`,b=await this.caller.call(fetch,m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(f),signal:AbortSignal.timeout(this.timeout_ms)});return await br(b,"create feedback"),f}async updateFeedback(e,{score:t,value:s,correction:n,comment:i}){const a={};t!=null&&(a.score=t),s!=null&&(a.value=s),n!=null&&(a.correction=n),i!=null&&(a.comment=i),qe(e);const o=await this.caller.call(fetch,`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms)});await br(o,"update feedback")}async readFeedback(e){qe(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){qe(e);const t=`/feedback/${e}`,s=await this.caller.call(fetch,this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms)});if(!s.ok)throw new Error(`Failed to delete ${t}: ${s.status} ${s.statusText}`);await s.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:s}={}){const n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(const i of t)n.append("key",i);if(s)for(const i of s)n.append("source",i);for await(const i of this._getPaginated("/feedback",n))yield*i}async createPresignedFeedbackToken(e,t,{expiration:s,feedbackConfig:n}={}){const i={run_id:e,feedback_key:t,feedback_config:n};return s?typeof s=="string"?i.expires_at=s:(s?.hours||s?.minutes||s?.days)&&(i.expires_in=s):i.expires_in={hours:3},await(await this.caller.call(fetch,`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms)})).json()}async*listPresignedFeedbackTokens(e){qe(e);const t=new URLSearchParams({run_id:e});for await(const s of this._getPaginated("/feedback/tokens",t))yield*s}}const ah="0.1.13";class jv extends Xi{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:s,client:n}=e;this.projectName=s??St("LANGCHAIN_PROJECT")??St("LANGCHAIN_SESSION"),this.exampleId=t,this.client=n??new il({})}async _convertToCreate(e,t=void 0){return{...e,extra:{...e.extra,runtime:await yy()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}}async function Nv(){return new jv}let Aa;function $v(){const r="default"in ur?ur.default:ur;return new r({autoStart:!0,concurrency:1})}async function dt(r,e){e===!0?await r():(typeof Aa>"u"&&(Aa=$v()),Aa.add(r))}function Lv(r){return r?Array.isArray(r)||"name"in r?{callbacks:r}:r:{}}class Dv{setHandler(e){return this.setHandlers([e])}}class Qi{constructor(e,t,s,n,i,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}async handleText(e){await Promise.all(this.handlers.map(t=>dt(async()=>{try{await t.handleText?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleText: ${s}`)}},t.awaitHandlers)))}}class Mv extends Qi{getChild(e){const t=new wt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags)}catch{console.error(`Error in handler ${t.constructor.name}, handleRetriever`)}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreRetriever)try{await t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleRetrieverError: ${s}`)}},t.awaitHandlers)))}}class Bc extends Qi{async handleLLMNewToken(e,t,s,n,i,a){await Promise.all(this.handlers.map(o=>dt(async()=>{if(!o.ignoreLLM)try{await o.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a)}catch(l){console.error(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${l}`)}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreLLM)try{await t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleLLMError: ${s}`)}},t.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreLLM)try{await t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleLLMEnd: ${s}`)}},t.awaitHandlers)))}}class Fv extends Qi{getChild(e){const t=new wt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,s,n,i){await Promise.all(this.handlers.map(a=>dt(async()=>{if(!a.ignoreChain)try{await a.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i)}catch(o){console.error(`Error in handler ${a.constructor.name}, handleChainError: ${o}`)}},a.awaitHandlers)))}async handleChainEnd(e,t,s,n,i){await Promise.all(this.handlers.map(a=>dt(async()=>{if(!a.ignoreChain)try{await a.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i)}catch(o){console.error(`Error in handler ${a.constructor.name}, handleChainEnd: ${o}`)}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreAgent)try{await t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleAgentAction: ${s}`)}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreAgent)try{await t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleAgentEnd: ${s}`)}},t.awaitHandlers)))}}class Uv extends Qi{getChild(e){const t=new wt(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreAgent)try{await t.handleToolError?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleToolError: ${s}`)}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>dt(async()=>{if(!t.ignoreAgent)try{await t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags)}catch(s){console.error(`Error in handler ${t.constructor.name}, handleToolEnd: ${s}`)}},t.awaitHandlers)))}}class wt extends Dv{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,s=void 0,n=void 0,i=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(t.map(async c=>{const u=Xt();return await Promise.all(this.handlers.map(d=>dt(async()=>{if(!d.ignoreLLM)try{await d.handleLLMStart?.(e,[c],u,this._parentRunId,i,this.tags,this.metadata,l)}catch(h){console.error(`Error in handler ${d.constructor.name}, handleLLMStart: ${h}`)}},d.awaitHandlers))),new Bc(u,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,s=void 0,n=void 0,i=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(t.map(async c=>{const u=Xt();return await Promise.all(this.handlers.map(d=>dt(async()=>{if(!d.ignoreLLM)try{if(d.handleChatModelStart)await d.handleChatModelStart?.(e,[c],u,this._parentRunId,i,this.tags,this.metadata,l);else if(d.handleLLMStart){const h=Nd(c);await d.handleLLMStart?.(e,[h],u,this._parentRunId,i,this.tags,this.metadata,l)}}catch(h){console.error(`Error in handler ${d.constructor.name}, handleLLMStart: ${h}`)}},d.awaitHandlers))),new Bc(u,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,s=Xt(),n=void 0,i=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>dt(async()=>{if(!l.ignoreChain)try{await l.handleChainStart?.(e,t,s,this._parentRunId,this.tags,this.metadata,n,o)}catch(c){console.error(`Error in handler ${l.constructor.name}, handleChainStart: ${c}`)}},l.awaitHandlers))),new Fv(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,s=Xt(),n=void 0,i=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>dt(async()=>{if(!l.ignoreAgent)try{await l.handleToolStart?.(e,t,s,this._parentRunId,this.tags,this.metadata,o)}catch(c){console.error(`Error in handler ${l.constructor.name}, handleToolStart: ${c}`)}},l.awaitHandlers))),new Uv(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,s=Xt(),n=void 0,i=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>dt(async()=>{if(!l.ignoreRetriever)try{await l.handleRetrieverStart?.(e,t,s,this._parentRunId,this.tags,this.metadata,o)}catch(c){console.error(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${c}`)}},l.awaitHandlers))),new Mv(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const s of e)this.addHandler(s,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const s=new wt(this._parentRunId);for(const n of this.handlers){const i=this.inheritableHandlers.includes(n);s.addHandler(n,i)}for(const n of this.tags){const i=this.inheritableTags.includes(n);s.addTags([n],i)}for(const n of Object.keys(this.metadata)){const i=Object.keys(this.inheritableMetadata).includes(n);s.addMetadata({[n]:this.metadata[n]},i)}for(const n of e)s.handlers.filter(i=>i.name==="console_callback_handler").some(i=>i.name===n.name)||s.addHandler(n,t);return s}static fromHandlers(e){class t extends An{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Xt()}),Object.assign(this,e)}}const s=new this;return s.addHandler(new t),s}static async configure(e,t,s,n,i,a,o){let l;(e||t)&&(Array.isArray(e)||!e?(l=new wt,l.setHandlers(e?.map(xi)??[],!0)):l=e,l=l.copy(Array.isArray(t)?t.map(xi):t?.handlers,!1));const c=St("LANGCHAIN_VERBOSE")==="true"||o?.verbose,u=St("LANGCHAIN_TRACING_V2")==="true",d=u||(St("LANGCHAIN_TRACING")??!1);if(c||d){if(l||(l=new wt),c&&!l.handlers.some(h=>h.name===Dc.prototype.name)){const h=new Dc;l.addHandler(h,!0)}d&&!l.handlers.some(h=>h.name==="langchain_tracer")&&u&&l.addHandler(await Nv(),!0)}return(s||n)&&l&&(l.addTags(s??[]),l.addTags(n??[],!1)),(i||a)&&l&&(l.addMetadata(i??{}),l.addMetadata(a??{},!1)),l}}function xi(r){return"name"in r?r:An.fromMethods(r)}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */const Gv=Object.prototype.hasOwnProperty;function so(r,e){return Gv.call(r,e)}function no(r){if(Array.isArray(r)){const t=new Array(r.length);for(let s=0;s<t.length;s++)t[s]=""+s;return t}if(Object.keys)return Object.keys(r);let e=[];for(let t in r)so(r,t)&&e.push(t);return e}function Yt(r){switch(typeof r){case"object":return JSON.parse(JSON.stringify(r));case"undefined":return null;default:return r}}function io(r){let e=0;const t=r.length;let s;for(;e<t;){if(s=r.charCodeAt(e),s>=48&&s<=57){e++;continue}return!1}return!0}function ls(r){return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}function Bv(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}function ao(r){if(r===void 0)return!0;if(r){if(Array.isArray(r)){for(let t=0,s=r.length;t<s;t++)if(ao(r[t]))return!0}else if(typeof r=="object"){const t=no(r),s=t.length;for(var e=0;e<s;e++)if(ao(r[t[e]]))return!0}}return!1}function zc(r,e){const t=[r];for(const s in e){const n=typeof e[s]=="object"?JSON.stringify(e[s],null,2):e[s];typeof n<"u"&&t.push(`${s}: ${n}`)}return t.join(`
`)}class zv extends Error{constructor(e,t,s,n,i){super(zc(e,{name:t,index:s,operation:n,tree:i})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.setPrototypeOf(this,new.target.prototype),this.message=zc(e,{name:t,index:s,operation:n,tree:i})}}const st=zv,_s={add:function(r,e,t){return r[e]=this.value,{newDocument:t}},remove:function(r,e,t){var s=r[e];return delete r[e],{newDocument:t,removed:s}},replace:function(r,e,t){var s=r[e];return r[e]=this.value,{newDocument:t,removed:s}},move:function(r,e,t){let s=oo(t,this.path);s&&(s=Yt(s));const n=Zs(t,{op:"remove",path:this.from}).removed;return Zs(t,{op:"add",path:this.path,value:n}),{newDocument:t,removed:s}},copy:function(r,e,t){const s=oo(t,this.from);return Zs(t,{op:"add",path:this.path,value:Yt(s)}),{newDocument:t}},test:function(r,e,t){return{newDocument:t,test:Ri(r[e],this.value)}},_get:function(r,e,t){return this.value=r[e],{newDocument:t}}};var Hv={add:function(r,e,t){return io(e)?r.splice(e,0,this.value):r[e]=this.value,{newDocument:t,index:e}},remove:function(r,e,t){var s=r.splice(e,1);return{newDocument:t,removed:s[0]}},replace:function(r,e,t){var s=r[e];return r[e]=this.value,{newDocument:t,removed:s}},move:_s.move,copy:_s.copy,test:_s.test,_get:_s._get};function oo(r,e){if(e=="")return r;var t={op:"_get",path:e};return Zs(r,t),t.value}function Zs(r,e,t=!1,s=!0,n=!0,i=0){if(t&&(typeof t=="function"?t(e,0,r,e.path):lo(e,0)),e.path===""){let a={newDocument:r};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=r,a;if(e.op==="move"||e.op==="copy")return a.newDocument=oo(r,e.from),e.op==="move"&&(a.removed=r),a;if(e.op==="test"){if(a.test=Ri(r,e.value),a.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",i,e,r);return a.newDocument=r,a}else{if(e.op==="remove")return a.removed=r,a.newDocument=null,a;if(e.op==="_get")return e.value=r,a;if(t)throw new st("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,r);return a}}else{s||(r=Yt(r));const o=(e.path||"").split("/");let l=r,c=1,u=o.length,d,h,f;for(typeof t=="function"?f=t:f=lo;;){if(h=o[c],h&&h.indexOf("~")!=-1&&(h=Bv(h)),n&&(h=="__proto__"||h=="prototype"&&c>0&&o[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&d===void 0&&(l[h]===void 0?d=o.slice(0,c).join("/"):c==u-1&&(d=e.path),d!==void 0&&f(e,0,r,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(t&&!io(h))throw new st("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,r);io(h)&&(h=~~h)}if(c>=u){if(t&&e.op==="add"&&h>l.length)throw new st("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,r);const m=Hv[e.op].call(e,l,h,r);if(m.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",i,e,r);return m}}else if(c>=u){const m=_s[e.op].call(e,l,h,r);if(m.test===!1)throw new st("Test operation failed","TEST_OPERATION_FAILED",i,e,r);return m}if(l=l[h],t&&c<u&&(!l||typeof l!="object"))throw new st("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,r)}}}function Ci(r,e,t,s=!0,n=!0){if(t&&!Array.isArray(e))throw new st("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");s||(r=Yt(r));const i=new Array(e.length);for(let a=0,o=e.length;a<o;a++)i[a]=Zs(r,e[a],t,!0,n,a),r=i[a].newDocument;return i.newDocument=r,i}function lo(r,e,t,s){if(typeof r!="object"||r===null||Array.isArray(r))throw new st("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,r,t);if(_s[r.op]){if(typeof r.path!="string")throw new st("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,r,t);if(r.path.indexOf("/")!==0&&r.path.length>0)throw new st('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,r,t);if((r.op==="move"||r.op==="copy")&&typeof r.from!="string")throw new st("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&r.value===void 0)throw new st("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,r,t);if((r.op==="add"||r.op==="replace"||r.op==="test")&&ao(r.value))throw new st("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,r,t);if(t){if(r.op=="add"){var n=r.path.split("/").length,i=s.split("/").length;if(n!==i+1&&n!==i)throw new st("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,r,t)}else if(r.op==="replace"||r.op==="remove"||r.op==="_get"){if(r.path!==s)throw new st("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,r,t)}else if(r.op==="move"||r.op==="copy"){var a={op:"_get",path:r.from,value:void 0},o=qv([a],t);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new st("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,r,t)}}}else throw new st("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,r,t)}function qv(r,e,t){try{if(!Array.isArray(r))throw new st("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Ci(Yt(e),Yt(r),t||!0);else{t=t||lo;for(var s=0;s<r.length;s++)t(r[s],s,e,void 0)}}catch(n){if(n instanceof st)return n;throw n}}function Ri(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){var t=Array.isArray(r),s=Array.isArray(e),n,i,a;if(t&&s){if(i=r.length,i!=e.length)return!1;for(n=i;n--!==0;)if(!Ri(r[n],e[n]))return!1;return!0}if(t!=s)return!1;var o=Object.keys(r);if(i=o.length,i!==Object.keys(e).length)return!1;for(n=i;n--!==0;)if(!e.hasOwnProperty(o[n]))return!1;for(n=i;n--!==0;)if(a=o[n],!Ri(r[a],e[a]))return!1;return!0}return r!==r&&e!==e}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2013-2021 Joachim Wester
 * MIT license
 */function oh(r,e,t,s,n){if(e!==r){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=no(e),a=no(r),o=!1,l=a.length-1;l>=0;l--){var c=a[l],u=r[c];if(so(e,c)&&!(e[c]===void 0&&u!==void 0&&Array.isArray(e)===!1)){var d=e[c];typeof u=="object"&&u!=null&&typeof d=="object"&&d!=null&&Array.isArray(u)===Array.isArray(d)?oh(u,d,t,s+"/"+ls(c),n):u!==d&&(n&&t.push({op:"test",path:s+"/"+ls(c),value:Yt(u)}),t.push({op:"replace",path:s+"/"+ls(c),value:Yt(d)}))}else Array.isArray(r)===Array.isArray(e)?(n&&t.push({op:"test",path:s+"/"+ls(c),value:Yt(u)}),t.push({op:"remove",path:s+"/"+ls(c)}),o=!0):(n&&t.push({op:"test",path:s,value:r}),t.push({op:"replace",path:s,value:e}))}if(!(!o&&i.length==a.length))for(var l=0;l<i.length;l++){var c=i[l];!so(r,c)&&e[c]!==void 0&&t.push({op:"add",path:s+"/"+ls(c),value:Yt(e[c])})}}}function Vv(r,e,t=!1){var s=[];return oh(r,e,s,"",t),s}class pr extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new pr({start(s){return n();function n(){return t.read().then(({done:i,value:a})=>{if(i){s.close();return}return s.enqueue(a),n()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new pr({async pull(t){const{value:s,done:n}=await e.next();n&&t.close(),t.enqueue(s)},async cancel(t){await e.return(t)}})}}function lh(r,e=2){const t=Array.from({length:e},()=>[]);return t.map(async function*(n){for(;;)if(n.length===0){const i=await r.next();for(const a of t)a.push(i)}else{if(n[0].done)return;yield n.shift().value}})}function Br(r,e){if(Array.isArray(r)&&Array.isArray(e))return r.concat(e);if(typeof r=="string"&&typeof e=="string")return r+e;if(typeof r=="number"&&typeof e=="number")return r+e;if("concat"in r&&typeof r.concat=="function")return r.concat(e);if(typeof r=="object"&&typeof e=="object"){const t={...r};for(const[s,n]of Object.entries(e))s in t&&!Array.isArray(t[s])?t[s]=Br(t[s],n):t[s]=n;return t}else throw new Error(`Cannot concat ${typeof r} and ${typeof e}`)}class Ns{constructor(e,t){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e,this.setup=new Promise((s,n)=>{this.firstResult=e.next(),t?this.firstResult.then(t).then(s,n):this.firstResult.then(i=>s(void 0),n)})}async next(...e){return this.firstResultUsed?this.generator.next(...e):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}}async function Wv(r,e,t,...s){const n=new Ns(e,t),i=await n.setup;return{output:r(n,i,...s),setup:i}}class yr{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),s=Ci({},t);return new bn({ops:t,state:s[s.length-1].newDocument})}}class bn extends yr{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),s=Ci(this.state,e.ops);return new bn({ops:t,state:s[s.length-1].newDocument})}static fromRunLogPatch(e){const t=Ci({},e.ops);return new bn({ops:e.ops,state:t[t.length-1].newDocument})}}async function Hc(r,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:t}=r;if(["retriever","llm","prompt"].includes(r.run_type))return t;if(!(Object.keys(t).length===1&&t?.input===""))return t.input}async function qc(r,e){const{outputs:t}=r;return e==="original"||["retriever","llm","prompt"].includes(r.run_type)?t:t!==void 0&&Object.keys(t).length===1&&t?.output!==void 0?t.output:t}function Zv(r){return r!==void 0&&r.message!==void 0}class Vc extends Xi{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=pr.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let s=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(s=s||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(s=s||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(s=s||t.find(n=>this.includeTags?.includes(n))!==void 0),this.excludeNames!==void 0&&(s=s&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(s=s&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(s=s&&t.every(n=>!this.excludeTags?.includes(n))),s}async*tapOutputIterable(e,t){for await(const s of t){if(e!==this.rootId){const n=this.keyMapByRunId[e];n&&await this.writer.write(new yr({ops:[{op:"add",path:`/logs/${n}/streamed_output/-`,value:s}]}))}yield s}}async onRunCreate(e){if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new yr({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=t===1?e.name:`${e.name}:${t}`;const s={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(s.inputs=await Hc(e,this._schemaFormat)),await this.writer.write(new yr({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:s}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(t===void 0)return;const s=[];this._schemaFormat==="streaming_events"&&s.push({op:"replace",path:`/logs/${t}/inputs`,value:await Hc(e,this._schemaFormat)}),s.push({op:"add",path:`/logs/${t}/final_output`,value:await qc(e,this._schemaFormat)}),e.end_time!==void 0&&s.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new yr({ops:s});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new yr({ops:[{op:"replace",path:"/final_output",value:await qc(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,s){const n=this.keyMapByRunId[e.id];if(n===void 0)return;const i=e.inputs.messages!==void 0;let a;i?Zv(s?.chunk)?a=s?.chunk:a=new En(t):a=t;const o=new yr({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${n}/streamed_output/-`,value:a}]});await this.writer.write(o)}}class Kv{getStore(){}run(e,t){t()}}class Jv{constructor(){Object.defineProperty(this,"asyncLocalStorage",{enumerable:!0,configurable:!0,writable:!0,value:new Kv}),Object.defineProperty(this,"hasBeenInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getInstance(){return this.asyncLocalStorage}initializeGlobalInstance(e){this.hasBeenInitialized||(this.hasBeenInitialized=!0,this.asyncLocalStorage=e)}}const co=new Jv,Oa=25;async function zr(r){return wt.configure(r?.callbacks,void 0,r?.tags,void 0,r?.metadata)}function Wc(...r){const e={};for(const t of r.filter(s=>!!s))for(const s of Object.keys(t))if(s==="metadata")e[s]={...e[s],...t[s]};else if(s==="tags"){const n=e[s]??[];e[s]=[...new Set(n.concat(t[s]??[]))]}else if(s==="configurable")e[s]={...e[s],...t[s]};else if(s==="callbacks"){const n=e.callbacks,i=t.callbacks;if(Array.isArray(i))if(!n)e.callbacks=i;else if(Array.isArray(n))e.callbacks=n.concat(i);else{const a=n.copy();for(const o of i)a.addHandler(xi(o),!0);e.callbacks=a}else if(i)if(!n)e.callbacks=i;else if(Array.isArray(n)){const a=i.copy();for(const o of n)a.addHandler(xi(o),!0);e.callbacks=a}else e.callbacks=new wt(i._parentRunId,{handlers:n.handlers.concat(i.handlers),inheritableHandlers:n.inheritableHandlers.concat(i.inheritableHandlers),tags:Array.from(new Set(n.tags.concat(i.tags))),inheritableTags:Array.from(new Set(n.inheritableTags.concat(i.inheritableTags))),metadata:{...n.metadata,...i.metadata}})}else{const n=s;e[n]=t[n]??e[n]}return e}const Xv=new Set(["string","number","boolean"]);function Ye(r){const e=r??co.getInstance().getStore();let t={tags:[],metadata:{},callbacks:void 0,recursionLimit:25};if(e&&(t={...t,...e}),e?.configurable)for(const s of Object.keys(e.configurable))Xv.has(typeof e.configurable[s])&&!t.metadata?.[s]&&(t.metadata||(t.metadata={}),t.metadata[s]=e.configurable[s]);return t}function kt(r={},{callbacks:e,maxConcurrency:t,recursionLimit:s,runName:n,configurable:i}={}){const a=Ye(r);return e!==void 0&&(delete a.runName,a.callbacks=e),s!==void 0&&(a.recursionLimit=s),t!==void 0&&(a.maxConcurrency=t),n!==void 0&&(a.runName=n),i!==void 0&&(a.configurable={...a.configurable,...i}),a}class ch extends Xi{constructor({config:e,onStart:t,onEnd:s,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=s,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&(this.argOnStart.length===1?await this.argOnStart(e):this.argOnStart.length===2&&await this.argOnStart(e,this.config)))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&(this.argOnError.length===1?await this.argOnError(e):this.argOnError.length===2&&await this.argOnError(e,this.config)):this.argOnEnd&&(this.argOnEnd.length===1?await this.argOnEnd(e):this.argOnEnd.length===2&&await this.argOnEnd(e,this.config)))}}function uh(r){return r?r.lc_runnable:!1}class Qv{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let s=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0;const n=e.tags??[];return this.includeNames!==void 0&&(s=s||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(s=s||this.includeTypes.includes(t)),this.includeTags!==void 0&&(s=s||n.some(i=>this.includeTags?.includes(i))),this.excludeNames!==void 0&&(s=s&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(s=s&&!this.excludeTypes.includes(t)),this.excludeTags!==void 0&&(s=s&&n.every(i=>!this.excludeTags?.includes(i))),s}}function dh(r,e,t,s){s?.errorMessages&&t&&(r.errorMessage={...r.errorMessage,[e]:t})}function $e(r,e,t,s,n){r[e]=t,dh(r,e,s,n)}const Zc={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"string",mapStrategy:"entries",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",emailStrategy:"format:email"},Yv=r=>typeof r=="string"?{...Zc,name:r}:{...Zc,...r};function eE(){return{}}function tE(r,e){const t={type:"array"};return r.type?._def?.typeName!==q.ZodAny&&(t.items=je(r.type._def,{...e,currentPath:[...e.currentPath,"items"]})),r.minLength&&$e(t,"minItems",r.minLength.value,r.minLength.message,e),r.maxLength&&$e(t,"maxItems",r.maxLength.value,r.maxLength.message,e),r.exactLength&&($e(t,"minItems",r.exactLength.value,r.exactLength.message,e),$e(t,"maxItems",r.exactLength.value,r.exactLength.message,e)),t}function rE(r,e){const t={type:"integer",format:"int64"};if(!r.checks)return t;for(const s of r.checks)switch(s.kind){case"min":e.target==="jsonSchema7"?s.inclusive?$e(t,"minimum",s.value,s.message,e):$e(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),$e(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?$e(t,"maximum",s.value,s.message,e):$e(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),$e(t,"maximum",s.value,s.message,e));break;case"multipleOf":$e(t,"multipleOf",s.value,s.message,e);break}return t}function sE(){return{type:"boolean"}}function nE(r,e){return je(r.type._def,e)}const iE=(r,e)=>je(r.innerType._def,e);function aE(r,e){return e.dateStrategy=="integer"?oE(r,e):{type:"string",format:"date-time"}}const oE=(r,e)=>{const t={type:"integer",format:"unix-time"};for(const s of r.checks)switch(s.kind){case"min":e.target==="jsonSchema7"&&$e(t,"minimum",s.value,s.message,e);break;case"max":e.target==="jsonSchema7"&&$e(t,"maximum",s.value,s.message,e);break}return t};function lE(r,e){return{...je(r.innerType._def,e),default:r.defaultValue()}}function cE(r,e){return e.effectStrategy==="input"?je(r.schema._def,e):{}}function uE(r){return{type:"string",enum:r.values}}const dE=r=>"type"in r&&r.type==="string"?!1:"allOf"in r;function hE(r,e){const t=[je(r.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),je(r.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(i=>!!i);let s=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const n=[];return t.forEach(i=>{if(dE(i))n.push(...i.allOf),i.unevaluatedProperties===void 0&&(s=void 0);else{let a=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;a=l}else s=void 0;n.push(a)}}),n.length?{allOf:n,...s}:void 0}function pE(r,e){const t=typeof r.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(r.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[r.value]}:{type:t==="bigint"?"integer":t,const:r.value}}const Gs={cuid:"^[cC][^\\s-]{8,}$",cuid2:"^[a-z][a-z0-9]*$",ulid:"^[0-9A-HJKMNP-TV-Z]{26}$",email:"^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_+-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$",emoji:"^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",uuid:"^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$",ipv4:"^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$",ipv6:"^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$"};function hh(r,e){const t={type:"string"};function s(n){return e.patternStrategy==="escape"?fE(n):n}if(r.checks)for(const n of r.checks)switch(n.kind){case"min":$e(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e);break;case"max":$e(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":jr(t,"email",n.message,e);break;case"format:idn-email":jr(t,"idn-email",n.message,e);break;case"pattern:zod":or(t,Gs.email,n.message,e);break}break;case"url":jr(t,"uri",n.message,e);break;case"uuid":jr(t,"uuid",n.message,e);break;case"regex":or(t,n.regex.source,n.message,e);break;case"cuid":or(t,Gs.cuid,n.message,e);break;case"cuid2":or(t,Gs.cuid2,n.message,e);break;case"startsWith":or(t,"^"+s(n.value),n.message,e);break;case"endsWith":or(t,s(n.value)+"$",n.message,e);break;case"datetime":jr(t,"date-time",n.message,e);break;case"length":$e(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,n.value):n.value,n.message,e),$e(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,n.value):n.value,n.message,e);break;case"includes":{or(t,s(n.value),n.message,e);break}case"ip":{n.version!=="v6"&&jr(t,"ipv4",n.message,e),n.version!=="v4"&&jr(t,"ipv6",n.message,e);break}case"emoji":or(t,Gs.emoji,n.message,e);break;case"ulid":{or(t,Gs.ulid,n.message,e);break}}return t}const fE=r=>Array.from(r).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),jr=(r,e,t,s)=>{r.format||r.anyOf?.some(n=>n.format)?(r.anyOf||(r.anyOf=[]),r.format&&(r.anyOf.push({format:r.format,...r.errorMessage&&s.errorMessages&&{errorMessage:{format:r.errorMessage.format}}}),delete r.format,r.errorMessage&&(delete r.errorMessage.format,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.anyOf.push({format:e,...t&&s.errorMessages&&{errorMessage:{format:t}}})):$e(r,"format",e,t,s)},or=(r,e,t,s)=>{r.pattern||r.allOf?.some(n=>n.pattern)?(r.allOf||(r.allOf=[]),r.pattern&&(r.allOf.push({pattern:r.pattern,...r.errorMessage&&s.errorMessages&&{errorMessage:{pattern:r.errorMessage.pattern}}}),delete r.pattern,r.errorMessage&&(delete r.errorMessage.pattern,Object.keys(r.errorMessage).length===0&&delete r.errorMessage)),r.allOf.push({pattern:e,...t&&s.errorMessages&&{errorMessage:{pattern:t}}})):$e(r,"pattern",e,t,s)};function ph(r,e){if(e.target==="openApi3"&&r.keyType?._def.typeName===q.ZodEnum)return{type:"object",required:r.keyType._def.values,properties:r.keyType._def.values.reduce((s,n)=>({...s,[n]:je(r.valueType._def,{...e,currentPath:[...e.currentPath,"properties",n]})??{}}),{}),additionalProperties:!1};const t={type:"object",additionalProperties:je(r.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??{}};if(e.target==="openApi3")return t;if(r.keyType?._def.typeName===q.ZodString&&r.keyType._def.checks?.length){const s=Object.entries(hh(r.keyType._def,e)).reduce((n,[i,a])=>i==="type"?n:{...n,[i]:a},{});return{...t,propertyNames:s}}else if(r.keyType?._def.typeName===q.ZodEnum)return{...t,propertyNames:{enum:r.keyType._def.values}};return t}function mE(r,e){if(e.mapStrategy==="record")return ph(r,e);const t=je(r.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},s=je(r.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,s],minItems:2,maxItems:2}}}function gE(r){const e=r.values,s=Object.keys(r.values).filter(i=>typeof e[e[i]]!="number").map(i=>e[i]),n=Array.from(new Set(s.map(i=>typeof i)));return{type:n.length===1?n[0]==="string"?"string":"number":["string","number"],enum:s}}function bE(){return{not:{}}}function _E(r){return r.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Ii={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function yE(r,e){if(e.target==="openApi3")return Kc(r,e);const t=r.options instanceof Map?Array.from(r.options.values()):r.options;if(t.every(s=>s._def.typeName in Ii&&(!s._def.checks||!s._def.checks.length))){const s=t.reduce((n,i)=>{const a=Ii[i._def.typeName];return a&&!n.includes(a)?[...n,a]:n},[]);return{type:s.length>1?s:s[0]}}else if(t.every(s=>s._def.typeName==="ZodLiteral"&&!s.description)){const s=t.reduce((n,i)=>{const a=typeof i._def.value;switch(a){case"string":case"number":case"boolean":return[...n,a];case"bigint":return[...n,"integer"];case"object":if(i._def.value===null)return[...n,"null"];case"symbol":case"undefined":case"function":default:return n}},[]);if(s.length===t.length){const n=s.filter((i,a,o)=>o.indexOf(i)===a);return{type:n.length>1?n:n[0],enum:t.reduce((i,a)=>i.includes(a._def.value)?i:[...i,a._def.value],[])}}}else if(t.every(s=>s._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((s,n)=>[...s,...n._def.values.filter(i=>!s.includes(i))],[])};return Kc(r,e)}const Kc=(r,e)=>{const t=(r.options instanceof Map?Array.from(r.options.values()):r.options).map((s,n)=>je(s._def,{...e,currentPath:[...e.currentPath,"anyOf",`${n}`]})).filter(s=>!!s&&(!e.strictUnions||typeof s=="object"&&Object.keys(s).length>0));return t.length?{anyOf:t}:void 0};function wE(r,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(r.innerType._def.typeName)&&(!r.innerType._def.checks||!r.innerType._def.checks.length))return e.target==="openApi3"?{type:Ii[r.innerType._def.typeName],nullable:!0}:{type:[Ii[r.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const s=je(r.innerType._def,{...e,currentPath:[...e.currentPath]});return s&&"$ref"in s?{allOf:[s],nullable:!0}:s&&{...s,nullable:!0}}const t=je(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return t&&{anyOf:[t,{type:"null"}]}}function vE(r,e){const t={type:"number"};if(!r.checks)return t;for(const s of r.checks)switch(s.kind){case"int":t.type="integer",dh(t,"type",s.message,e);break;case"min":e.target==="jsonSchema7"?s.inclusive?$e(t,"minimum",s.value,s.message,e):$e(t,"exclusiveMinimum",s.value,s.message,e):(s.inclusive||(t.exclusiveMinimum=!0),$e(t,"minimum",s.value,s.message,e));break;case"max":e.target==="jsonSchema7"?s.inclusive?$e(t,"maximum",s.value,s.message,e):$e(t,"exclusiveMaximum",s.value,s.message,e):(s.inclusive||(t.exclusiveMaximum=!0),$e(t,"maximum",s.value,s.message,e));break;case"multipleOf":$e(t,"multipleOf",s.value,s.message,e);break}return t}function EE(r,e){const t={type:"object",...Object.entries(r.shape()).reduce((s,[n,i])=>{if(i===void 0||i._def===void 0)return s;const a=je(i._def,{...e,currentPath:[...e.currentPath,"properties",n],propertyPath:[...e.currentPath,"properties",n]});return a===void 0?s:{properties:{...s.properties,[n]:a},required:i.isOptional()?s.required:[...s.required,n]}},{properties:{},required:[]}),additionalProperties:r.catchall._def.typeName==="ZodNever"?r.unknownKeys==="passthrough":je(r.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??!0};return t.required.length||delete t.required,t}const TE=(r,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return je(r.innerType._def,e);const t=je(r.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return t?{anyOf:[{not:{}},t]}:{}},kE=(r,e)=>{if(e.pipeStrategy==="input")return je(r.in._def,e);if(e.pipeStrategy==="output")return je(r.out._def,e);const t=je(r.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),s=je(r.out._def,{...e,currentPath:[...e.currentPath,"allOf",t?"1":"0"]});return{allOf:[t,s].filter(n=>n!==void 0)}};function AE(r,e){return je(r.type._def,e)}function OE(r,e){const s={type:"array",uniqueItems:!0,items:je(r.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return r.minSize&&$e(s,"minItems",r.minSize.value,r.minSize.message,e),r.maxSize&&$e(s,"maxItems",r.maxSize.value,r.maxSize.message,e),s}function SE(r,e){return r.rest?{type:"array",minItems:r.items.length,items:r.items.map((t,s)=>je(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[]),additionalItems:je(r.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:r.items.length,maxItems:r.items.length,items:r.items.map((t,s)=>je(t._def,{...e,currentPath:[...e.currentPath,"items",`${s}`]})).reduce((t,s)=>s===void 0?t:[...t,s],[])}}function PE(){return{not:{}}}function xE(){return{}}const CE=(r,e)=>je(r.innerType._def,e);function je(r,e,t=!1){const s=e.seen.get(r);if(s&&!t){const a=RE(s,e);if(a!==void 0)return a}const n={def:r,path:e.currentPath,jsonSchema:void 0};e.seen.set(r,n);const i=jE(r,r.typeName,e);return i&&NE(r,e,i),n.jsonSchema=i,i}const RE=(r,e)=>{switch(e.$refStrategy){case"root":return{$ref:r.path.join("/")};case"relative":return{$ref:IE(e.currentPath,r.path)};case"none":case"seen":return r.path.length<e.currentPath.length&&r.path.every((t,s)=>e.currentPath[s]===t)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},IE=(r,e)=>{let t=0;for(;t<r.length&&t<e.length&&r[t]===e[t];t++);return[(r.length-t).toString(),...e.slice(t)].join("/")},jE=(r,e,t)=>{switch(e){case q.ZodString:return hh(r,t);case q.ZodNumber:return vE(r,t);case q.ZodObject:return EE(r,t);case q.ZodBigInt:return rE(r,t);case q.ZodBoolean:return sE();case q.ZodDate:return aE(r,t);case q.ZodUndefined:return PE();case q.ZodNull:return _E(t);case q.ZodArray:return tE(r,t);case q.ZodUnion:case q.ZodDiscriminatedUnion:return yE(r,t);case q.ZodIntersection:return hE(r,t);case q.ZodTuple:return SE(r,t);case q.ZodRecord:return ph(r,t);case q.ZodLiteral:return pE(r,t);case q.ZodEnum:return uE(r);case q.ZodNativeEnum:return gE(r);case q.ZodNullable:return wE(r,t);case q.ZodOptional:return TE(r,t);case q.ZodMap:return mE(r,t);case q.ZodSet:return OE(r,t);case q.ZodLazy:return je(r.getter()._def,t);case q.ZodPromise:return AE(r,t);case q.ZodNaN:case q.ZodNever:return bE();case q.ZodEffects:return cE(r,t);case q.ZodAny:return eE();case q.ZodUnknown:return xE();case q.ZodDefault:return lE(r,t);case q.ZodBranded:return nE(r,t);case q.ZodReadonly:return CE(r,t);case q.ZodCatch:return iE(r,t);case q.ZodPipeline:return kE(r,t);case q.ZodFunction:case q.ZodVoid:case q.ZodSymbol:return;default:return(s=>{})()}},NE=(r,e,t)=>(r.description&&(t.description=r.description,e.markdownDescription&&(t.markdownDescription=r.description)),t),$E=r=>{const e=Yv(r),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:t,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([s,n])=>[n._def,{def:n._def,path:[...e.basePath,e.definitionPath,s],jsonSchema:void 0}]))}},Yi=(r,e)=>{const t=$E(e),s=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((o,[l,c])=>({...o,[l]:je(c._def,{...t,currentPath:[...t.basePath,t.definitionPath,l]},!0)??{}}),{}):void 0,n=typeof e=="string"?e:e?.name,i=je(r._def,n===void 0?t:{...t,currentPath:[...t.basePath,t.definitionPath,n]},!1)??{},a=n===void 0?s?{...i,[t.definitionPath]:s}:i:{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,n].join("/"),[t.definitionPath]:{...s,[n]:i}};return t.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function LE(r){return uh(r.data)?{type:"runnable",data:{id:r.data.lc_id,name:r.data.getName()}}:{type:"schema",data:{...Yi(r.data.schema),title:r.data.name}}}class fh{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const e={};return Object.values(this.nodes).forEach((t,s)=>{e[t.id]=sh(t.id)?s:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...LE(t)})),edges:this.edges.map(t=>t.data?{source:e[t.source],target:e[t.target],data:t.data}:{source:e[t.source],target:e[t.target]})}}addNode(e,t){if(t!==void 0&&this.nodes[t]!==void 0)throw new Error(`Node with id ${t} already exists`);const s=t||Xt(),n={id:s,data:e};return this.nodes[s]=n,n}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,s){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[t.id]===void 0)throw new Error(`Target node ${t.id} not in graph`);const n={source:e.id,target:t.id,data:s};return this.edges.push(n),n}firstNode(){const e=new Set(this.edges.map(s=>s.target)),t=[];return Object.values(this.nodes).forEach(s=>{e.has(s.id)||t.push(s)}),t[0]}lastNode(){const e=new Set(this.edges.map(s=>s.source)),t=[];return Object.values(this.nodes).forEach(s=>{e.has(s.id)||t.push(s)}),t[0]}extend(e){Object.entries(e.nodes).forEach(([t,s])=>{this.nodes[t]=s}),this.edges=[...this.edges,...e.edges]}trimFirstNode(){const e=this.firstNode();if(e){const t=this.edges.filter(s=>s.source===e.id);(Object.keys(this.nodes).length===1||t.length===1)&&this.removeNode(e)}}trimLastNode(){const e=this.lastNode();if(e){const t=this.edges.filter(s=>s.target===e.id);(Object.keys(this.nodes).length===1||t.length===1)&&this.removeNode(e)}}}function ft(r,e){return r&&!Array.isArray(r)&&!(r instanceof Date)&&typeof r=="object"?r:{[e]:r}}class ht extends Wr{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new Ts({bound:this,kwargs:e,config:{}})}map(){return new ji({bound:this})}withRetry(e){return new DE({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new Ts({bound:this,config:e,kwargs:{}})}withFallbacks(e){return new ME({runnable:this,fallbacks:e.fallbacks})}_getOptionsList(e,t=0){if(Array.isArray(e)){if(e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);return e.map(Ye)}return Array.from({length:t},()=>Ye(e))}async batch(e,t,s){const n=this._getOptionsList(t??{},e.length),i=n[0]?.maxConcurrency??s?.maxConcurrency,a=new sl({maxConcurrency:i,onFailedAttempt:l=>{throw l}}),o=e.map((l,c)=>a.call(async()=>{try{return await this.invoke(l,n[c])}catch(u){if(s?.returnExceptions)return u;throw u}}));return Promise.all(o)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const s=new Ns(this._streamIterator(e,Ye(t)));return await s.setup,pr.fromAsyncGenerator(s)}_separateRunnableConfigFromCallOptions(e={}){const t=Ye({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency}),s={...e};return delete s.callbacks,delete s.tags,delete s.metadata,delete s.runName,delete s.configurable,delete s.recursionLimit,delete s.maxConcurrency,[t,s]}async _callWithConfig(e,t,s){const n=Ye(s),a=await(await zr(n))?.handleChainStart(this.toJSON(),ft(t,"input"),void 0,n?.runType,void 0,void 0,n?.runName??this.getName());let o;try{o=await e.call(this,t,n,a)}catch(l){throw await a?.handleChainError(l),l}return await a?.handleChainEnd(ft(o,"output")),o}async _batchWithConfig(e,t,s,n){const i=this._getOptionsList(s??{},t.length),a=await Promise.all(i.map(zr)),o=await Promise.all(a.map((c,u)=>c?.handleChainStart(this.toJSON(),ft(t[u],"input"),void 0,i[u].runType,void 0,void 0,i[u].runName??this.getName())));let l;try{l=await e.call(this,t,i,o,n)}catch(c){throw await Promise.all(o.map(u=>u?.handleChainError(c))),c}return await Promise.all(o.map(c=>c?.handleChainEnd(ft(l,"output")))),l}async*_transformStreamWithConfig(e,t,s){let n,i=!0,a,o=!0;const l=Ye(s),c=await zr(l);async function*u(){for await(const h of e){if(i)if(n===void 0)n=h;else try{n=Br(n,h)}catch{n=void 0,i=!1}yield h}}let d;try{const h=await Wv(t.bind(this),u(),async()=>c?.handleChainStart(this.toJSON(),{input:""},void 0,l?.runType,void 0,void 0,l?.runName??this.getName()),l);d=h.setup;const f=_=>_.name==="log_stream_tracer",m=d?.handlers.find(f);let b=h.output;m!==void 0&&d!==void 0&&(b=await m.tapOutputIterable(d.runId,h.output));for await(const _ of b)if(yield _,o)if(a===void 0)a=_;else try{a=Br(a,_)}catch{a=void 0,o=!1}}catch(h){throw await d?.handleChainError(h,void 0,void 0,void 0,{inputs:ft(n,"input")}),h}await d?.handleChainEnd(a??{},void 0,void 0,void 0,{inputs:ft(n,"input")})}getGraph(e){const t=new fh,s=t.addNode({name:`${this.getName()}Input`,schema:xs.any()}),n=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:xs.any()});return t.addEdge(s,n),t.addEdge(n,i),t}pipe(e){return new Lr({first:this,last:Dr(e)})}pick(e){return this.pipe(new FE(e))}assign(e){return this.pipe(new mh(new $s({steps:e})))}async*transform(e,t){let s;for await(const n of e)s===void 0?s=n:s=Br(s,n);yield*this._streamIterator(s,Ye(t))}async*streamLog(e,t,s){const n=new Vc({...s,autoClose:!1,_schemaFormat:"original"}),i=Ye(t);yield*this._streamLog(e,n,i)}async*_streamLog(e,t,s){const{callbacks:n}=s;if(n===void 0)s.callbacks=[t];else if(Array.isArray(n))s.callbacks=n.concat([t]);else{const l=n.copy();l.inheritableHandlers.push(t),s.callbacks=l}const i=this.stream(e,s);async function a(){try{const l=await i;for await(const c of l){const u=new yr({ops:[{op:"add",path:"/streamed_output/-",value:c}]});await t.writer.write(u)}}finally{await t.writer.close()}}const o=a();try{for await(const l of t)yield l}finally{await o}}async*streamEvents(e,t,s){if(t.version!=="v1")throw new Error('Only version "v1" of the events schema is currently supported.');let n,i=!1;const a=Ye(t),o=a.tags??[],l=a.metadata??{},c=a.runName??this.getName(),u=new Vc({...s,autoClose:!1,_schemaFormat:"streaming_events"}),d=new Qv({...s}),h=this._streamLog(e,u,a);for await(const m of h){if(n?n=n.concat(m):n=bn.fromRunLogPatch(m),n.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;const w={...n.state},T={run_id:w.id,event:`on_${w.type}_start`,name:c,tags:o,metadata:l,data:{input:e}};d.includeEvent(T,w.type)&&(yield T)}const b=m.ops.filter(w=>w.path.startsWith("/logs/")).map(w=>w.path.split("/")[2]),_=[...new Set(b)];for(const w of _){let T,E={};const k=n.state.logs[w];if(k.end_time===void 0?k.streamed_output.length>0?T="stream":T="start":T="end",T==="start")k.inputs!==void 0&&(E.input=k.inputs);else if(T==="end")k.inputs!==void 0&&(E.input=k.inputs),E.output=k.final_output;else if(T==="stream"){const x=k.streamed_output.length;if(x!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${x} instead. Encountered in: "${k.name}"`);E={chunk:k.streamed_output[0]},k.streamed_output=[]}yield{event:`on_${k.type}_${T}`,name:k.name,run_id:k.id,tags:k.tags,metadata:k.metadata,data:E}}const{state:A}=n;if(A.streamed_output.length>0){const w=A.streamed_output.length;if(w!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${w} instead. Encountered in: "${A.name}"`);const T={chunk:A.streamed_output[0]};A.streamed_output=[];const E={event:`on_${A.type}_stream`,run_id:A.id,tags:o,metadata:l,name:c,data:T};d.includeEvent(E,A.type)&&(yield E)}}const f=n?.state;if(f!==void 0){const m={event:`on_${f.type}_end`,name:c,run_id:f.id,tags:o,metadata:l,data:{output:f.final_output}};d.includeEvent(m,f.type)&&(yield m)}}static isRunnable(e){return uh(e)}withListeners({onStart:e,onEnd:t,onError:s}){return new Ts({bound:this,config:{},configFactories:[n=>({callbacks:[new ch({config:n,onStart:e,onEnd:t,onError:s})]})]})}}class Ts extends ht{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=Wc(this.config,...e);return Wc(t,...this.configFactories?await Promise.all(this.configFactories.map(async s=>await s(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Ye(t),this.kwargs))}async batch(e,t,s){const n=Array.isArray(t)?await Promise.all(t.map(async i=>this._mergeConfig(Ye(i),this.kwargs))):await this._mergeConfig(Ye(t),this.kwargs);return this.bound.batch(e,n,s)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Ye(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Ye(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Ye(t),this.kwargs))}async*streamEvents(e,t,s){yield*this.bound.streamEvents(e,{...await this._mergeConfig(Ye(t),this.kwargs),version:t.version},s)}static isRunnableBinding(e){return e.bound&&ht.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:s}){return new Ts({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new ch({config:n,onStart:e,onEnd:t,onError:s})]})]})}}class ji extends ht{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new ji({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _invoke(e,t,s){return this.bound.batch(e,kt(t,{callbacks:s?.getChild()}))}withListeners({onStart:e,onEnd:t,onError:s}){return new ji({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:s})})}}class DE extends Ts{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,s){const n=e>1?`retry:attempt:${e}`:void 0;return kt(t,{callbacks:s?.getChild(n)})}async _invoke(e,t,s){return yi(n=>super.invoke(e,this._patchConfigForRetry(n,t,s)),{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async _batch(e,t,s,n){const i={};try{await yi(async a=>{const o=e.map((h,f)=>f).filter(h=>i[h.toString()]===void 0||i[h.toString()]instanceof Error),l=o.map(h=>e[h]),c=o.map(h=>this._patchConfigForRetry(a,t?.[h],s?.[h])),u=await super.batch(l,c,{...n,returnExceptions:!0});let d;for(let h=0;h<u.length;h+=1){const f=u[h],m=o[h];f instanceof Error&&d===void 0&&(d=f),i[m.toString()]=f}if(d)throw d;return u},{onFailedAttempt:this.onFailedAttempt,retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if(n?.returnExceptions!==!0)throw a}return Object.keys(i).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>i[parseInt(a,10)])}async batch(e,t,s){return this._batchWithConfig(this._batch.bind(this),e,t,s)}}class Lr extends ht{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const s=Ye(t),i=await(await zr(s))?.handleChainStart(this.toJSON(),ft(e,"input"),void 0,void 0,void 0,void 0,s?.runName);let a=e,o;try{const l=[this.first,...this.middle];for(let c=0;c<l.length;c+=1)a=await l[c].invoke(a,kt(s,{callbacks:i?.getChild(`seq:step:${c+1}`)}));o=await this.last.invoke(a,kt(s,{callbacks:i?.getChild(`seq:step:${this.steps.length}`)}))}catch(l){throw await i?.handleChainError(l),l}return await i?.handleChainEnd(ft(o,"output")),o}async batch(e,t,s){const n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map(zr)),a=await Promise.all(i.map((l,c)=>l?.handleChainStart(this.toJSON(),ft(e[c],"input"),void 0,void 0,void 0,void 0,n[c].runName)));let o=e;try{for(let l=0;l<this.steps.length;l+=1)o=await this.steps[l].batch(o,a.map((u,d)=>{const h=u?.getChild(`seq:step:${l+1}`);return kt(n[d],{callbacks:h})}),s)}catch(l){throw await Promise.all(a.map(c=>c?.handleChainError(l))),l}return await Promise.all(a.map(l=>l?.handleChainEnd(ft(o,"output")))),o}async*_streamIterator(e,t){const n=await(await zr(t))?.handleChainStart(this.toJSON(),ft(e,"input"),void 0,void 0,void 0,void 0,t?.runName),i=[this.first,...this.middle,this.last];let a=!0,o;async function*l(){yield e}try{let c=i[0].transform(l(),kt(t,{callbacks:n?.getChild("seq:step:1")}));for(let u=1;u<i.length;u+=1)c=await i[u].transform(c,kt(t,{callbacks:n?.getChild(`seq:step:${u+1}`)}));for await(const u of c)if(yield u,a)if(o===void 0)o=u;else try{o=Br(o,u)}catch{o=void 0,a=!1}}catch(c){throw await n?.handleChainError(c),c}await n?.handleChainEnd(ft(o,"output"))}getGraph(e){const t=new fh;let s=null;return this.steps.forEach((n,i)=>{const a=n.getGraph(e);i!==0&&a.trimFirstNode(),i!==this.steps.length-1&&a.trimLastNode(),t.extend(a);const o=a.firstNode();if(!o)throw new Error(`Runnable ${n} has no first node`);s&&t.addEdge(s,o),s=a.lastNode()}),t}pipe(e){return Lr.isRunnableSequence(e)?new Lr({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new Lr({first:this.first,middle:[...this.middle,this.last],last:Dr(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&ht.isRunnable(e)}static from([e,...t],s){return new Lr({first:Dr(e),middle:t.slice(0,-1).map(Dr),last:Dr(t[t.length-1]),name:s})}}class $s extends ht{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,s]of Object.entries(e.steps))this.steps[t]=Dr(s)}static from(e){return new $s({steps:e})}async invoke(e,t){const s=Ye(t),i=await(await zr(s))?.handleChainStart(this.toJSON(),{input:e},void 0,void 0,void 0,void 0,s?.runName),a={};try{await Promise.all(Object.entries(this.steps).map(async([o,l])=>{a[o]=await l.invoke(e,kt(s,{callbacks:i?.getChild(`map:key:${o}`)}))}))}catch(o){throw await i?.handleChainError(o),o}return await i?.handleChainEnd(a),a}async*_transform(e,t,s){const n={...this.steps},i=lh(e,Object.keys(n).length),a=new Map(Object.entries(n).map(([o,l],c)=>{const u=l.transform(i[c],kt(s,{callbacks:t?.getChild(`map:key:${o}`)}));return[o,u.next().then(d=>({key:o,gen:u,result:d}))]}));for(;a.size;){const{key:o,result:l,gen:c}=await Promise.race(a.values());a.delete(o),l.done||(yield{[o]:l.value},a.set(o,c.next().then(u=>({key:o,gen:c,result:u}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*s(){yield e}const n=new Ns(this.transform(s(),t));return await n.setup,pr.fromAsyncGenerator(n)}}class al extends ht{static lc_name(){return"RunnableLambda"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.func=e.func}static from(e){return new al({func:e})}async _invoke(e,t,s){return new Promise((n,i)=>{const a=kt(t,{callbacks:s?.getChild(),recursionLimit:(t?.recursionLimit??Oa)-1});co.getInstance().run(a,async()=>{try{let o=await this.func(e,{...a,config:a});if(o&&ht.isRunnable(o)){if(t?.recursionLimit===0)throw new Error("Recursion limit reached.");o=await o.invoke(e,{...a,recursionLimit:(a.recursionLimit??Oa)-1})}n(o)}catch(o){i(o)}})})}async invoke(e,t){return this._callWithConfig(this._invoke,e,t)}async*_transform(e,t,s){let n;for await(const a of e)if(n===void 0)n=a;else try{n=Br(n,a)}catch{n=a}const i=await new Promise((a,o)=>{co.getInstance().run(s,async()=>{try{const l=await this.func(n,{...s,config:s});a(l)}catch(l){o(l)}})});if(i&&ht.isRunnable(i)){if(s?.recursionLimit===0)throw new Error("Recursion limit reached.");const a=await i.stream(n,kt(s,{callbacks:t?.getChild(),recursionLimit:(s?.recursionLimit??Oa)-1}));for await(const o of a)yield o}else yield i}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*s(){yield e}const n=new Ns(this.transform(s(),t));return await n.setup,pr.fromAsyncGenerator(n)}}class ME extends ht{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const n=await(await wt.configure(t?.callbacks,void 0,t?.tags,void 0,t?.metadata))?.handleChainStart(this.toJSON(),ft(e,"input"),void 0,void 0,void 0,void 0,t?.runName);let i;for(const a of this.runnables())try{const o=await a.invoke(e,kt(t,{callbacks:n?.getChild()}));return await n?.handleChainEnd(ft(o,"output")),o}catch(o){i===void 0&&(i=o)}throw i===void 0?new Error("No error stored at end of fallback."):(await n?.handleChainError(i),i)}async batch(e,t,s){if(s?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),i=await Promise.all(n.map(l=>wt.configure(l?.callbacks,void 0,l?.tags,void 0,l?.metadata))),a=await Promise.all(i.map((l,c)=>l?.handleChainStart(this.toJSON(),ft(e[c],"input"),void 0,void 0,void 0,void 0,n[c].runName)));let o;for(const l of this.runnables())try{const c=await l.batch(e,a.map((u,d)=>kt(n[d],{callbacks:u?.getChild()})),s);return await Promise.all(a.map((u,d)=>u?.handleChainEnd(ft(c[d],"output")))),c}catch(c){o===void 0&&(o=c)}throw o?(await Promise.all(a.map(l=>l?.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}}function Dr(r){if(typeof r=="function")return new al({func:r});if(ht.isRunnable(r))return r;if(!Array.isArray(r)&&typeof r=="object"){const e={};for(const[t,s]of Object.entries(r))e[t]=Dr(s);return new $s({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}class mh extends ht{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof $s&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const s=await this.mapper.invoke(e,t);return{...e,...s}}async*_transform(e,t,s){const n=this.mapper.getStepsKeys(),[i,a]=lh(e),o=this.mapper.transform(a,kt(s,{callbacks:t?.getChild()})),l=o.next();for await(const c of i){if(typeof c!="object"||Array.isArray(c))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof c}`);const u=Object.fromEntries(Object.entries(c).filter(([d])=>!n.includes(d)));Object.keys(u).length>0&&(yield u)}yield(await l).value;for await(const c of o)yield c}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*s(){yield e}const n=new Ns(this.transform(s(),t));return await n.setup,pr.fromAsyncGenerator(n)}}class FE extends ht{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{const t=this.keys.map(s=>[s,e[s]]).filter(s=>s[1]!==void 0);return t.length===0?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const s=await this._pick(t);s!==void 0&&(yield s)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){async function*s(){yield e}const n=new Ns(this.transform(s(),t));return await n.setup,pr.fromAsyncGenerator(n)}}const UE=r=>r.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":r.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":r.startsWith("gpt-4-32k")?"gpt-4-32k":r.startsWith("gpt-4-")?"gpt-4":r,GE=()=>!1;class gh extends ht{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??GE(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class BE extends gh{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...s}){super({callbacks:e??t,...s}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof s.cache=="object"?this.cache=s.cache:s.cache?this.cache=el.global():this.cache=void 0,this.caller=new sl(s??{})}async getNumTokens(e){if(typeof e!="string")return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await lw("modelName"in this?UE(this.modelName):"gpt2")}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(s){console.warn("Failed to calculate number of tokens, falling back to approximate count",s)}return t}static _convertInputToPromptValue(e){return typeof e=="string"?new Dd(e):Array.isArray(e)?new Md(e.map(Vs)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){const t={...this._identifyingParams(),...e,_type:this._llmType(),_model:this._modelType()};return Object.entries(t).filter(([i,a])=>a!==void 0).map(([i,a])=>`${i}:${JSON.stringify(a)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class $r extends BE{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptions(e){const[t,s]=super._separateRunnableConfigFromCallOptions(e);return s?.timeout&&!s.signal&&(s.signal=AbortSignal.timeout(s.timeout)),[t,s]}async invoke(e,t){const s=$r._convertInputToPromptValue(e);return(await this.generatePrompt([s],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,s){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===$r.prototype._streamResponseChunks)yield this.invoke(e,t);else{const n=$r._convertInputToPromptValue(e).toChatMessages(),[i,a]=this._separateRunnableConfigFromCallOptions(t),o=await wt.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),l={options:a,invocation_params:this?.invocationParams(a),batch_size:1},c=await o?.handleChatModelStart(this.toJSON(),[n],void 0,void 0,l,void 0,void 0,i.runName);let u;try{for await(const d of this._streamResponseChunks(n,a,c?.[0]))d.message.response_metadata={...d.generationInfo,...d.message.response_metadata},yield d.message,u?u=u.concat(d):u=d}catch(d){throw await Promise.all((c??[]).map(h=>h?.handleLLMError(d))),d}await Promise.all((c??[]).map(d=>d?.handleLLMEnd({generations:[[u]]})))}}async _generateUncached(e,t,s){const n=e.map(h=>h.map(Vs)),i=await wt.configure(s.callbacks,this.callbacks,s.tags,this.tags,s.metadata,this.metadata,{verbose:this.verbose}),a={options:t,invocation_params:this?.invocationParams(t),batch_size:1},o=await i?.handleChatModelStart(this.toJSON(),n,void 0,void 0,a,void 0,void 0,s.runName),l=await Promise.allSettled(n.map((h,f)=>this._generate(h,{...t,promptIndex:f},o?.[f]))),c=[],u=[];await Promise.all(l.map(async(h,f)=>{if(h.status==="fulfilled"){const m=h.value;for(const b of m.generations)b.message.response_metadata={...b.generationInfo,...b.message.response_metadata};return m.generations.length===1&&(m.generations[0].message.response_metadata={...m.llmOutput,...m.generations[0].message.response_metadata}),c[f]=m.generations,u[f]=m.llmOutput,o?.[f]?.handleLLMEnd({generations:[m.generations],llmOutput:m.llmOutput})}else return await o?.[f]?.handleLLMError(h.reason),Promise.reject(h.reason)}));const d={generations:c,llmOutput:u.length?this._combineLLMOutput?.(...u):void 0};return Object.defineProperty(d,Ic,{value:o?{runIds:o?.map(h=>h.runId)}:void 0,configurable:!0}),d}async _generateCached({messages:e,cache:t,llmStringKey:s,parsedOptions:n,handledOptions:i}){const a=e.map(b=>b.map(Vs)),o=await wt.configure(i.callbacks,this.callbacks,i.tags,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),l={options:n,invocation_params:this?.invocationParams(n),batch_size:1,cached:!0},c=await o?.handleChatModelStart(this.toJSON(),a,void 0,void 0,l,void 0,void 0,i.runName),u=[],h=(await Promise.allSettled(a.map(async(b,_)=>{const A=$r._convertInputToPromptValue(b).toString(),w=await t.lookup(A,s);return w==null&&u.push(_),w}))).map((b,_)=>({result:b,runManager:c?.[_]})).filter(({result:b})=>b.status==="fulfilled"&&b.value!=null||b.status==="rejected"),f=[];await Promise.all(h.map(async({result:b,runManager:_},A)=>{if(b.status==="fulfilled"){const w=b.value;return f[A]=w,w.length&&await _?.handleLLMNewToken(w[0].text),_?.handleLLMEnd({generations:[w]})}else return await _?.handleLLMError(b.reason),Promise.reject(b.reason)}));const m={generations:f,missingPromptIndices:u};return Object.defineProperty(m,Ic,{value:c?{runIds:c?.map(b=>b.runId)}:void 0,configurable:!0}),m}async generate(e,t,s){let n;Array.isArray(t)?n={stop:t}:n=t;const i=e.map(f=>f.map(Vs)),[a,o]=this._separateRunnableConfigFromCallOptions(n);if(a.callbacks=a.callbacks??s,!this.cache)return this._generateUncached(i,o,a);const{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(o),{generations:u,missingPromptIndices:d}=await this._generateCached({messages:i,cache:l,llmStringKey:c,parsedOptions:o,handledOptions:a});let h={};if(d.length>0){const f=await this._generateUncached(d.map(m=>i[m]),o,a);await Promise.all(f.generations.map(async(m,b)=>{const _=d[b];u[_]=m;const A=$r._convertInputToPromptValue(i[_]).toString();return l.update(A,c,m)})),h=f.llmOutput??{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,s){const n=e.map(i=>i.toChatMessages());return this.generate(n,t,s)}async call(e,t,s){return(await this.generate([e.map(Vs)],t,s)).generations[0][0].message}async callPrompt(e,t,s){const n=e.toChatMessages();return this.call(n,t,s)}async predictMessages(e,t,s){return this.call(e,t,s)}async predict(e,t,s){const n=new _i(e),i=await this.call([n],t,s);if(typeof i.content!="string")throw new Error("Cannot use predict when output is not a string.");return i.content}}function zE(r){return{name:r.name,description:r.description,parameters:Yi(r.schema)}}function bh(r){return{type:"function",function:zE(r)}}class Jc extends ht{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const s=Ye(t);return this.func&&await this.func(e,s),this._callWithConfig(n=>Promise.resolve(n),e,s)}async*transform(e,t){const s=Ye(t);let n,i=!0;for await(const a of this._transformStreamWithConfig(e,o=>o,s))if(yield a,i)if(n===void 0)n=a;else try{n=Br(n,a)}catch{n=void 0,i=!1}this.func&&n!==void 0&&await this.func(n,s)}static assign(e){return new mh(new $s({steps:e}))}}class ol extends ht{parseResultWithPrompt(e,t,s){return this.parseResult(e,s)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return typeof e=="string"?this._callWithConfig(async(s,n)=>this.parseResult([{text:s}],n?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(s,n)=>this.parseResult([{message:s,text:this._baseMessageToString(s)}],n?.callbacks),e,{...t,runType:"parser"})}}class _h extends ol{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,s){return this.parse(e,s)}_type(){throw new Error("_type not implemented")}}class yh extends Error{constructor(e,t,s,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=s,this.sendToLLM=n,n&&(s===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}function uo(r,e){const t=typeof r;if(t!==typeof e)return!1;if(Array.isArray(r)){if(!Array.isArray(e))return!1;const s=r.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(!uo(r[n],e[n]))return!1;return!0}if(t==="object"){if(!r||!e)return r===e;const s=Object.keys(r),n=Object.keys(e);if(s.length!==n.length)return!1;for(const a of s)if(!uo(r[a],e[a]))return!1;return!0}return r===e}class HE extends _h{async*_transform(e){for await(const t of e)typeof t=="string"?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class qE extends HE{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let t,s;for await(const n of e){if(typeof n!="string"&&typeof n.content!="string")throw new Error("Cannot handle non-string output.");let i;if(hy(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");i=new sn({message:n,text:n.content})}else if(Yo(n)){if(typeof n.content!="string")throw new Error("Cannot handle non-string message output.");i=new sn({message:n.toChunk(),text:n.content})}else i=new Vi({text:n});s===void 0?s=i:s=s.concat(i);const a=await this.parsePartialResult([s]);a!=null&&!uo(a,t)&&(this.diff?yield this._diff(t,a):yield a,t=a)}}}class VE extends _h{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){const t=xs.object(Object.fromEntries(Object.entries(e).map(([s,n])=>[s,xs.string().describe(n)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(Yi(this.schema))}
\`\`\`
`}async parse(e){try{const t=e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim();return await this.schema.parseAsync(JSON.parse(t))}catch(t){throw new yh(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class WE extends qE{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?Vv(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return Xc(e[0].text)}async parse(e){return Xc(e,JSON.parse)}getFormatInstructions(){return""}}function Xc(r,e=ZE){r=r.trim();const t=/```(json)?(.*)```/s.exec(r);return e(t?t[2]:r)}function ZE(r){if(typeof r>"u")return null;try{return JSON.parse(r)}catch{}let e="";const t=[];let s=!1,n=!1;for(let i of r){if(s)i==='"'&&!n?s=!1:i===`
`&&!n?i="\\n":i==="\\"?n=!n:n=!1;else if(i==='"')s=!0,n=!1;else if(i==="{")t.push("}");else if(i==="[")t.push("]");else if(i==="}"||i==="]")if(t&&t[t.length-1]===i)t.pop();else return null;e+=i}s&&(e+='"');for(let i=t.length-1;i>=0;i-=1)e+=t[i];try{return JSON.parse(e)}catch{return null}}class KE extends ol{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}async parseResult(e){const t=e[0].message.additional_kwargs.tool_calls;if(!t)throw new Error(`No tools_call in message ${JSON.stringify(e)}`);const s=JSON.parse(JSON.stringify(t)),n=[];for(const i of s)if(i.function!==void 0){const a={type:i.function.name,args:JSON.parse(i.function.arguments)};this.returnId&&(a.id=i.id),Object.defineProperty(a,"name",{get(){return this.type}}),Object.defineProperty(a,"arguments",{get(){return this.args}}),n.push(a)}return n}}class ho extends ol{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"initialParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.initialParser=new KE(e),this.zodSchema=e.zodSchema}async _validateResult(e){if(this.zodSchema===void 0)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new yh(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parseResult(e){const s=(await this.initialParser.parseResult(e)).filter(a=>a.type===this.keyName);let n=s;return this.returnId||(n=s.map(a=>a.args)),this.returnSingle?this._validateResult(n[0]):await Promise.all(n.map(a=>this._validateResult(a)))}}function JE(r){const{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:s,azureOpenAIBasePath:n,baseURL:i}=r;if(s&&n&&e)return`${n}/${e}`;if(s){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return i}function XE(r){let e;return r.constructor.name===Q_.name?(e=new Error(r.message),e.name="TimeoutError"):r.constructor.name===Y_.name?(e=new Error(r.message),e.name="AbortError"):e=r,e}function QE(r){return r.anyOf!==void 0&&Array.isArray(r.anyOf)}function YE(r){const e=["namespace functions {",""];for(const t of r)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(wh(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function wh(r,e){const t=[];for(const[s,n]of Object.entries(r.properties??{}))n.description&&e<2&&t.push(`// ${n.description}`),r.required?.includes(s)?t.push(`${s}: ${Ni(n,e)},`):t.push(`${s}?: ${Ni(n,e)},`);return t.map(s=>" ".repeat(e)+s).join(`
`)}function Ni(r,e){if(QE(r))return r.anyOf.map(t=>Ni(t,e)).join(" | ");switch(r.type){case"string":return r.enum?r.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return r.enum?r.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",wh(r,e+2),"}"].join(`
`);case"array":return r.items?`${Ni(r.items,e)}[]`:"any[]";default:return""}}function eT(r){return r.role!=="system"&&r.role!=="assistant"&&r.role!=="user"&&r.role!=="function"&&r.role!=="tool"&&console.warn(`Unknown message role: ${r.role}`),r.role}function vh(r){const e=r._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!Tn.isInstance(r))throw new Error("Invalid generic chat message");return eT(r)}default:throw new Error(`Unknown message type: ${e}`)}}function tT(r){switch(r.role){case"assistant":return new jd(r.content||"",{function_call:r.function_call,tool_calls:r.tool_calls});default:return new Tn(r.content||"",r.role??"unknown")}}function rT(r,e){const t=r.role??e,s=r.content??"";let n;return r.function_call?n={function_call:r.function_call}:r.tool_calls?n={tool_calls:r.tool_calls}:n={},t==="user"?new Bi({content:s}):t==="assistant"?new En({content:s,additional_kwargs:n}):t==="system"?new zi({content:s}):t==="function"?new Hi({content:s,additional_kwargs:n,name:r.name}):t==="tool"?new Qo({content:s,additional_kwargs:n,tool_call_id:r.tool_call_id}):new qi({content:s,role:t})}function Qc(r){return r.map(e=>({role:vh(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id}))}class sT extends $r{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",azureOpenAIApiKey:"AZURE_OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",azureOpenAIApiVersion:"azure_openai_api_version",azureOpenAIApiKey:"azure_openai_api_key",azureOpenAIApiInstanceName:"azure_openai_api_instance_name",azureOpenAIApiDeploymentName:"azure_openai_api_deployment_name"}}constructor(e,t){if(super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiInstanceName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIApiDeploymentName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"azureOpenAIBasePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.openAIApiKey??St("OPENAI_API_KEY"),this.azureOpenAIApiKey=e?.azureOpenAIApiKey??St("AZURE_OPENAI_API_KEY"),!this.azureOpenAIApiKey&&!this.openAIApiKey)throw new Error("OpenAI or Azure OpenAI API key not found");if(this.azureOpenAIApiInstanceName=e?.azureOpenAIApiInstanceName??St("AZURE_OPENAI_API_INSTANCE_NAME"),this.azureOpenAIApiDeploymentName=e?.azureOpenAIApiDeploymentName??St("AZURE_OPENAI_API_DEPLOYMENT_NAME"),this.azureOpenAIApiVersion=e?.azureOpenAIApiVersion??St("AZURE_OPENAI_API_VERSION"),this.azureOpenAIBasePath=e?.azureOpenAIBasePath??St("AZURE_OPENAI_BASE_PATH"),this.organization=e?.configuration?.organization??St("OPENAI_ORGANIZATION"),this.modelName=e?.modelName??this.modelName,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.maxTokens=e?.maxTokens,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stop,this.user=e?.user,this.streaming=e?.streaming??!1,this.azureOpenAIApiKey){if(!this.azureOpenAIApiInstanceName&&!this.azureOpenAIBasePath)throw new Error("Azure OpenAI API instance name not found");if(!this.azureOpenAIApiDeploymentName)throw new Error("Azure OpenAI API deployment name not found");if(!this.azureOpenAIApiVersion)throw new Error("Azure OpenAI API version not found");this.openAIApiKey=this.openAIApiKey??""}this.clientConfig={apiKey:this.openAIApiKey,organization:this.organization,baseURL:t?.basePath??e?.configuration?.basePath,dangerouslyAllowBrowser:!0,defaultHeaders:t?.baseOptions?.headers??e?.configuration?.baseOptions?.headers,defaultQuery:t?.baseOptions?.params??e?.configuration?.baseOptions?.params,...t,...e?.configuration}}invocationParams(e){function t(n){return n!==void 0&&n.every(i=>Array.isArray(i.lc_namespace))}return{model:this.modelName,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,max_tokens:this.maxTokens===-1?void 0:this.maxTokens,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stop,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:t(e?.tools)?e?.tools.map(bh):e?.tools,tool_choice:e?.tool_choice,response_format:e?.response_format,seed:e?.seed,...this.modelKwargs}}_identifyingParams(){return{model_name:this.modelName,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,s){const n=Qc(e),i={...this.invocationParams(t),messages:n,stream:!0};let a;const o=await this.completionWithRetry(i,t);for await(const l of o){const c=l?.choices[0];if(!c)continue;const{delta:u}=c;if(!u)continue;const d=rT(u,a);a=u.role??a;const h={prompt:t.promptIndex??0,completion:c.index??0};if(typeof d.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const f={...h};c.finish_reason!==void 0&&(f.finish_reason=c.finish_reason),this.logprobs&&(f.logprobs=c.logprobs);const m=new sn({message:d,text:d.content,generationInfo:f});yield m,s?.handleLLMNewToken(m.text??"",h,void 0,void 0,void 0,{chunk:m})}if(t.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _generate(e,t,s){const n={},i=this.invocationParams(t),a=Qc(e);if(i.stream){const o=this._streamResponseChunks(e,t,s),l={};for await(const m of o){m.message.response_metadata={...m.generationInfo,...m.message.response_metadata};const b=m.generationInfo?.completion??0;l[b]===void 0?l[b]=m:l[b]=l[b].concat(m)}const c=Object.entries(l).sort(([m],[b])=>parseInt(m,10)-parseInt(b,10)).map(([m,b])=>b),{functions:u,function_call:d}=this.invocationParams(t),h=await this.getEstimatedTokenCountFromPrompt(e,u,d),f=await this.getNumTokensFromGenerations(c);return n.promptTokens=h,n.completionTokens=f,n.totalTokens=h+f,{generations:c,llmOutput:{estimatedTokenUsage:n}}}else{const o=await this.completionWithRetry({...i,stream:!1,messages:a},{signal:t?.signal,...t?.options}),{completion_tokens:l,prompt_tokens:c,total_tokens:u}=o?.usage??{};l&&(n.completionTokens=(n.completionTokens??0)+l),c&&(n.promptTokens=(n.promptTokens??0)+c),u&&(n.totalTokens=(n.totalTokens??0)+u);const d=[];for(const h of o?.choices??[]){const m={text:h.message?.content??"",message:tT(h.message??{role:"assistant"})};m.generationInfo={...h.finish_reason?{finish_reason:h.finish_reason}:{},...h.logprobs?{logprobs:h.logprobs}:{}},d.push(m)}return{generations:d,llmOutput:{tokenUsage:n}}}}async getEstimatedTokenCountFromPrompt(e,t,s){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&s!=="auto"){const i=YE(t);n+=await this.getNumTokens(i),n+=9}return t&&e.find(i=>i._getType()==="system")&&(n-=4),s==="none"?n+=1:typeof s=="object"&&(n+=await this.getNumTokens(s.name)+4),n}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async s=>s.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([s.message])).countPerMessage[0]:await this.getNumTokens(s.message.content)))).reduce((s,n)=>s+n,0)}async getNumTokensFromMessages(e){let t=0,s=0,n=0;this.modelName==="gpt-3.5-turbo-0301"?(s=4,n=-1):(s=3,n=1);const i=await Promise.all(e.map(async a=>{const o=await this.getNumTokens(a.content),l=await this.getNumTokens(vh(a)),c=a.name!==void 0?n+await this.getNumTokens(a.name):0;let u=o+s+l+c;const d=a;if(d._getType()==="function"&&(u-=2),d.additional_kwargs?.function_call&&(u+=3),d?.additional_kwargs.function_call?.name&&(u+=await this.getNumTokens(d.additional_kwargs.function_call?.name)),d.additional_kwargs.function_call?.arguments)try{u+=await this.getNumTokens(JSON.stringify(JSON.parse(d.additional_kwargs.function_call?.arguments)))}catch(h){console.error("Error parsing function arguments",h,JSON.stringify(d.additional_kwargs.function_call)),u+=await this.getNumTokens(d.additional_kwargs.function_call?.arguments)}return t+=u,u}));return t+=3,{totalCount:t,countPerMessage:i}}async completionWithRetry(e,t){const s=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,s)}catch(n){throw XE(n)}})}_getClientOptions(e){if(!this.client){const s={azureOpenAIApiDeploymentName:this.azureOpenAIApiDeploymentName,azureOpenAIApiInstanceName:this.azureOpenAIApiInstanceName,azureOpenAIApiKey:this.azureOpenAIApiKey,azureOpenAIBasePath:this.azureOpenAIBasePath,baseURL:this.clientConfig.baseURL},n=JE(s),i={...this.clientConfig,baseURL:n,timeout:this.timeout,maxRetries:0};i.baseURL||delete i.baseURL,this.client=new at(i)}const t={...this.clientConfig,...e};return this.azureOpenAIApiKey&&(t.headers={"api-key":this.azureOpenAIApiKey,...t.headers},t.query={"api-version":this.azureOpenAIApiVersion,...t.query}),t}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((t,s)=>(s&&s.tokenUsage&&(t.tokenUsage.completionTokens+=s.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=s.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=s.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let s,n,i,a;nT(e)?(s=e.schema,n=e.name,i=e.method,a=e.includeRaw):(s=e,n=t?.name,i=t?.method,a=t?.includeRaw);let o,l;if(i==="jsonMode")o=this.bind({response_format:{type:"json_object"}}),Yc(s)?l=VE.fromZodSchema(s):l=new WE;else{let h=n??"extract";if(Yc(s)){const f=Yi(s);o=this.bind({tools:[{type:"function",function:{name:h,description:f.description,parameters:f}}],tool_choice:{type:"function",function:{name:h}}}),l=new ho({returnSingle:!0,keyName:h,zodSchema:s})}else{let f;typeof s.name=="string"&&typeof s.parameters=="object"&&s.parameters!=null?(f=s,h=s.name):f={name:h,description:s.description??"",parameters:s},o=this.bind({tools:[{type:"function",function:f}],tool_choice:{type:"function",function:{name:h}}}),l=new ho({returnSingle:!0,keyName:h})}}if(!a)return o.pipe(l);const c=Jc.assign({parsed:(h,f)=>l.invoke(h.raw,f)}),u=Jc.assign({parsed:()=>null}),d=c.withFallbacks({fallbacks:[u]});return Lr.from([{raw:o},d])}}function Yc(r){return typeof r?.parse=="function"}function nT(r){return r!==void 0&&typeof r.schema=="object"}class iT extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}class aT extends gh{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1})}async invoke(e,t){return this.call(e,Ye(t))}async call(e,t,s){let n;try{n=await this.schema.parseAsync(e)}catch{throw new iT("Received tool input did not match expected schema",JSON.stringify(e))}const i=Lv(t),o=await(await wt.configure(i.callbacks,this.callbacks,i.tags||s,this.tags,i.metadata,this.metadata,{verbose:this.verbose}))?.handleToolStart(this.toJSON(),typeof n=="string"?n:JSON.stringify(n),void 0,void 0,void 0,void 0,i.runName);let l;try{l=await this._call(n,o,i)}catch(c){throw await o?.handleToolError(c),c}return await o?.handleToolEnd(l),l}}class oT extends aT{name="modify_code";description="A tool to modify code based on CSS properties.";schema=xs.object({code:xs.string().describe("The modified code chunk with the style changes implemented.")});async _call(e){return"The answer"}}const Sa=bh(new oT);class Eh extends ht{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},s={};for(const[i,a]of Object.entries(t))typeof a=="string"?s[i]=a:s[i]=await a();return{...s,...e}}async invoke(e,t){return this._callWithConfig(s=>this.formatPromptValue(s),e,{...t,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await ta(()=>Promise.resolve().then(()=>eu),void 0,import.meta.url);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await ta(()=>Promise.resolve().then(()=>eu),void 0,import.meta.url);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await ta(()=>Promise.resolve().then(()=>hT),void 0,import.meta.url);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class Th extends Eh{async formatPromptValue(e){const t=await this.format(e);return new Dd(t)}}const kh=r=>{const e=r.split(""),t=[],s=(i,a)=>{for(let o=a;o<e.length;o+=1)if(i.includes(e[o]))return o;return-1};let n=0;for(;n<e.length;)if(e[n]==="{"&&n+1<e.length&&e[n+1]==="{")t.push({type:"literal",text:"{"}),n+=2;else if(e[n]==="}"&&n+1<e.length&&e[n+1]==="}")t.push({type:"literal",text:"}"}),n+=2;else if(e[n]==="{"){const i=s("}",n);if(i<0)throw new Error("Unclosed '{' in template.");t.push({type:"variable",name:e.slice(n+1,i).join("")}),n=i+1}else{if(e[n]==="}")throw new Error("Single '}' in template.");{const i=s("{}",n),a=(i<0?e.slice(n):e.slice(n,i)).join("");t.push({type:"literal",text:a}),n=i<0?e.length:i}}return t},lT=(r,e)=>kh(r).reduce((t,s)=>{if(s.type==="variable"){if(s.name in e)return t+e[s.name];throw new Error(`Missing value for input ${s.name}`)}return t+s.text},""),po={"f-string":lT},cT={"f-string":kh},Mr=(r,e,t)=>po[e](r,t),uT=(r,e)=>cT[e](r),ll=(r,e,t)=>{if(!(e in po)){const s=Object.keys(po);throw new Error(`Invalid template format. Got \`${e}\`;
                         should be one of ${s}`)}try{const s=t.reduce((n,i)=>(n[i]="foo",n),{});Array.isArray(r)?r.forEach(n=>{if(n.type==="text")Mr(n.text,e,s);else if(n.type==="image_url")if(typeof n.image_url=="string")Mr(n.image_url,e,s);else{const i=n.image_url.url;Mr(i,e,s)}else throw new Error(`Invalid message template received. ${JSON.stringify(n,null,2)}`)}):Mr(r,e,s)}catch(s){throw new Error(`Invalid prompt schema: ${s.message}`)}};class cr extends Th{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),ll(this.template,this.templateFormat,t)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return Mr(this.template,this.templateFormat,t)}static fromExamples(e,t,s,n=`

`,i=""){const a=[i,...e,t].join(n);return new cr({inputVariables:s,template:a})}static fromTemplate(e,{templateFormat:t="f-string",...s}={}){const n=new Set;return uT(e,t).forEach(i=>{i.type==="variable"&&n.add(i.name)}),new cr({inputVariables:[...n],templateFormat:t,template:e,...s})}async partial(e){const t=this.inputVariables.filter(i=>!(i in e)),s={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:s};return new cr(n)}serialize(){if(this.outputParser!==void 0)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new cr({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const eu=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:cr},Symbol.toStringTag,{value:"Module"}));class dT extends Eh{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new Md(t)}}class _n extends Th{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),ll(this.prefix+this.suffix,this.templateFormat,t)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){const t=this.inputVariables.filter(i=>!(i in e)),s={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:s};return new _n(n)}async format(e){const t=await this.mergePartialAndUserVariables(e),s=await this.getExamples(t),n=await Promise.all(s.map(a=>this.examplePrompt.format(a))),i=[this.prefix,...n,this.suffix].join(this.exampleSeparator);return Mr(i,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(this.outputParser!==void 0)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){const{example_prompt:t}=e;if(!t)throw new Error("Missing example prompt");const s=await cr.deserialize(t);let n;if(Array.isArray(e.examples))n=e.examples;else throw new Error("Invalid examples format. Only list or string are supported.");return new _n({inputVariables:e.input_variables,examplePrompt:s,examples:n,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}class cl extends dT{_getPromptType(){return"few_shot_chat"}static lc_name(){return"FewShotChatMessagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:`

`}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.examples=e.examples,this.examplePrompt=e.examplePrompt,this.exampleSeparator=e.exampleSeparator??`

`,this.exampleSelector=e.exampleSelector,this.prefix=e.prefix??"",this.suffix=e.suffix??"",this.templateFormat=e.templateFormat??"f-string",this.validateTemplate=e.validateTemplate??!0,this.examples!==void 0&&this.exampleSelector!==void 0)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(this.examples===void 0&&this.exampleSelector===void 0)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let t=this.inputVariables;this.partialVariables&&(t=t.concat(Object.keys(this.partialVariables))),ll(this.prefix+this.suffix,this.templateFormat,t)}}async getExamples(e){if(this.examples!==void 0)return this.examples;if(this.exampleSelector!==void 0)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let s=await this.getExamples(t);s=s.map(i=>{const a={};return this.examplePrompt.inputVariables.forEach(o=>{a[o]=i[o]}),a});const n=[];for(const i of s){const a=await this.examplePrompt.formatMessages(i);n.push(...a)}return n}async format(e){const t=await this.mergePartialAndUserVariables(e),s=await this.getExamples(t),i=(await Promise.all(s.map(o=>this.examplePrompt.formatMessages(o)))).flat().map(o=>o.content),a=[this.prefix,...i,this.suffix].join(this.exampleSeparator);return Mr(a,this.templateFormat,t)}async partial(e){const t=this.inputVariables.filter(i=>!(i in e)),s={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:s};return new cl(n)}}const hT=Object.freeze(Object.defineProperty({__proto__:null,FewShotChatMessagePromptTemplate:cl,FewShotPromptTemplate:_n},Symbol.toStringTag,{value:"Module"}));class pT{promptTemplate;fewShotPromptTemplate;constructor(e,t,s){if(this.promptTemplate=cr.fromTemplate(e,t),s){const n=cr.fromTemplate(s.prompt,t);this.fewShotPromptTemplate=new _n({examplePrompt:n,examples:s.examples,inputVariables:[...Object.keys(t)]})}}async getPrompt(e){const t=await this.promptTemplate.format(e);return this.fewShotPromptTemplate?`${await this.fewShotPromptTemplate.format(e)}
${t}`:t}}class fT{openAi;promptService;inputs={framework:"framework",css:"css",code:"code"};prompt=`Given HTML code, the framework it's used in, and CSS style changes, update the HTML code to implement the style changes using TailwindCSS. Use tailwindCSS arbitrary values when no Tailwind equivalent like in example. Aim to make minimal changes to the original code structure, leave the quote type, tag name and tag structure as is. Only make style changes. Generalize from the examples given.
Input:
CSS: {css}
Code: {code}
Framework: {framework}

Output Code:`;examplePrompt=`Example Input:
CSS: {css}
Code: {code}
Framework: {framework}

Example Output Code: {output}

`;examples=[{css:"font-size: 20px;",code:'<h1 class="bg-red">',framework:"vue",output:'<h1 class="bg-red text-2xl">'},{css:"margin: 20px; border: 1px solid black;",code:"<Card className='mt-8'>",framework:"tsx",output:"<Card className='mt-8 m-5 border border-black'/>"},{css:"background-color: blue; padding: 10px;",code:'<div class="h-4">',framework:"svelte",output:'<div class="h-4 bg-blue-500 p-2">'},{css:"font-size: 17px;",code:'<span class="text-gray-600">',framework:"html",output:'<span class="text-gray-600 text-[17px]">'},{css:"width: 67%;",code:'<div className="mt-4">',framework:"jsx",output:'<div className="mt-4 w-[67%]">'}];constructor(){this.openAi=this.getModel(),this.promptService=this.getPromptService()}getModel(){return new sT({openAIApiKey:Fh.apiKey,modelName:"gpt-4-turbo-preview",temperature:0}).bind({tools:[Sa],tool_choice:Sa}).pipe(new ho({keyName:Sa.function.name,returnSingle:!0}))}getPromptService(){return new pT(this.prompt,this.inputs,{prompt:this.examplePrompt,examples:this.examples})}async getTranslation(e){const t=await this.promptService.getPrompt(e);return(await this.openAi.invoke(t)).code}}function mT(r,e){return Object.values(r).map(s=>s.path?{activity:s,pathInfo:gT(s.path,e)}:null).filter(s=>s!==null)}function gT(r,e){const[t,s,n,i]=r.split(":");return{path:e==="."||e===""||e==="/"?`${t}`:`${e}/${t}`,startLine:parseInt(s),startTagEndLine:parseInt(n),endLine:parseInt(i)}}function bT(r,e,t){const s=yT(r,e),n=wT(t.styleChanges);return{framework:vT(e.path),css:n,code:s}}function _T(r,e,t){let s=r.split(`
`);if(!s)return r;let n=e.split(`
`),i="",a=[];for(let o=0;o<t.startTagEndLine-t.startLine+1;o++){const l=t.startLine-1+o;let c;if(o<n.length){const u=s[l].match(/^\s*/);c=u?u[0]:"",a.push(c+n[o].trim())}c!==void 0&&(i=c)}if(n.length>t.startTagEndLine-t.startLine+1)for(let o=t.startTagEndLine-t.startLine+1;o<n.length;o++)a.push(i+n[o].trim());return s.splice(t.startLine-1,t.startTagEndLine-t.startLine+1,...a),s.join(`
`)}const yT=(r,e)=>r.split(`
`).slice(e.startLine-1,e.startTagEndLine).join(`
`),wT=r=>Object.values(r).map(e=>`${e.key}:${e.newVal}`).join(";"),vT=r=>r.split(".").pop()??"html";class ET{constructor(e,t){if(this.project=e,this.user=t,!this.project.installationId)throw"Publish failed: Project has no installation ID";if(!this.project.githubSettings)throw"Publish failed: No github settings found for this project";this.processedActivities=mT(this.project.activities,this.project.githubSettings.rootPath),this.githubSettings=this.project.githubSettings,this.githubService=new T_(this.project.installationId,this.githubSettings.owner,this.githubSettings.repositoryName,this.githubSettings.baseBranch),this.translationService=new fT}githubService;githubSettings;translationService;filesMap=new Map;processedActivities;async publish(e,t){try{for(const s of this.processedActivities){const n=await this.getFileFromActivity(s),i=await this.updateFileWithActivity(s,n);this.filesMap.set(s.pathInfo.path,i)}}catch(s){throw`Publish failed while processing activities. ${s}`}try{return await this.publishFiles(e,t)}catch(s){throw`Publish failed while publishing files. ${s}`}}async publishFiles(e,t){const s=`onlook-${this.project.id}`;return await this.githubService.createOrGetBranch(s),await this.githubService.createCommitFromFiles(s,this.user.name,this.user.email,e,Array.from(this.filesMap.values())),await this.githubService.createOrGetPullRequest(e,t,s)}async updateFileWithActivity(e,t){const s=bT(t.content,e.pathInfo,e.activity),n=await this.translationService.getTranslation({code:s.code,css:s.css,framework:s.framework}),i=_T(t.content,n,e.pathInfo);return t.content=i,t}async getFileFromActivity(e){let t=this.filesMap.get(e.pathInfo.path);if(t)return t;if(t=await this.githubService.fetchFileFromPath(e.pathInfo.path),!t)throw new Error(`File content not found for path: ${e.pathInfo.path}`);return this.filesMap.set(e.pathInfo.path,t),t}}function TT(r){let e,t="Nothing to publish",s,n,i="Use the extension to make some edits!";return{c(){e=O("p"),e.textContent=t,s=U(),n=O("p"),n.textContent=i,this.h()},l(a){e=S(a,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-r8u2u8"&&(e.textContent=t),s=G(a),n=S(a,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(n)!=="svelte-5ig6m"&&(n.textContent=i),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:216:216:216"),p(e,"class","text-center text-lg"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:217:217:217"),p(n,"class","text-center text-lg")},m(a,o){K(a,e,o),K(a,s,o),K(a,n,o)},p:he,i:he,o:he,d(a){a&&(v(e),v(s),v(n))}}}function kT(r){let e,t="Edited website not configured with Onlook",s,n,i="Instructions for configuring website with Onlook below",a,o,l;return o=new id({}),{c(){e=O("p"),e.textContent=t,s=U(),n=O("p"),n.textContent=i,a=U(),Ee(o.$$.fragment),this.h()},l(c){e=S(c,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-32fih2"&&(e.textContent=t),s=G(c),n=S(c,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(n)!=="svelte-1966to9"&&(n.textContent=i),a=G(c),Te(o.$$.fragment,c),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:212:212:212"),p(e,"class","text-center text-lg"),p(n,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:213:213:213"),p(n,"class","text-center text-lg")},m(c,u){K(c,e,u),K(c,s,u),K(c,n,u),K(c,a,u),ke(o,c,u),l=!0},p:he,i(c){l||(ee(o.$$.fragment,c),l=!0)},o(c){ae(o.$$.fragment,c),l=!1},d(c){c&&(v(e),v(s),v(n),v(a)),Ae(o,c)}}}function AT(r){let e,t="No github config found";return{c(){e=O("p"),e.textContent=t,this.h()},l(s){e=S(s,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1v2s4ab"&&(e.textContent=t),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:210:210:210"),p(e,"class","text-center text-lg")},m(s,n){K(s,e,n)},p:he,i:he,o:he,d(s){s&&v(e)}}}function OT(r){let e,t,s='<span data-onlook-id="src/routes/dashboard/projects/[id]/github/PublishTab.svelte:162:162:162" class="label-text">Title</span>',n,i,a,o,l,c='<span data-onlook-id="src/routes/dashboard/projects/[id]/github/PublishTab.svelte:173:173:173" class="label-text">Description</span>',u,d,h,f,m,b,_,A,w,T,E,k;const x=[PT,ST],C=[];function H(R,F){return R[1]?0:1}return b=H(r),_=C[b]=x[b](r),w=new g_({props:{githubHistories:r[0],restoreActivities:r[9]}}),{c(){e=O("label"),t=O("div"),t.innerHTML=s,n=U(),i=O("input"),o=U(),l=O("div"),l.innerHTML=c,u=U(),d=O("textarea"),f=U(),m=O("div"),_.c(),A=U(),Ee(w.$$.fragment),this.h()},l(R){e=S(R,"LABEL",{"data-onlook-id":!0,class:!0});var F=$(e);t=S(F,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(t)!=="svelte-1hiyqx3"&&(t.innerHTML=s),n=G(F),i=S(F,"INPUT",{"data-onlook-id":!0,type:!0,placeholder:!0,class:!0,maxlength:!0}),o=G(F),l=S(F,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(l)!=="svelte-1ny1d9h"&&(l.innerHTML=c),u=G(F),d=S(F,"TEXTAREA",{"data-onlook-id":!0,class:!0,placeholder:!0,maxlength:!0}),$(d).forEach(v),f=G(F),m=S(F,"DIV",{"data-onlook-id":!0,class:!0});var z=$(m);_.l(z),z.forEach(v),F.forEach(v),A=G(R),Te(w.$$.fragment,R),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:161:161:163"),p(t,"class","label"),p(i,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:164:171:171"),i.disabled=a=!r[5]||r[7],p(i,"type","text"),p(i,"placeholder",Ah),p(i,"class","input input-bordered w-full text-sm"),p(i,"maxlength",Pa),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:172:172:174"),p(l,"class","label"),p(d,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:175:181:181"),d.disabled=h=!r[5]||r[7],p(d,"class","textarea textarea-bordered h-24"),p(d,"placeholder",IT),p(d,"maxlength",Gh),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:182:182:205"),p(m,"class","mt-6 flex items-center justify-end"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:160:160:206"),p(e,"class","form-control w-full p-2")},m(R,F){K(R,e,F),y(e,t),y(e,n),y(e,i),vr(i,r[2]),y(e,o),y(e,l),y(e,u),y(e,d),vr(d,r[3]),y(e,f),y(e,m),C[b].m(m,null),K(R,A,F),ke(w,R,F),T=!0,E||(k=[Ue(i,"input",r[14]),Ue(d,"input",r[15])],E=!0)},p(R,F){(!T||F&160&&a!==(a=!R[5]||R[7]))&&(i.disabled=a),F&4&&i.value!==R[2]&&vr(i,R[2]),(!T||F&160&&h!==(h=!R[5]||R[7]))&&(d.disabled=h),F&8&&vr(d,R[3]);let z=b;b=H(R),b===z?C[b].p(R,F):(Pt(),ae(C[z],1,1,()=>{C[z]=null}),xt(),_=C[b],_?_.p(R,F):(_=C[b]=x[b](R),_.c()),ee(_,1),_.m(m,null));const X={};F&1&&(X.githubHistories=R[0]),w.$set(X)},i(R){T||(ee(_),ee(w.$$.fragment,R),T=!0)},o(R){ae(_),ae(w.$$.fragment,R),T=!1},d(R){R&&(v(e),v(A)),C[b].d(),Ae(w,R),E=!1,Xr(k)}}}function ST(r){let e,t,s,n,i,a,o,l;const c=[CT,xT],u=[];function d(h,f){return h[7]?0:1}return s=d(r),n=u[s]=c[s](r),{c(){e=U(),t=O("button"),n.c(),this.h()},l(h){e=G(h),t=S(h,"BUTTON",{"data-onlook-id":!0,class:!0});var f=$(t);n.l(f),f.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:192:196:203"),p(t,"class","btn btn-primary"),t.disabled=i=!r[5]||r[7]||tu},m(h,f){K(h,e,f),K(h,t,f),u[s].m(t,null),a=!0,o||(l=Ue(t,"click",r[8]),o=!0)},p(h,f){let m=s;s=d(h),s!==m&&(Pt(),ae(u[m],1,1,()=>{u[m]=null}),xt(),n=u[s],n||(n=u[s]=c[s](h),n.c()),ee(n,1),n.m(t,null)),(!a||f&160&&i!==(i=!h[5]||h[7]||tu))&&(t.disabled=i)},i(h){a||(ee(n),a=!0)},o(h){ae(n),a=!1},d(h){h&&(v(e),v(t)),u[s].d(),o=!1,l()}}}function PT(r){let e,t;return{c(){e=O("p"),t=Le(r[1]),this.h()},l(s){e=S(s,"P",{"data-onlook-id":!0,class:!0});var n=$(e);t=De(n,r[1]),n.forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:184:184:184"),p(e,"class","text-xs text-error")},m(s,n){K(s,e,n),y(e,t)},p(s,n){n&2&&mt(t,s[1])},i:he,o:he,d(s){s&&v(e)}}}function xT(r){let e,t,s;return e=new yn({props:{class:"w-5 h-5"}}),{c(){Ee(e.$$.fragment),t=Le(" Publish")},l(n){Te(e.$$.fragment,n),t=De(n," Publish")},m(n,i){ke(e,n,i),K(n,t,i),s=!0},i(n){s||(ee(e.$$.fragment,n),s=!0)},o(n){ae(e.$$.fragment,n),s=!1},d(n){n&&v(t),Ae(e,n)}}}function CT(r){let e,t;return{c(){e=O("div"),t=Le(`
							Publishing`),this.h()},l(s){e=S(s,"DIV",{"data-onlook-id":!0,class:!0}),$(e).forEach(v),t=De(s,`
							Publishing`),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:198:198:198"),p(e,"class","loading")},m(s,n){K(s,e,n),K(s,t,n)},i:he,o:he,d(s){s&&(v(e),v(t))}}}function RT(r){let e,t,s,n;const i=[OT,AT,kT,TT],a=[];function o(l,c){return l[4]&&l[5]&&l[6]?0:l[4]?l[5]&&!l[6]?2:3:1}return t=o(r),s=a[t]=i[t](r),{c(){e=O("div"),s.c(),this.h()},l(l){e=S(l,"DIV",{"data-onlook-id":!0,class:!0});var c=$(e);s.l(c),c.forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishTab.svelte:158:158:219"),p(e,"class","flex flex-col items-center justify-center h-full mt-4")},m(l,c){K(l,e,c),a[t].m(e,null),n=!0},p(l,[c]){let u=t;t=o(l),t===u?a[t].p(l,c):(Pt(),ae(a[u],1,1,()=>{a[u]=null}),xt(),s=a[t],s?s.p(l,c):(s=a[t]=i[t](l),s.c()),ee(s,1),s.m(e,null))},i(l){n||(ee(s),n=!0)},o(l){ae(s),n=!1},d(l){l&&v(e),a[t].d()}}}let Ah="Updated site using Onlook",IT="Describe your changes here",tu=!1;function jT(r,e,t){let{project:s}=e,{user:n}=e;const i=new Sr(Ar.PROJECTS),a=new Sr(Ar.GITHUB_HISTORY);let o=[],l="",c="",u="",d="",h=!1,f=!1,m=!1,b=!1,_=!1;Ir(()=>{Object.keys(s.activities).length>0&&t(5,f=!0),Object.values(s.activities).forEach(C=>{if(C.path){t(6,m=!0);return}}),s?.githubHistoryIds?.length>0&&Promise.all(s.githubHistoryIds.map(C=>a.get(C))).then(C=>{t(0,o=C.filter(H=>H!==null))}).catch(C=>{console.error("Error loading github history:",C)})});async function A(){t(2,u=u||Ah),t(3,d+=`

[View in onlook.dev](${Uh}${Or.PROJECTS}/${s.id})`),t(7,b=!0);try{let H=await new ET(s,n).publish(u,d);if(!H)throw new Error("No pull request url returned from GitHub");w(H)}catch(C){console.error("Error publishing changes:",C),t(12,l=`Error publishing changes: ${JSON.stringify(C)}`),t(13,_=!0)}finally{t(7,b=!1)}}function w(C){const H={id:qh(),title:u,description:d,userId:n.id,projectId:s.id,createdAt:new Date().toISOString(),pullRequestUrl:C,activityHistory:s.activities};t(2,u=""),t(3,d=""),s.githubHistoryIds||t(10,s.githubHistoryIds=[],s),s.githubHistoryIds.push(H.id),t(0,o=[...o,H]),xa.push("Changes published to GitHub! 🎉",{theme:{"--toastColor":"mintcream","--toastBackground":"rgba(72,187,120,0.9)","--toastBarBackground":"#2F855A"}}),a.post(H),i.post(s),Hr.update(R=>(R.set(s.id,s),R))}function T(C){!C.activityHistory||Object.keys(C.activityHistory).length===0||(t(10,s.activities=C.activityHistory,s),i.post(s),Hr.update(H=>(H.set(s.id,s),H)),t(5,f=!0))}function E(C){t(1,c=C),setTimeout(()=>{t(1,c="")},1e4)}function k(){u=this.value,t(2,u)}function x(){d=this.value,t(3,d)}return r.$$set=C=>{"project"in C&&t(10,s=C.project),"user"in C&&t(11,n=C.user)},r.$$.update=()=>{r.$$.dirty&1024&&s?.installationId&&t(4,h=!0),r.$$.dirty&12288&&_&&E(l)},[o,c,u,d,h,f,m,b,A,T,s,n,l,_,k,x]}class NT extends Ze{constructor(e){super(),Ke(this,e,jT,RT,We,{project:10,user:11})}}function $T(r){let e,t,s,n,i,a,o;return s=new yn({props:{class:"h-5 w-5"}}),{c(){e=O("div"),t=O("button"),Ee(s.$$.fragment),n=Le("Connect project to Github"),this.h()},l(l){e=S(l,"DIV",{"data-onlook-id":!0,class:!0});var c=$(e);t=S(c,"BUTTON",{"data-onlook-id":!0,class:!0});var u=$(t);Te(s.$$.fragment,u),n=De(u,"Connect project to Github"),u.forEach(v),c.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:109:114:115"),p(t,"class","btn btn-primary"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:108:108:116"),p(e,"class","flex flex-col items-center justify-center h-full mt-4")},m(l,c){K(l,e,c),y(e,t),ke(s,t,null),y(t,n),i=!0,a||(o=Ue(t,"click",r[8]),a=!0)},p:he,i(l){i||(ee(s.$$.fragment,l),i=!0)},o(l){ae(s.$$.fragment,l),i=!1},d(l){l&&v(e),Ae(s),a=!1,o()}}}function LT(r){let e,t,s,n,i,a,o,l,c,u,d,h,f,m,b,_,A="How to setup your repository",w,T,E,k,x,C,H;return a=new NT({props:{project:r[0],user:r[1]}}),d=new e_({props:{project:r[0]}}),E=new id({}),x=Nh(r[6][0]),{c(){e=O("div"),t=O("input"),n=U(),i=O("div"),Ee(a.$$.fragment),o=U(),l=O("input"),c=U(),u=O("div"),Ee(d.$$.fragment),h=U(),f=O("div"),m=O("input"),b=U(),_=O("div"),_.textContent=A,w=U(),T=O("div"),Ee(E.$$.fragment),this.h()},l(R){e=S(R,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var F=$(e);t=S(F,"INPUT",{"data-onlook-id":!0,type:!0,name:!0,role:!0,class:!0,"aria-label":!0}),n=G(F),i=S(F,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var z=$(i);Te(a.$$.fragment,z),z.forEach(v),o=G(F),l=S(F,"INPUT",{"data-onlook-id":!0,type:!0,name:!0,role:!0,class:!0,"aria-label":!0}),c=G(F),u=S(F,"DIV",{"data-onlook-id":!0,role:!0,class:!0});var X=$(u);Te(d.$$.fragment,X),h=G(X),f=S(X,"DIV",{"data-onlook-id":!0,class:!0});var te=$(f);m=S(te,"INPUT",{"data-onlook-id":!0,type:!0}),b=G(te),_=S(te,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(_)!=="svelte-vr0x1u"&&(_.textContent=A),w=G(te),T=S(te,"DIV",{"data-onlook-id":!0,class:!0});var oe=$(T);Te(E.$$.fragment,oe),oe.forEach(v),te.forEach(v),X.forEach(v),F.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:73:82:82"),p(t,"type","radio"),p(t,"name","my_tabs_1"),p(t,"role","tab"),p(t,"class","tab"),t.__value=r[4].PUBLISH,vr(t,t.__value),p(t,"aria-label",r[4].PUBLISH),t.disabled=s=!r[0]?.githubSettings,p(i,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:83:83:85"),p(i,"role","tabpanel"),p(i,"class","tab-content py-4 overflow-auto"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:87:95:95"),p(l,"type","radio"),p(l,"name","my_tabs_1"),p(l,"role","tab"),p(l,"class","tab"),l.__value=r[4].CONFIGURE,vr(l,l.__value),p(l,"aria-label",r[4].CONFIGURE),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:99:99:99"),p(m,"type","checkbox"),p(_,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:100:100:100"),p(_,"class","collapse-title"),p(T,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:101:101:103"),p(T,"class","collapse-content"),p(f,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:98:98:104"),p(f,"class","collapse collapse-arrow border rounded-md mt-6"),p(u,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:96:96:105"),p(u,"role","tabpanel"),p(u,"class","tab-content py-4"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:72:72:106"),p(e,"role","tablist"),p(e,"class","tabs tabs-bordered"),x.p(t,l)},m(R,F){K(R,e,F),y(e,t),t.checked=t.__value===r[2],y(e,n),y(e,i),ke(a,i,null),y(e,o),y(e,l),l.checked=l.__value===r[2],y(e,c),y(e,u),ke(d,u,null),y(u,h),y(u,f),y(f,m),y(f,b),y(f,_),y(f,w),y(f,T),ke(E,T,null),k=!0,C||(H=[Ue(t,"change",r[5]),Ue(l,"change",r[7])],C=!0)},p(R,F){(!k||F&1&&s!==(s=!R[0]?.githubSettings))&&(t.disabled=s),F&4&&(t.checked=t.__value===R[2]);const z={};F&1&&(z.project=R[0]),F&2&&(z.user=R[1]),a.$set(z),F&4&&(l.checked=l.__value===R[2]);const X={};F&1&&(X.project=R[0]),d.$set(X)},i(R){k||(ee(a.$$.fragment,R),ee(d.$$.fragment,R),ee(E.$$.fragment,R),k=!0)},o(R){ae(a.$$.fragment,R),ae(d.$$.fragment,R),ae(E.$$.fragment,R),k=!1},d(R){R&&v(e),Ae(a),Ae(d),Ae(E),x.r(),C=!1,Xr(H)}}}function DT(r){let e,t,s,n,i,a,o,l,c="Send to Github",u,d,h,f,m,b='<button data-onlook-id="src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:120:120:120">close</button>',_,A,w;s=new yn({props:{class:"mr-2"}});const T=[LT,$T],E=[];function k(x,C){return x[0]?.installationId?0:1}return d=k(r),h=E[d]=T[d](r),{c(){e=O("div"),t=O("button"),Ee(s.$$.fragment),n=Le(" Pull Request"),i=U(),a=O("dialog"),o=O("div"),l=O("h2"),l.textContent=c,u=U(),h.c(),f=U(),m=O("form"),m.innerHTML=b,this.h()},l(x){e=S(x,"DIV",{"data-onlook-id":!0});var C=$(e);t=S(C,"BUTTON",{"data-onlook-id":!0,class:!0});var H=$(t);Te(s.$$.fragment,H),n=De(H," Pull Request"),H.forEach(v),i=G(C),a=S(C,"DIALOG",{"data-onlook-id":!0,id:!0,class:!0});var R=$(a);o=S(R,"DIV",{"data-onlook-id":!0,class:!0});var F=$(o);l=S(F,"H2",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(l)!=="svelte-n9zj79"&&(l.textContent=c),u=G(F),h.l(F),F.forEach(v),f=G(R),m=S(R,"FORM",{"data-onlook-id":!0,method:!0,class:!0,"data-svelte-h":!0}),de(m)!=="svelte-1r1baty"&&(m.innerHTML=b),R.forEach(v),C.forEach(v),this.h()},h(){p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:64:64:66"),p(t,"class","flex flex-row justify-center"),p(l,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:69:69:69"),p(l,"class","text-xl font-semibold mb-3"),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:68:68:118"),p(o,"class","modal-box card w-full h-[80%] flex flex-col p-6"),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:119:119:121"),p(m,"method","dialog"),p(m,"class","modal-backdrop"),p(a,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:67:67:122"),p(a,"id",ul),p(a,"class","modal"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/github/PublishToGithubModal.svelte:63:63:123")},m(x,C){K(x,e,C),y(e,t),ke(s,t,null),y(t,n),y(e,i),y(e,a),y(a,o),y(o,l),y(o,u),E[d].m(o,null),y(a,f),y(a,m),_=!0,A||(w=Ue(t,"click",MT),A=!0)},p(x,[C]){let H=d;d=k(x),d===H?E[d].p(x,C):(Pt(),ae(E[H],1,1,()=>{E[H]=null}),xt(),h=E[d],h?h.p(x,C):(h=E[d]=T[d](x),h.c()),ee(h,1),h.m(o,null))},i(x){_||(ee(s.$$.fragment,x),ee(h),_=!0)},o(x){ae(s.$$.fragment,x),ae(h),_=!1},d(x){x&&v(e),Ae(s),E[d].d(),A=!1,w()}}}const ul="publish-modal";function MT(){const r=document.getElementById(ul);r&&(r.showModal(),r.addEventListener("click",e=>{e.target===r&&FT()},{once:!0}))}function FT(){const r=document.getElementById(ul);r&&r.close()}function UT(r,e,t){let s,n;er(r,mo,f=>t(9,s=f)),er(r,Hr,f=>t(3,n=f));let{project:i}=e,{user:a}=e;var o=(f=>(f.PUBLISH="Publish",f.CONFIGURE="Configure",f))(o||{});let l="Publish";Ir(async()=>{s.params.id||Ks(Or.DASHBOARD),i.githubSettings||t(2,l="Configure")});const c=[[]];function u(){l=this.__value,t(2,l)}function d(){l=this.__value,t(2,l)}const h=()=>{console.log("projectMapStore",n.get(i?.id)),window.location.href=`${Hn.appUrl}/installations/new?state=${i?.id}`};return r.$$set=f=>{"project"in f&&t(0,i=f.project),"user"in f&&t(1,a=f.user)},[i,a,l,n,o,u,c,d,h]}class GT extends Ze{constructor(e){super(),Ke(this,e,UT,DT,We,{project:0,user:1})}}function BT(r){let e,t='<p data-onlook-id="src/routes/dashboard/projects/[id]/+page.svelte:178:178:178" class="text-gray-500">Loading...</p>';return{c(){e=O("div"),e.innerHTML=t,this.h()},l(s){e=S(s,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(e)!=="svelte-1wuybyo"&&(e.innerHTML=t),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:176:176:179"),p(e,"class","flex flex-col items-center justify-center h-full")},m(s,n){K(s,e,n)},p:he,i:he,o:he,d(s){s&&v(e)}}}function zT(r){let e,t,s,n,i,a,o,l="/",c,u,d=gl(r[0]?.name||"Dashboard",Pa)+"",h,f,m,b,_,A,w,T,E,k="Share and Publish",x,C,H,R,F,z,X,te,oe,re="Coming soon",Oe,j,M,V,Q,ce,ve,ye,Je,Se,ze,Me,He,Xe,Pe,xe,rt,ot,Ot,bt,Ne,lt,Et,ie,Rt,Fe;_=new Uf({}),R=new GT({props:{project:r[0],user:r[2]}}),X=new Rf({props:{teamId:r[0].teamId}}),V=new zf({}),Je=new Df({}),Xe=new Nf({});function _e(L,J){return L[3]&&L[3].previewImage?VT:L[0].hostData?.previewImage?qT:HT}let _t=_e(r),Qe=_t(r);function nr(L){r[5](L)}let ct={project:r[0]};return r[1]!==void 0&&(ct.activeActivityId=r[1]),lt=new vf({props:ct}),Lh.push(()=>Mh(lt,"activeActivityId",nr)),{c(){e=O("div"),t=O("div"),s=O("a"),n=Le("Onlook"),a=U(),o=O("p"),o.textContent=l,c=U(),u=O("p"),h=Le(d),f=U(),m=O("div"),b=O("button"),Ee(_.$$.fragment),A=Le(" Edit project"),w=U(),T=O("div"),E=O("button"),E.textContent=k,x=U(),C=O("ul"),H=O("li"),Ee(R.$$.fragment),F=U(),z=O("li"),Ee(X.$$.fragment),te=U(),oe=O("div"),oe.textContent=re,Oe=U(),j=O("li"),M=O("button"),Ee(V.$$.fragment),Q=Le(" Open Linear ticket"),ce=U(),ve=O("li"),ye=O("button"),Ee(Je.$$.fragment),Se=Le(" Open Jira ticket"),ze=U(),Me=O("li"),He=O("button"),Ee(Xe.$$.fragment),Pe=Le(" Create Slack thread"),xe=U(),rt=O("div"),ot=O("div"),Qe.c(),Ot=U(),bt=O("div"),Ne=O("div"),Ee(lt.$$.fragment),this.h()},l(L){e=S(L,"DIV",{"data-onlook-id":!0,class:!0});var J=$(e);t=S(J,"DIV",{"data-onlook-id":!0,class:!0});var ue=$(t);s=S(ue,"A",{"data-onlook-id":!0,class:!0,href:!0});var B=$(s);n=De(B,"Onlook"),B.forEach(v),a=G(ue),o=S(ue,"P",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(o)!=="svelte-1xx9pya"&&(o.textContent=l),c=G(ue),u=S(ue,"P",{"data-onlook-id":!0,class:!0});var P=$(u);h=De(P,d),P.forEach(v),ue.forEach(v),f=G(J),m=S(J,"DIV",{"data-onlook-id":!0,class:!0});var g=$(m);b=S(g,"BUTTON",{"data-onlook-id":!0,class:!0});var I=$(b);Te(_.$$.fragment,I),A=De(I," Edit project"),I.forEach(v),w=G(g),T=S(g,"DIV",{"data-onlook-id":!0,class:!0});var N=$(T);E=S(N,"BUTTON",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(E)!=="svelte-x5539p"&&(E.textContent=k),x=G(N),C=S(N,"UL",{"data-onlook-id":!0,class:!0});var D=$(C);H=S(D,"LI",{"data-onlook-id":!0,tabindex:!0});var W=$(H);Te(R.$$.fragment,W),W.forEach(v),F=G(D),z=S(D,"LI",{"data-onlook-id":!0});var ne=$(z);Te(X.$$.fragment,ne),ne.forEach(v),te=G(D),oe=S(D,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),de(oe)!=="svelte-16wqkfd"&&(oe.textContent=re),Oe=G(D),j=S(D,"LI",{"data-onlook-id":!0,class:!0});var Ce=$(j);M=S(Ce,"BUTTON",{"data-onlook-id":!0});var tt=$(M);Te(V.$$.fragment,tt),Q=De(tt," Open Linear ticket"),tt.forEach(v),Ce.forEach(v),ce=G(D),ve=S(D,"LI",{"data-onlook-id":!0,class:!0});var nt=$(ve);ye=S(nt,"BUTTON",{"data-onlook-id":!0});var ir=$(ye);Te(Je.$$.fragment,ir),Se=De(ir," Open Jira ticket"),ir.forEach(v),nt.forEach(v),ze=G(D),Me=S(D,"LI",{"data-onlook-id":!0,class:!0});var On=$(Me);He=S(On,"BUTTON",{"data-onlook-id":!0});var ts=$(He);Te(Xe.$$.fragment,ts),Pe=De(ts," Create Slack thread"),ts.forEach(v),On.forEach(v),D.forEach(v),N.forEach(v),g.forEach(v),J.forEach(v),xe=G(L),rt=S(L,"DIV",{"data-onlook-id":!0,class:!0});var Sn=$(rt);ot=S(Sn,"DIV",{"data-onlook-id":!0,class:!0});var dl=$(ot);Qe.l(dl),dl.forEach(v),Ot=G(Sn),bt=S(Sn,"DIV",{"data-onlook-id":!0,class:!0});var hl=$(bt);Ne=S(hl,"DIV",{"data-onlook-id":!0,class:!0});var pl=$(Ne);Te(lt.$$.fragment,pl),pl.forEach(v),hl.forEach(v),Sn.forEach(v),this.h()},h(){p(s,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:112:115:116"),p(s,"class","btn btn-ghost text-sm"),p(s,"href",i=Or.DASHBOARD+"?"+zn.TEAM+"="+r[0]?.teamId),p(o,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:117:117:117"),p(o,"class","text-sm mr-4"),p(u,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:118:118:120"),p(u,"class","truncate"),p(t,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:111:111:121"),p(t,"class","navbar-start flex flex-row"),p(b,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:124:125:126"),p(b,"class","btn btn-outline color-red-500"),p(E,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:128:128:128"),p(E,"class","btn btn-primary"),p(H,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:130:130:130"),p(H,"tabindex","-1"),p(z,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:131:131:131"),p(oe,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:132:132:132"),p(oe,"class","divider"),p(M,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:134:134:134"),M.disabled=!0,p(j,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:133:133:135"),p(j,"class","opacity-60"),p(ye,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:137:137:137"),ye.disabled=!0,p(ve,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:136:136:138"),p(ve,"class","opacity-60"),p(He,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:140:140:140"),He.disabled=!0,p(Me,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:139:139:141"),p(Me,"class","opacity-60"),p(C,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:129:129:142"),p(C,"class","dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52"),p(T,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:127:127:143"),p(T,"class","dropdown dropdown-end"),p(m,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:123:123:144"),p(m,"class","navbar-end space-x-2"),p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:110:110:145"),p(e,"class","navbar bg-base-100"),p(ot,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:149:149:167"),p(ot,"class","sm:w-full flex flex-grow h-full border items-center justify-center"),p(Ne,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:170:170:172"),p(Ne,"class","border h-full w-full overflow-auto"),p(bt,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:169:169:173"),p(bt,"class","flex flex-col w-full sm:max-w-96 h-full text-sm"),p(rt,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:147:147:174"),p(rt,"class","bg-base-200 flex flex-col sm:flex-row flex-grow overflow-auto")},m(L,J){K(L,e,J),y(e,t),y(t,s),y(s,n),y(t,a),y(t,o),y(t,c),y(t,u),y(u,h),y(e,f),y(e,m),y(m,b),ke(_,b,null),y(b,A),y(m,w),y(m,T),y(T,E),y(T,x),y(T,C),y(C,H),ke(R,H,null),y(C,F),y(C,z),ke(X,z,null),y(C,te),y(C,oe),y(C,Oe),y(C,j),y(j,M),ke(V,M,null),y(M,Q),y(C,ce),y(C,ve),y(ve,ye),ke(Je,ye,null),y(ye,Se),y(C,ze),y(C,Me),y(Me,He),ke(Xe,He,null),y(He,Pe),K(L,xe,J),K(L,rt,J),y(rt,ot),Qe.m(ot,null),y(rt,Ot),y(rt,bt),y(bt,Ne),ke(lt,Ne,null),ie=!0,Rt||(Fe=Ue(b,"click",r[4]),Rt=!0)},p(L,J){(!ie||J&1&&i!==(i=Or.DASHBOARD+"?"+zn.TEAM+"="+L[0]?.teamId))&&p(s,"href",i),(!ie||J&1)&&d!==(d=gl(L[0]?.name||"Dashboard",Pa)+"")&&mt(h,d);const ue={};J&1&&(ue.project=L[0]),J&4&&(ue.user=L[2]),R.$set(ue);const B={};J&1&&(B.teamId=L[0].teamId),X.$set(B),_t===(_t=_e(L))&&Qe?Qe.p(L,J):(Qe.d(1),Qe=_t(L),Qe&&(Qe.c(),Qe.m(ot,null)));const P={};J&1&&(P.project=L[0]),!Et&&J&2&&(Et=!0,P.activeActivityId=L[1],Dh(()=>Et=!1)),lt.$set(P)},i(L){ie||(ee(_.$$.fragment,L),ee(R.$$.fragment,L),ee(X.$$.fragment,L),ee(V.$$.fragment,L),ee(Je.$$.fragment,L),ee(Xe.$$.fragment,L),ee(lt.$$.fragment,L),ie=!0)},o(L){ae(_.$$.fragment,L),ae(R.$$.fragment,L),ae(X.$$.fragment,L),ae(V.$$.fragment,L),ae(Je.$$.fragment,L),ae(Xe.$$.fragment,L),ae(lt.$$.fragment,L),ie=!1},d(L){L&&(v(e),v(xe),v(rt)),Ae(_),Ae(R),Ae(X),Ae(V),Ae(Je),Ae(Xe),Qe.d(),Ae(lt),Rt=!1,Fe()}}}function HT(r){let e;return{c(){e=O("div"),this.h()},l(t){e=S(t,"DIV",{"data-onlook-id":!0,class:!0}),$(e).forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:163:165:165"),p(e,"class","shadow w-[80%] h-auto max-w-[80%] max-h-[80%] aspect-video skeleton mx-auto my-auto")},m(t,s){K(t,e,s)},p:he,d(t){t&&v(e)}}}function qT(r){let e,t;return{c(){e=O("img"),this.h()},l(s){e=S(s,"IMG",{"data-onlook-id":!0,src:!0,alt:!0,class:!0}),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:157:161:161"),kr(e.src,t=r[0].hostData?.previewImage)||p(e,"src",t),p(e,"alt","Screenshot"),p(e,"class","shadow w-[80%] h-auto max-w-[80%] max-h-[80%] object-cover object-top aspect-video skeleton mx-auto my-auto")},m(s,n){K(s,e,n)},p(s,n){n&1&&!kr(e.src,t=s[0].hostData?.previewImage)&&p(e,"src",t)},d(s){s&&v(e)}}}function VT(r){let e,t;return{c(){e=O("img"),this.h()},l(s){e=S(s,"IMG",{"data-onlook-id":!0,src:!0,alt:!0,class:!0}),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:151:155:155"),kr(e.src,t=r[3].previewImage)||p(e,"src",t),p(e,"alt","Screenshot"),p(e,"class","shadow max-w-[80%] mx-auto my-auto")},m(s,n){K(s,e,n)},p(s,n){n&8&&!kr(e.src,t=s[3].previewImage)&&p(e,"src",t)},d(s){s&&v(e)}}}function WT(r){let e,t,s,n;const i=[zT,BT],a=[];function o(l,c){return l[0]&&l[2]?0:1}return t=o(r),s=a[t]=i[t](r),{c(){e=O("div"),s.c(),this.h()},l(l){e=S(l,"DIV",{"data-onlook-id":!0,class:!0});var c=$(e);s.l(c),c.forEach(v),this.h()},h(){p(e,"data-onlook-id","src/routes/dashboard/projects/[id]/+page.svelte:107:107:181"),p(e,"class","flex h-screen w-screen flex-col")},m(l,c){K(l,e,c),a[t].m(e,null),n=!0},p(l,[c]){let u=t;t=o(l),t===u?a[t].p(l,c):(Pt(),ae(a[u],1,1,()=>{a[u]=null}),xt(),s=a[t],s?s.p(l,c):(s=a[t]=i[t](l),s.c()),ee(s,1),s.m(e,null))},i(l){n||(ee(s),n=!0)},o(l){ae(s),n=!1},d(l){l&&v(e),a[t].d()}}}function ZT(r,e,t){let s,n,i;er(r,Js,b=>t(6,s=b)),er(r,Hr,b=>t(7,n=b)),er(r,mo,b=>t(8,i=b));let a;const o=new Sr(Ar.PROJECTS),l=new Sr(Ar.USERS);let c,u=[],d="",h;Ir(async()=>{Bh.onAuthStateChanged(_=>{_||Ks(Or.SIGNIN)}),Hh.subscribe(_=>{_&&t(2,c=_)});const b=i.params.id;b||Ks(Or.DASHBOARD),n.has(b)?t(0,a=n.get(b)):o.subscribe(b,async _=>{n.set(b,_),Hr.set(n),t(0,a=_);const A=Object.values(a.activities).map(w=>w.userId).concat(a.comments.map(w=>w.userId));for(const w of A)if(!s.has(w)){const T=await l.get(w);T&&Js.update(E=>E.set(w,T))}}).then(_=>{u.push(_)})}),$h(()=>{u.forEach(b=>b())});function f(){console.log("requestEditProject"),window.postMessage({type:zh.EDIT_PROJECT,project:a},window.location.origin)}function m(b){d=b,t(1,d)}return r.$$.update=()=>{r.$$.dirty&3&&a&&t(3,h=Object.values(a.activities).find(b=>b.id===d))},[a,d,c,h,f,m]}class r1 extends Ze{constructor(e){super(),Ke(this,e,ZT,WT,We,{})}}export{r1 as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}