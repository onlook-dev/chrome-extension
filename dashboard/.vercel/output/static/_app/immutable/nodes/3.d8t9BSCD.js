import{s as I,f as p,g as f,h as b,d as u,j as l,i as k,z as v,r as m,C as E,o as M,D as x,M as j,l as _,m as y,n as D}from"../chunks/scheduler.2JpnNXgI.js";import{S as H,i as P}from"../chunks/index.miTbgV9r.js";import{p as T}from"../chunks/stores.VD4PnWUq.js";import{F,b as L}from"../chunks/constants.Wy146ReZ.js";import{F as V}from"../chunks/index.YXUxRMt-.js";function q(d){let e,a='Github authenticated!<br data-onlook-id="src/routes/callback/github/+page.svelte:67:67:67"/>';return{c(){e=p("h1"),e.innerHTML=a,this.h()},l(t){e=f(t,"H1",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),j(e)!=="svelte-16je2qu"&&(e.innerHTML=a),this.h()},h(){l(e,"data-onlook-id","src/routes/callback/github/+page.svelte:67:67:67"),l(e,"class","card-title")},m(t,s){k(t,e,s)},p:m,d(t){t&&u(e)}}}function G(d){let e,a,t;return{c(){e=p("h1"),a=_("Error: "),t=_(d[0]),this.h()},l(s){e=f(s,"H1",{"data-onlook-id":!0,class:!0});var o=b(e);a=y(o,"Error: "),t=y(o,d[0]),o.forEach(u),this.h()},h(){l(e,"data-onlook-id","src/routes/callback/github/+page.svelte:65:65:65"),l(e,"class","card-title")},m(s,o){k(s,e,o),v(e,a),v(e,t)},p(s,o){o&1&&D(t,s[0])},d(s){s&&u(e)}}}function U(d){let e,a='<span data-onlook-id="src/routes/callback/github/+page.svelte:61:61:61" class="loading loading-spinner loading-lg"></span> <h1 data-onlook-id="src/routes/callback/github/+page.svelte:62:62:62" class="card-title">Authenticating with Github</h1>';return{c(){e=p("div"),e.innerHTML=a,this.h()},l(t){e=f(t,"DIV",{"data-onlook-id":!0,class:!0,"data-svelte-h":!0}),j(e)!=="svelte-uun7k4"&&(e.innerHTML=a),this.h()},h(){l(e,"data-onlook-id","src/routes/callback/github/+page.svelte:60:60:63"),l(e,"class","flex flex-row gap-4")},m(t,s){k(t,e,s)},p:m,d(t){t&&u(e)}}}function z(d){let e,a,t;function s(r,n){return r[1]===r[2].loading?U:r[1]===r[2].error?G:q}let o=s(d),i=o(d);return{c(){e=p("div"),a=p("div"),t=p("div"),i.c(),this.h()},l(r){e=f(r,"DIV",{"data-onlook-id":!0,class:!0});var n=b(e);a=f(n,"DIV",{"data-onlook-id":!0,class:!0});var g=b(a);t=f(g,"DIV",{"data-onlook-id":!0,class:!0});var h=b(t);i.l(h),h.forEach(u),g.forEach(u),n.forEach(u),this.h()},h(){l(t,"data-onlook-id","src/routes/callback/github/+page.svelte:58:58:69"),l(t,"class","card-body space-y-4"),l(a,"data-onlook-id","src/routes/callback/github/+page.svelte:57:57:70"),l(a,"class","card border w-96 bg-base-100 shadow-xl"),l(e,"data-onlook-id","src/routes/callback/github/+page.svelte:54:56:71"),l(e,"class","flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-sky-200 via-indigo-200 to-pink-200")},m(r,n){k(r,e,n),v(e,a),v(a,t),i.m(t,null)},p(r,[n]){o===(o=s(r))&&i?i.p(r,n):(i.d(1),i=o(r),i&&(i.c(),i.m(t,null)))},i:m,o:m,d(r){r&&u(e),i.d()}}}function A(d,e,a){let t;E(d,T,c=>a(4,t=c));const s=new V(F.PROJECTS);let o=t.url.searchParams.get("installation_id"),i=t.url.searchParams.get("state"),r="Saving project state failed",n;var g=(c=>(c[c.loading=0]="loading",c[c.success=1]="success",c[c.error=2]="error",c))(g||{});let h=0;M(async()=>{if(!o){a(1,h=2),a(0,r="Invalid installation id");return}if(!i){a(1,h=2),a(0,r="Invalid project id");return}n=await s.get(i),n.installationId=o,await s.post(n),w()}),x(()=>{});function w(){const c=`${L}/dashboard/projects/${i}`;window.location.href=c}return[r,h,g]}class B extends H{constructor(e){super(),P(this,e,A,z,I,{})}}export{B as component};
