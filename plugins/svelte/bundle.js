import t from"path";import e from"fs";import{parse as n,walk as r}from"svelte/compiler";import{execSync as i}from"child_process";const o=",".charCodeAt(0),s=";".charCodeAt(0),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(64),l=new Uint8Array(128);for(let t=0;t<64;t++){const e=h.charCodeAt(t);a[t]=e,l[e]=t}const u="undefined"!=typeof TextDecoder?new TextDecoder:"undefined"!=typeof Buffer?{decode:t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString()}:{decode(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}};function d(t,e,n,r,i){const o=r[i];let s=o-n[i];n[i]=o,s=s<0?-s<<1|1:s<<1;do{let n=31&s;s>>>=5,s>0&&(n|=32),t[e++]=a[n]}while(s>0);return e}class c{constructor(t){this.bits=t instanceof c?t.bits.slice():[]}add(t){this.bits[t>>5]|=1<<(31&t)}has(t){return!!(this.bits[t>>5]&1<<(31&t))}}class f{constructor(t,e,n){this.start=t,this.end=e,this.original=n,this.intro="",this.outro="",this.content=n,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(t){this.outro+=t}appendRight(t){this.intro=this.intro+t}clone(){const t=new f(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(t){return this.start<t&&t<this.end}eachNext(t){let e=this;for(;e;)t(e),e=e.next}eachPrevious(t){let e=this;for(;e;)t(e),e=e.previous}edit(t,e,n){return this.content=t,n||(this.intro="",this.outro=""),this.storeName=e,this.edited=!0,this}prependLeft(t){this.outro=t+this.outro}prependRight(t){this.intro=t+this.intro}split(t){const e=t-this.start,n=this.original.slice(0,e),r=this.original.slice(e);this.original=n;const i=new f(t,this.end,r);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(t){if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;const e=this.content.replace(t,"");return e.length?(e!==this.content&&(this.split(this.start+e.length).edit("",void 0,!0),this.edited&&this.edit(e,this.storeName,!0)),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(t,""),!!this.intro.length||void 0)}trimStart(t){if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;const e=this.content.replace(t,"");if(e.length){if(e!==this.content){const t=this.split(this.end-e.length);this.edited&&t.edit(e,this.storeName,!0),this.edit("",void 0,!0)}return!0}return this.edit("",void 0,!0),this.outro=this.outro.replace(t,""),!!this.outro.length||void 0}}function g(){return"undefined"!=typeof window&&"function"==typeof window.btoa?t=>window.btoa(unescape(encodeURIComponent(t))):"function"==typeof Buffer?t=>Buffer.from(t,"utf-8").toString("base64"):()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")}}const p=g();class w{constructor(t){this.version=3,this.file=t.file,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.names=t.names,this.mappings=function(t){const e=new Int32Array(5),n=16384,r=16348,i=new Uint8Array(n),h=i.subarray(0,r);let a=0,l="";for(let c=0;c<t.length;c++){const f=t[c];if(c>0&&(a===n&&(l+=u.decode(i),a=0),i[a++]=s),0!==f.length){e[0]=0;for(let t=0;t<f.length;t++){const n=f[t];a>r&&(l+=u.decode(h),i.copyWithin(0,r,a),a-=r),t>0&&(i[a++]=o),a=d(i,a,e,n,0),1!==n.length&&(a=d(i,a,e,n,1),a=d(i,a,e,n,2),a=d(i,a,e,n,3),4!==n.length&&(a=d(i,a,e,n,4)))}}}return l+u.decode(i.subarray(0,a))}(t.mappings),void 0!==t.x_google_ignoreList&&(this.x_google_ignoreList=t.x_google_ignoreList)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+p(this.toString())}}function m(t,e){const n=t.split(/[/\\]/),r=e.split(/[/\\]/);for(n.pop();n[0]===r[0];)n.shift(),r.shift();if(n.length){let t=n.length;for(;t--;)n[t]=".."}return n.concat(r).join("/")}const v=Object.prototype.toString;function b(t){const e=t.split("\n"),n=[];for(let t=0,r=0;t<e.length;t++)n.push(r),r+=e[t].length+1;return function(t){let e=0,r=n.length;for(;e<r;){const i=e+r>>1;t<n[i]?r=i:e=i+1}const i=e-1;return{line:i,column:t-n[i]}}}const y=/\w/;class x{constructor(t){this.hires=t,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(t,e,n,r){if(e.length){let i=e.indexOf("\n",0),o=-1;for(;i>=0;){const s=[this.generatedCodeColumn,t,n.line,n.column];r>=0&&s.push(r),this.rawSegments.push(s),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=i,i=e.indexOf("\n",i+1)}const s=[this.generatedCodeColumn,t,n.line,n.column];r>=0&&s.push(r),this.rawSegments.push(s),this.advance(e.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(e));this.pending=null}addUneditedChunk(t,e,n,r,i){let o=e.start,s=!0,h=!1;for(;o<e.end;){if(this.hires||s||i.has(o)){const e=[this.generatedCodeColumn,t,r.line,r.column];"boundary"===this.hires?y.test(n[o])?h||(this.rawSegments.push(e),h=!0):(this.rawSegments.push(e),h=!1):this.rawSegments.push(e)}"\n"===n[o]?(r.line+=1,r.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,s=!0):(r.column+=1,this.generatedCodeColumn+=1,s=!1),o+=1}this.pending=null}advance(t){if(!t)return;const e=t.split("\n");if(e.length>1){for(let t=0;t<e.length-1;t++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=e[e.length-1].length}}const C="\n",S={insertLeft:!1,insertRight:!1,storeName:!1};class E{constructor(t,e={}){const n=new f(0,t.length,t);Object.defineProperties(this,{original:{writable:!0,value:t},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:n},lastChunk:{writable:!0,value:n},lastSearchedChunk:{writable:!0,value:n},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:e.filename},indentExclusionRanges:{writable:!0,value:e.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new c},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:e.ignoreList}}),this.byStart[0]=n,this.byEnd[t.length]=n}addSourcemapLocation(t){this.sourcemapLocations.add(t)}append(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.outro+=t,this}appendLeft(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);const n=this.byEnd[t];return n?n.appendLeft(e):this.intro+=e,this}appendRight(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);const n=this.byStart[t];return n?n.appendRight(e):this.outro+=e,this}clone(){const t=new E(this.original,{filename:this.filename});let e=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=e.clone();for(;e;){t.byStart[n.start]=n,t.byEnd[n.end]=n;const r=e.next,i=r&&r.clone();i&&(n.next=i,i.previous=n,n=i),e=r}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new c(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(t){t=t||{};const e=Object.keys(this.storedNames),n=new x(t.hires),r=b(this.original);return this.intro&&n.advance(this.intro),this.firstChunk.eachNext((t=>{const i=r(t.start);t.intro.length&&n.advance(t.intro),t.edited?n.addEdit(0,t.content,i,t.storeName?e.indexOf(t.original):-1):n.addUneditedChunk(0,t,this.original,i,this.sourcemapLocations),t.outro.length&&n.advance(t.outro)})),{file:t.file?t.file.split(/[/\\]/).pop():void 0,sources:[t.source?m(t.file||"",t.source):t.file||""],sourcesContent:t.includeContent?[this.original]:void 0,names:e,mappings:n.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(t){return new w(this.generateDecodedMap(t))}_ensureindentStr(){void 0===this.indentStr&&(this.indentStr=function(t){const e=t.split("\n"),n=e.filter((t=>/^\t+/.test(t))),r=e.filter((t=>/^ {2,}/.test(t)));if(0===n.length&&0===r.length)return null;if(n.length>=r.length)return"\t";const i=r.reduce(((t,e)=>{const n=/^ +/.exec(e)[0].length;return Math.min(n,t)}),1/0);return new Array(i+1).join(" ")}(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),null===this.indentStr?"\t":this.indentStr}indent(t,e){const n=/^[^\r\n]/gm;var r;if(r=t,"[object Object]"===v.call(r)&&(e=t,t=void 0),void 0===t&&(this._ensureindentStr(),t=this.indentStr||"\t"),""===t)return this;const i={};if((e=e||{}).exclude){("number"==typeof e.exclude[0]?[e.exclude]:e.exclude).forEach((t=>{for(let e=t[0];e<t[1];e+=1)i[e]=!0}))}let o=!1!==e.indentStart;const s=e=>o?`${t}${e}`:(o=!0,e);this.intro=this.intro.replace(n,s);let h=0,a=this.firstChunk;for(;a;){const e=a.end;if(a.edited)i[h]||(a.content=a.content.replace(n,s),a.content.length&&(o="\n"===a.content[a.content.length-1]));else for(h=a.start;h<e;){if(!i[h]){const e=this.original[h];"\n"===e?o=!0:"\r"!==e&&o&&(o=!1,h===a.start||(this._splitChunk(a,h),a=a.next),a.prependRight(t))}h+=1}h=a.end,a=a.next}return this.outro=this.outro.replace(n,s),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(t,e){return S.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),S.insertLeft=!0),this.appendLeft(t,e)}insertRight(t,e){return S.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),S.insertRight=!0),this.prependRight(t,e)}move(t,e,n){if(n>=t&&n<=e)throw new Error("Cannot move a selection inside itself");this._split(t),this._split(e),this._split(n);const r=this.byStart[t],i=this.byEnd[e],o=r.previous,s=i.next,h=this.byStart[n];if(!h&&i===this.lastChunk)return this;const a=h?h.previous:this.lastChunk;return o&&(o.next=s),s&&(s.previous=o),a&&(a.next=r),h&&(h.previous=i),r.previous||(this.firstChunk=i.next),i.next||(this.lastChunk=r.previous,this.lastChunk.next=null),r.previous=a,i.next=h||null,a||(this.firstChunk=r),h||(this.lastChunk=i),this}overwrite(t,e,n,r){return r=r||{},this.update(t,e,n,{...r,overwrite:!r.contentOnly})}update(t,e,n,r){if("string"!=typeof n)throw new TypeError("replacement content must be a string");for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(e>this.original.length)throw new Error("end is out of bounds");if(t===e)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");this._split(t),this._split(e),!0===r&&(S.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),S.storeName=!0),r={storeName:!0});const i=void 0!==r&&r.storeName,o=void 0!==r&&r.overwrite;if(i){const n=this.original.slice(t,e);Object.defineProperty(this.storedNames,n,{writable:!0,value:!0,enumerable:!0})}const s=this.byStart[t],h=this.byEnd[e];if(s){let t=s;for(;t!==h;){if(t.next!==this.byStart[t.end])throw new Error("Cannot overwrite across a split point");t=t.next,t.edit("",!1)}s.edit(n,i,!o)}else{const r=new f(t,e,"").edit(n,i);h.next=r,r.previous=h}return this}prepend(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.intro=t+this.intro,this}prependLeft(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);const n=this.byEnd[t];return n?n.prependLeft(e):this.intro=e+this.intro,this}prependRight(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);const n=this.byStart[t];return n?n.prependRight(e):this.outro=e+this.outro,this}remove(t,e){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(t===e)return this;if(t<0||e>this.original.length)throw new Error("Character is out of bounds");if(t>e)throw new Error("end must be greater than start");this._split(t),this._split(e);let n=this.byStart[t];for(;n;)n.intro="",n.outro="",n.edit(""),n=e>n.end?this.byStart[n.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let t=this.lastChunk;do{if(t.outro.length)return t.outro[t.outro.length-1];if(t.content.length)return t.content[t.content.length-1];if(t.intro.length)return t.intro[t.intro.length-1]}while(t=t.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let t=this.outro.lastIndexOf(C);if(-1!==t)return this.outro.substr(t+1);let e=this.outro,n=this.lastChunk;do{if(n.outro.length>0){if(t=n.outro.lastIndexOf(C),-1!==t)return n.outro.substr(t+1)+e;e=n.outro+e}if(n.content.length>0){if(t=n.content.lastIndexOf(C),-1!==t)return n.content.substr(t+1)+e;e=n.content+e}if(n.intro.length>0){if(t=n.intro.lastIndexOf(C),-1!==t)return n.intro.substr(t+1)+e;e=n.intro+e}}while(n=n.previous);return t=this.intro.lastIndexOf(C),-1!==t?this.intro.substr(t+1)+e:this.intro+e}slice(t=0,e=this.original.length){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;let n="",r=this.firstChunk;for(;r&&(r.start>t||r.end<=t);){if(r.start<e&&r.end>=e)return n;r=r.next}if(r&&r.edited&&r.start!==t)throw new Error(`Cannot use replaced character ${t} as slice start anchor.`);const i=r;for(;r;){!r.intro||i===r&&r.start!==t||(n+=r.intro);const o=r.start<e&&r.end>=e;if(o&&r.edited&&r.end!==e)throw new Error(`Cannot use replaced character ${e} as slice end anchor.`);const s=i===r?t-r.start:0,h=o?r.content.length+e-r.end:r.content.length;if(n+=r.content.slice(s,h),!r.outro||o&&r.end!==e||(n+=r.outro),o)break;r=r.next}return n}snip(t,e){const n=this.clone();return n.remove(0,t),n.remove(e,n.original.length),n}_split(t){if(this.byStart[t]||this.byEnd[t])return;let e=this.lastSearchedChunk;const n=t>e.end;for(;e;){if(e.contains(t))return this._splitChunk(e,t);e=n?this.byStart[e.end]:this.byEnd[e.start]}}_splitChunk(t,e){if(t.edited&&t.content.length){const n=b(this.original)(e);throw new Error(`Cannot split a chunk that has already been edited (${n.line}:${n.column} – "${t.original}")`)}const n=t.split(e);return this.byEnd[e]=t,this.byStart[e]=n,this.byEnd[n.end]=n,t===this.lastChunk&&(this.lastChunk=n),this.lastSearchedChunk=t,!0}toString(){let t=this.intro,e=this.firstChunk;for(;e;)t+=e.toString(),e=e.next;return t+this.outro}isEmpty(){let t=this.firstChunk;do{if(t.intro.length&&t.intro.trim()||t.content.length&&t.content.trim()||t.outro.length&&t.outro.trim())return!1}while(t=t.next);return!0}length(){let t=this.firstChunk,e=0;do{e+=t.intro.length+t.content.length+t.outro.length}while(t=t.next);return e}trimLines(){return this.trim("[\\r\\n]")}trim(t){return this.trimStart(t).trimEnd(t)}trimEndAborted(t){const e=new RegExp((t||"\\s")+"+$");if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;let n=this.lastChunk;do{const t=n.end,r=n.trimEnd(e);if(n.end!==t&&(this.lastChunk===n&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),r)return!0;n=n.previous}while(n);return!1}trimEnd(t){return this.trimEndAborted(t),this}trimStartAborted(t){const e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;let n=this.firstChunk;do{const t=n.end,r=n.trimStart(e);if(n.end!==t&&(n===this.lastChunk&&(this.lastChunk=n.next),this.byEnd[n.end]=n,this.byStart[n.next.start]=n.next,this.byEnd[n.next.end]=n.next),r)return!0;n=n.next}while(n);return!1}trimStart(t){return this.trimStartAborted(t),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(t,e){function n(t,n){return"string"==typeof e?e.replace(/\$(\$|&|\d+)/g,((e,n)=>{if("$"===n)return"$";if("&"===n)return t[0];return+n<t.length?t[+n]:`$${n}`})):e(...t,t.index,n,t.groups)}if(t.global){(function(t,e){let n;const r=[];for(;n=t.exec(e);)r.push(n);return r})(t,this.original).forEach((t=>{null!=t.index&&this.overwrite(t.index,t.index+t[0].length,n(t,this.original))}))}else{const e=this.original.match(t);e&&null!=e.index&&this.overwrite(e.index,e.index+e[0].length,n(e,this.original))}return this}_replaceString(t,e){const{original:n}=this,r=n.indexOf(t);return-1!==r&&this.overwrite(r,r+t.length,e),this}replace(t,e){return"string"==typeof t?this._replaceString(t,e):this._replaceRegexp(t,e)}_replaceAllString(t,e){const{original:n}=this,r=t.length;for(let i=n.indexOf(t);-1!==i;i=n.indexOf(t,i+r))this.overwrite(i,i+r,e);return this}replaceAll(t,e){if("string"==typeof t)return this._replaceAllString(t,e);if(!t.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(t,e)}}var k=Uint8Array,L=Uint16Array,_=Int32Array,R=new k([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),A=new k([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),O=new k([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=function(t,e){for(var n=new L(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new _(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},M=T(R,2),N=M.b,$=M.r;N[28]=258,$[258]=28;for(var U=T(A,0).r,I=new L(32768),j=0;j<32768;++j){var D=(43690&j)>>1|(21845&j)<<1;D=(61680&(D=(52428&D)>>2|(13107&D)<<2))>>4|(3855&D)<<4,I[j]=((65280&D)>>8|(255&D)<<8)>>1}var B=function(t,e,n){for(var r=t.length,i=0,o=new L(e);i<r;++i)t[i]&&++o[t[i]-1];var s,h=new L(e);for(i=1;i<e;++i)h[i]=h[i-1]+o[i-1]<<1;if(n){s=new L(1<<e);var a=15-e;for(i=0;i<r;++i)if(t[i])for(var l=i<<4|t[i],u=e-t[i],d=h[t[i]-1]++<<u,c=d|(1<<u)-1;d<=c;++d)s[I[d]>>a]=l}else for(s=new L(r),i=0;i<r;++i)t[i]&&(s[i]=I[h[t[i]-1]++]>>15-t[i]);return s},P=new k(288);for(j=0;j<144;++j)P[j]=8;for(j=144;j<256;++j)P[j]=9;for(j=256;j<280;++j)P[j]=7;for(j=280;j<288;++j)P[j]=8;var W=new k(32);for(j=0;j<32;++j)W[j]=5;var z=B(P,9,0),J=B(W,5,0),F=function(t){return(t+7)/8|0},H=function(t,e,n){return(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length),new k(t.subarray(e,n))},q=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},G=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},K=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,o=n.slice();if(!i)return{t:et,l:0};if(1==i){var s=new k(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var h=n[0],a=n[1],l=0,u=1,d=2;for(n[0]={s:-1,f:h.f+a.f,l:h,r:a};u!=i-1;)h=n[n[l].f<n[d].f?l++:d++],a=n[l!=u&&n[l].f<n[d].f?l++:d++],n[u++]={s:-1,f:h.f+a.f,l:h,r:a};var c=o[0].s;for(r=1;r<i;++r)o[r].s>c&&(c=o[r].s);var f=new L(c+1),g=Q(n[u-1],f,0);if(g>e){r=0;var p=0,w=g-e,m=1<<w;for(o.sort((function(t,e){return f[e.s]-f[t.s]||t.f-e.f}));r<i;++r){var v=o[r].s;if(!(f[v]>e))break;p+=m-(1<<g-f[v]),f[v]=e}for(p>>=w;p>0;){var b=o[r].s;f[b]<e?p-=1<<e-f[b]++-1:++r}for(;r>=0&&p;--r){var y=o[r].s;f[y]==e&&(--f[y],++p)}g=e}return{t:new k(f),l:g}},Q=function(t,e,n){return-1==t.s?Math.max(Q(t.l,e,n+1),Q(t.r,e,n+1)):e[t.s]=n},V=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new L(++e),r=0,i=t[0],o=1,s=function(t){n[r++]=t},h=1;h<=e;++h)if(t[h]==i&&h!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=t[h]}return{c:n.subarray(0,r),n:e}},X=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},Y=function(t,e,n){var r=n.length,i=F(e+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var o=0;o<r;++o)t[i+o+4]=n[o];return 8*(i+4+r)},Z=function(t,e,n,r,i,o,s,h,a,l,u){q(e,u++,n),++i[256];for(var d=K(i,15),c=d.t,f=d.l,g=K(o,15),p=g.t,w=g.l,m=V(c),v=m.c,b=m.n,y=V(p),x=y.c,C=y.n,S=new L(19),E=0;E<v.length;++E)++S[31&v[E]];for(E=0;E<x.length;++E)++S[31&x[E]];for(var k=K(S,7),_=k.t,T=k.l,M=19;M>4&&!_[O[M-1]];--M);var N,$,U,I,j=l+5<<3,D=X(i,P)+X(o,W)+s,F=X(i,c)+X(o,p)+s+14+3*M+X(S,_)+2*S[16]+3*S[17]+7*S[18];if(a>=0&&j<=D&&j<=F)return Y(e,u,t.subarray(a,a+l));if(q(e,u,1+(F<D)),u+=2,F<D){N=B(c,f,0),$=c,U=B(p,w,0),I=p;var H=B(_,T,0);q(e,u,b-257),q(e,u+5,C-1),q(e,u+10,M-4),u+=14;for(E=0;E<M;++E)q(e,u+3*E,_[O[E]]);u+=3*M;for(var Q=[v,x],Z=0;Z<2;++Z){var tt=Q[Z];for(E=0;E<tt.length;++E){var et=31&tt[E];q(e,u,H[et]),u+=_[et],et>15&&(q(e,u,tt[E]>>5&127),u+=tt[E]>>12)}}}else N=z,$=P,U=J,I=W;for(E=0;E<h;++E){var nt=r[E];if(nt>255){G(e,u,N[(et=nt>>18&31)+257]),u+=$[et+257],et>7&&(q(e,u,nt>>23&31),u+=R[et]);var rt=31&nt;G(e,u,U[rt]),u+=I[rt],rt>3&&(G(e,u,nt>>5&8191),u+=A[rt])}else G(e,u,N[nt]),u+=$[nt]}return G(e,u,N[256]),u+$[256]},tt=new _([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new k(0),nt=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&-306674912)^n>>>1;t[e]=n}return t}(),rt=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=nt[255&n^e[r]]^n>>>8;t=n},d:function(){return~t}}},it=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new k(o.length+t.length);s.set(o),s.set(t,o.length),t=s,i.w=o.length}return function(t,e,n,r,i,o){var s=o.z||t.length,h=new k(r+s+5*(1+Math.ceil(s/7e3))+i),a=h.subarray(r,h.length-i),l=o.l,u=7&(o.r||0);if(e){u&&(a[0]=o.r>>3);for(var d=tt[e-1],c=d>>13,f=8191&d,g=(1<<n)-1,p=o.p||new L(32768),w=o.h||new L(g+1),m=Math.ceil(n/3),v=2*m,b=function(e){return(t[e]^t[e+1]<<m^t[e+2]<<v)&g},y=new _(25e3),x=new L(288),C=new L(32),S=0,E=0,O=o.i||0,T=0,M=o.w||0,N=0;O+2<s;++O){var I=b(O),j=32767&O,D=w[I];if(p[j]=D,w[I]=j,M<=O){var B=s-O;if((S>7e3||T>24576)&&(B>423||!l)){u=Z(t,a,0,y,x,C,E,T,N,O-N,u),T=S=E=0,N=O;for(var P=0;P<286;++P)x[P]=0;for(P=0;P<30;++P)C[P]=0}var W=2,z=0,J=f,q=j-D&32767;if(B>2&&I==b(O-q))for(var G=Math.min(c,B)-1,K=Math.min(32767,O),Q=Math.min(258,B);q<=K&&--J&&j!=D;){if(t[O+W]==t[O+W-q]){for(var V=0;V<Q&&t[O+V]==t[O+V-q];++V);if(V>W){if(W=V,z=q,V>G)break;var X=Math.min(q,V-2),et=0;for(P=0;P<X;++P){var nt=O-q+P&32767,rt=nt-p[nt]&32767;rt>et&&(et=rt,D=nt)}}}q+=(j=D)-(D=p[j])&32767}if(z){y[T++]=268435456|$[W]<<18|U[z];var it=31&$[W],ot=31&U[z];E+=R[it]+A[ot],++x[257+it],++C[ot],M=O+W,++S}else y[T++]=t[O],++x[t[O]]}}for(O=Math.max(O,M);O<s;++O)y[T++]=t[O],++x[t[O]];u=Z(t,a,l,y,x,C,E,T,N,O-N,u),l||(o.r=7&u|a[u/8|0]<<3,u-=7,o.h=w,o.p=p,o.i=O,o.w=M)}else{for(O=o.w||0;O<s+l;O+=65535){var st=O+65535;st>=s&&(a[u/8|0]=l,st=s),u=Y(a,u+1,t.subarray(O,st))}o.i=s}return H(h,0,r+F(u)+i)}(t,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,i)},ot=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},st=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:9==e.level?2:0,t[9]=3,0!=e.mtime&&ot(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var r=0;r<=n.length;++r)t[r+10]=n.charCodeAt(r)}},ht=function(t){return 10+(t.filename?t.filename.length+1:0)};var at="undefined"!=typeof TextEncoder&&new TextEncoder,lt="undefined"!=typeof TextDecoder&&new TextDecoder;try{lt.decode(et,{stream:!0}),1}catch(t){}function ut(t){const e=function(t,e){if(e){for(var n=new k(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}if(at)return at.encode(t);var i=t.length,o=new k(t.length+(t.length>>1)),s=0,h=function(t){o[s++]=t};for(r=0;r<i;++r){if(s+5>o.length){var a=new k(s+8+(i-r<<1));a.set(o),o=a}var l=t.charCodeAt(r);l<128||e?h(l):l<2048?(h(192|l>>6),h(128|63&l)):l>55295&&l<57344?(h(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++r))>>18),h(128|l>>12&63),h(128|l>>6&63),h(128|63&l)):(h(224|l>>12),h(128|l>>6&63),h(128|63&l))}return H(o,0,s)}(JSON.stringify(t)),n=function(t,e){e||(e={});var n=rt(),r=t.length;n.p(t);var i=it(t,e,ht(e),8),o=i.length;return st(i,e),ot(i,o-8,n.d()),ot(i,o-4,r),i}(e);let r;if("undefined"!=typeof window&&window.btoa){const t=Array.from(new Uint8Array(n)).map((t=>String.fromCharCode(t))).join("");r=btoa(t)}else r=Buffer.from(n).toString("base64");return r}function dt(){try{if("undefined"==typeof window){return i("git rev-parse HEAD").toString().trim()}throw"child_process is not available in the browser."}catch(t){return console.error(t),null}}const ct=({root:i=t.resolve("."),absolute:o=!1,commit_hash:s=dt()})=>({markup:({content:h,filename:a})=>{const l=t.resolve(i,"node_modules"),u=t.resolve(i,".svelte-kit");if(a.startsWith(l)||a.startsWith(u))return{code:h};let d=0;try{let t=e.readFileSync(a).toString().split("\n").length,n=h.split("\n").length;d=t-n}catch(t){d=0}const c=n(h),f=new E(h,{filename:a});return r(c.html,{enter(e){if("Element"===e.type){const n=function(e,n,r,i,o,s,h){const{startTag:a,endTag:l}=function(t,e,n){let r,i=null;if(e.children&&e.children.length>0){r=e.children[0].start,i=e.children[e.children.length-1].end;const n=`</${e.name}>`;i=t.indexOf(n,i),-1===i&&(i=e.end)}else r=t.indexOf(">",e.start)+1,"/"===t[r-2]?r=e.end:i=t.lastIndexOf("<",e.end);function o(e){if(!e||!t)return null;return{line:t.slice(0,e).split("\n").length+n,column:e-t.lastIndexOf("\n",e-1)}}return{startTag:{start:o(e.start),end:o(r)},endTag:r===e.end?null:{start:o(i),end:o(e.end)}}}(n,e,r),u={path:h?i:t.relative(s,i),startTag:a,endTag:l,commit:o};return ut(u)}(e,h,d,a,s,i,o),r=`data-onlook-id='${n}'`,l=e.start+e.name.length+1;f.appendLeft(l,` ${r}`)}}}),{code:f.toString(),map:f.generateMap({hires:!0})}}});export{ct as onlookPreprocess};
